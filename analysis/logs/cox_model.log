-------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\k1635179\OneDrive - King's College London\Katie\OpenSafely\Safety mAB and antivirals\Safety-Sotrovimab-Paxlovid-Molnupiravir\anal
> ysis/logs/cox_model.log
  log type:  text
 opened on:  20 Sep 2023, 17:18:10

. 
. *Set Ado file path
. adopath + "$projectdir/analysis/ado"
  [1]  (BASE)      "C:\Program Files\Stata17\ado\base/"
  [2]  (SITE)      "C:\Program Files\Stata17\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\users\PUBLIC\documents/"
  [5]  (PLUS)      "C:\users\PUBLIC\documents/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "C:\Users\k1635179\OneDrive - King's College London\Katie\OpenSafely\Safety mAB and antivirals\Safety-Sotrovimab-Paxlovid-Molnupirav
> ir\analysis/analysis/ado"

. 
. * SET Index date 
. global indexdate                        = "01/03/2020"

. 
. use "$projectdir/output/data/main", clear
file C:\Users\k1635179\OneDrive - King's College London\Katie\OpenSafely\Safety mAB and
    antivirals\Safety-Sotrovimab-Paxlovid-Molnupiravir\analysis/output/data/main.dta not found
r(601);

end of do-file

r(601);

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. global projectdir "C:\Users\k1635179\OneDrive - King's College London\Katie\OpenSafely\Safety mAB and antivirals\Safety-Sotrovimab-Paxlovid-Molnupira
> vir" 

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. use "$projectdir/output/data/main", clear

. 
end of do-file

. stset stop_died_date_ons, id(patient_id) origin(time start_date) enter(time start_date) failure(fail_died_date_ons==1)

Survival-time data settings

           ID variable: patient_id
         Failure event: fail_died_date_ons==1
Observed time interval: (stop_died_date_ons[_n-1], stop_died_date_ons]
     Enter on or after: time start_date
     Exit on or before: failure
     Time for analysis: (time-origin)
                Origin: time start_date

--------------------------------------------------------------------------
     24,655  total observations
      9,887  observations end on or before enter()
--------------------------------------------------------------------------
     14,768  observations remaining, representing
     14,768  subjects
        453  failures in single-failure-per-subject data
 414,653.25  total analysis time at risk and under observation
                                                At risk from t =         0
                                     Earliest observed entry t =         0
                                          Last observed exit t =        29

. sts

         Failure _d: fail_died_date_ons==1
   Analysis time _t: (stop_died_date_ons-origin)
             Origin: time start_date
  Enter on or after: time start_date
        ID variable: patient_id

. sts graph, by(drug) tmax(28)

         Failure _d: fail_died_date_ons==1
   Analysis time _t: (stop_died_date_ons-origin)
             Origin: time start_date
  Enter on or after: time start_date
        ID variable: patient_id

. preserve

. serset use

. br

. keep if inlist(_t,0,4,8,12,16,20,24,28)
(34 observations deleted)

. br

. gen s = round(__0 * 100)/100
(15 missing values generated)

. br

. tw line s _t, connect(J)

. sts graph, by(drug) tmax(28)
data not st 
r(119);

. restore

. sts graph, by(drug) tmax(28)

         Failure _d: fail_died_date_ons==1
   Analysis time _t: (stop_died_date_ons-origin)
             Origin: time start_date
  Enter on or after: time start_date
        ID variable: patient_id

. preserve

. serset use

. br

. help serset

. restore

. sts graph, by(drug) tmax(28)

         Failure _d: fail_died_date_ons==1
   Analysis time _t: (stop_died_date_ons-origin)
             Origin: time start_date
  Enter on or after: time start_date
        ID variable: patient_id

. serset use, by(drug)
option by() not allowed
r(198);

. serset dir

  0.  55 observations on 2 variables
      __00000N _t

  1.  55 observations on 2 variables
      __00000O _t

  2.  55 observations on 2 variables
      __00000P _t

  3.  55 observations on 2 variables
      __00000Q _t

. sts graph, by(drug) tmax(28)

         Failure _d: fail_died_date_ons==1
   Analysis time _t: (stop_died_date_ons-origin)
             Origin: time start_date
  Enter on or after: time start_date
        ID variable: patient_id

. preserve

. serset use

. br

. sts graph, by(drug)
data not st 
r(119);

. restore

. sts graph, by(drug) tmax(28)

         Failure _d: fail_died_date_ons==1
   Analysis time _t: (stop_died_date_ons-origin)
             Origin: time start_date
  Enter on or after: time start_date
        ID variable: patient_id

. preserve

. serset use

. br

. restore

. stcurve, survival at1(drug=0) at2(drug=1) at3(drug=2) at4(drug=3)
last estimates not found
r(301);

. stset stop_died_date_ons, id(patient_id) origin(time start_date) enter(time start_date) failure(fail_died_date_ons==1)

Survival-time data settings

           ID variable: patient_id
         Failure event: fail_died_date_ons==1
Observed time interval: (stop_died_date_ons[_n-1], stop_died_date_ons]
     Enter on or after: time start_date
     Exit on or before: failure
     Time for analysis: (time-origin)
                Origin: time start_date

--------------------------------------------------------------------------
     24,655  total observations
      9,887  observations end on or before enter()
--------------------------------------------------------------------------
     14,768  observations remaining, representing
     14,768  subjects
        453  failures in single-failure-per-subject data
 414,653.25  total analysis time at risk and under observation
                                                At risk from t =         0
                                     Earliest observed entry t =         0
                                          Last observed exit t =        29

. stcurve, survival at1(drug=0) at2(drug=1) at3(drug=2) at4(drug=3)
last estimates not found
r(301);

. stcurve
last estimates not found
r(301);

. stset stop_died_date_ons, id(patient_id) origin(time start_date) enter(time start_date) failure(fail_died_date_ons==1)

Survival-time data settings

           ID variable: patient_id
         Failure event: fail_died_date_ons==1
Observed time interval: (stop_died_date_ons[_n-1], stop_died_date_ons]
     Enter on or after: time start_date
     Exit on or before: failure
     Time for analysis: (time-origin)
                Origin: time start_date

--------------------------------------------------------------------------
     24,655  total observations
      9,887  observations end on or before enter()
--------------------------------------------------------------------------
     14,768  observations remaining, representing
     14,768  subjects
        453  failures in single-failure-per-subject data
 414,653.25  total analysis time at risk and under observation
                                                At risk from t =         0
                                     Earliest observed entry t =         0
                                          Last observed exit t =        29

. sts graph, by(drug) tmax(28)

         Failure _d: fail_died_date_ons==1
   Analysis time _t: (stop_died_date_ons-origin)
             Origin: time start_date
  Enter on or after: time start_date
        ID variable: patient_id

. stcurve
last estimates not found
r(301);

. stcurve, survival at1(drug=0) at2(drug=1) at3(drug=2) at4(drug=3)
last estimates not found
r(301);

. stset stop_died_date_ons, id(patient_id) origin(time start_date) enter(time start_date) failure(fail_died_date_ons==1)

Survival-time data settings

           ID variable: patient_id
         Failure event: fail_died_date_ons==1
Observed time interval: (stop_died_date_ons[_n-1], stop_died_date_ons]
     Enter on or after: time start_date
     Exit on or before: failure
     Time for analysis: (time-origin)
                Origin: time start_date

--------------------------------------------------------------------------
     24,655  total observations
      9,887  observations end on or before enter()
--------------------------------------------------------------------------
     14,768  observations remaining, representing
     14,768  subjects
        453  failures in single-failure-per-subject data
 414,653.25  total analysis time at risk and under observation
                                                At risk from t =         0
                                     Earliest observed entry t =         0
                                          Last observed exit t =        29

. stcurve, survival
last estimates not found
r(301);

. help stcurve

. stcurve, survival
last estimates not found
r(301);

. stset stop_died_date_ons, id(patient_id) origin(time start_date) enter(time start_date) failure(fail_died_date_ons==1)

Survival-time data settings

           ID variable: patient_id
         Failure event: fail_died_date_ons==1
Observed time interval: (stop_died_date_ons[_n-1], stop_died_date_ons]
     Enter on or after: time start_date
     Exit on or before: failure
     Time for analysis: (time-origin)
                Origin: time start_date

--------------------------------------------------------------------------
     24,655  total observations
      9,887  observations end on or before enter()
--------------------------------------------------------------------------
     14,768  observations remaining, representing
     14,768  subjects
        453  failures in single-failure-per-subject data
 414,653.25  total analysis time at risk and under observation
                                                At risk from t =         0
                                     Earliest observed entry t =         0
                                          Last observed exit t =        29

. stcurve, survival
last estimates not found
r(301);

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. use "$projectdir/output/data/main", clear

. 
end of do-file

. stset stop_died_date_ons, id(patient_id) origin(time start_date) enter(time start_date) failure(fail_died_date_ons==1)

Survival-time data settings

           ID variable: patient_id
         Failure event: fail_died_date_ons==1
Observed time interval: (stop_died_date_ons[_n-1], stop_died_date_ons]
     Enter on or after: time start_date
     Exit on or before: failure
     Time for analysis: (time-origin)
                Origin: time start_date

--------------------------------------------------------------------------
     24,655  total observations
      9,887  observations end on or before enter()
--------------------------------------------------------------------------
     14,768  observations remaining, representing
     14,768  subjects
        453  failures in single-failure-per-subject data
 414,653.25  total analysis time at risk and under observation
                                                At risk from t =         0
                                     Earliest observed entry t =         0
                                          Last observed exit t =        29

. stcurve, survival
last estimates not found
r(301);

. stcurve, survival at1(drug=0) at2(drug=1) at3(drug=2) at4(drug=3) title("")
last estimates not found
r(301);

.  webuse cancer
(Patient survival in drug trial)

. replace drug = drug == 2 | drug == 3
(48 real changes made)

. stcurve, survival ylabels(0 .5 1)
last estimates not found
r(301);

. streg age drug, d(llog)#

        Failure _d: died
  Analysis time _t: studytime
option # not allowed
r(198);

. streg age drug, d(llog)

        Failure _d: died
  Analysis time _t: studytime

Fitting constant-only model:
Iteration 0:   log likelihood = -70.866128  
Iteration 1:   log likelihood = -66.902453  
Iteration 2:   log likelihood = -60.814826  
Iteration 3:   log likelihood = -60.786192  
Iteration 4:   log likelihood = -60.786142  
Iteration 5:   log likelihood = -60.786142  

Fitting full model:
Iteration 0:   log likelihood = -60.786142  (not concave)
Iteration 1:   log likelihood =  -49.85349  
Iteration 2:   log likelihood = -43.904544  
Iteration 3:   log likelihood = -43.220506  
Iteration 4:   log likelihood = -43.216981  
Iteration 5:   log likelihood =  -43.21698  

Loglogistic AFT regression

No. of subjects =  48                                   Number of obs =     48
No. of failures =  31
Time at risk    = 744
                                                        LR chi2(2)    =  35.14
Log likelihood = -43.21698                              Prob > chi2   = 0.0000

------------------------------------------------------------------------------
          _t | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
         age |  -.0803289   .0221598    -3.62   0.000    -.1237614   -.0368964
        drug |   1.420237   .2502148     5.68   0.000     .9298251    1.910649
       _cons |   6.446711   1.231914     5.23   0.000     4.032204    8.861218
-------------+----------------------------------------------------------------
    /lngamma |  -.8456552   .1479337    -5.72   0.000      -1.1356   -.5557105
-------------+----------------------------------------------------------------
       gamma |    .429276   .0635044                      .3212293    .5736646
------------------------------------------------------------------------------

. restore
nothing to restore
r(622);

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. use "$projectdir/output/data/main", clear

. 
end of do-file

. stset stop_died_date_ons, id(patient_id) origin(time start_date) enter(time start_date) failure(fail_died_date_ons==1)

Survival-time data settings

           ID variable: patient_id
         Failure event: fail_died_date_ons==1
Observed time interval: (stop_died_date_ons[_n-1], stop_died_date_ons]
     Enter on or after: time start_date
     Exit on or before: failure
     Time for analysis: (time-origin)
                Origin: time start_date

--------------------------------------------------------------------------
     24,655  total observations
      9,887  observations end on or before enter()
--------------------------------------------------------------------------
     14,768  observations remaining, representing
     14,768  subjects
        453  failures in single-failure-per-subject data
 414,653.25  total analysis time at risk and under observation
                                                At risk from t =         0
                                     Earliest observed entry t =         0
                                          Last observed exit t =        29

. stcox
last estimates not found
r(301);

. stset stop_died_date_ons, id(patient_id) origin(time start_date) enter(time start_date) failure(fail_died_date_ons==1)

Survival-time data settings

           ID variable: patient_id
         Failure event: fail_died_date_ons==1
Observed time interval: (stop_died_date_ons[_n-1], stop_died_date_ons]
     Enter on or after: time start_date
     Exit on or before: failure
     Time for analysis: (time-origin)
                Origin: time start_date

--------------------------------------------------------------------------
     24,655  total observations
      9,887  observations end on or before enter()
--------------------------------------------------------------------------
     14,768  observations remaining, representing
     14,768  subjects
        453  failures in single-failure-per-subject data
 414,653.25  total analysis time at risk and under observation
                                                At risk from t =         0
                                     Earliest observed entry t =         0
                                          Last observed exit t =        29

. tab _st

1 if record |
   is to be |
    used; 0 |
  otherwise |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      9,887       40.10       40.10
          1 |     14,768       59.90      100.00
------------+-----------------------------------
      Total |     24,655      100.00

. srcox i.drug
command srcox is unrecognized
r(199);

. stcox i.drug

         Failure _d: fail_died_date_ons==1
   Analysis time _t: (stop_died_date_ons-origin)
             Origin: time start_date
  Enter on or after: time start_date
        ID variable: patient_id

Iteration 0:   log likelihood = -4333.7122
Iteration 1:   log likelihood = -4331.9554
Iteration 2:   log likelihood = -4331.8137
Iteration 3:   log likelihood = -4331.8113
Iteration 4:   log likelihood = -4331.8113
Refining estimates:
Iteration 0:   log likelihood = -4331.8113

Cox regression with Breslow method for ties

No. of subjects =     14,768                            Number of obs = 14,768
No. of failures =        453
Time at risk    = 414,653.25
                                                        LR chi2(3)    =   3.80
Log likelihood = -4331.8113                             Prob > chi2   = 0.2837

-------------------------------------------------------------------------------
           _t | Haz. ratio   Std. err.      z    P>|z|     [95% conf. interval]
--------------+----------------------------------------------------------------
         drug |
  sotrovimab  |   .3878381   .2748628    -1.34   0.181      .096694    1.555612
    paxlovid  |   1.231235   .5060499     0.51   0.613     .5501596    2.755455
molnupiravir  |   .5804533   .3362604    -0.94   0.348     .1864922    1.806649
-------------------------------------------------------------------------------

. stcurve, survival at1(drug=0) at2(drug=1) at3(drug=2) at4(drug=3)

. serset use

. br

. keep if inlist(_t,0,4,8,12,16,20,24,28)
_t not found
r(111);

. keep if inlist( __000004,0,4,8,12,16,20,24,28)
(14,554 observations deleted)

. restore
nothing to restore
r(622);

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. use "$projectdir/output/data/main", clear

. 
end of do-file

. stset stop_died_date_ons, id(patient_id) origin(time start_date) enter(time start_date) failure(fail_died_date_ons==1)

Survival-time data settings

           ID variable: patient_id
         Failure event: fail_died_date_ons==1
Observed time interval: (stop_died_date_ons[_n-1], stop_died_date_ons]
     Enter on or after: time start_date
     Exit on or before: failure
     Time for analysis: (time-origin)
                Origin: time start_date

--------------------------------------------------------------------------
     24,655  total observations
      9,887  observations end on or before enter()
--------------------------------------------------------------------------
     14,768  observations remaining, representing
     14,768  subjects
        453  failures in single-failure-per-subject data
 414,653.25  total analysis time at risk and under observation
                                                At risk from t =         0
                                     Earliest observed entry t =         0
                                          Last observed exit t =        29

. sts graph, by(drug) tmax(28)

         Failure _d: fail_died_date_ons==1
   Analysis time _t: (stop_died_date_ons-origin)
             Origin: time start_date
  Enter on or after: time start_date
        ID variable: patient_id

. preserve

. serset use

. br __000005 _t

. restore

. stcox i.drug

         Failure _d: fail_died_date_ons==1
   Analysis time _t: (stop_died_date_ons-origin)
             Origin: time start_date
  Enter on or after: time start_date
        ID variable: patient_id

Iteration 0:   log likelihood = -4333.7122
Iteration 1:   log likelihood = -4331.9554
Iteration 2:   log likelihood = -4331.8137
Iteration 3:   log likelihood = -4331.8113
Iteration 4:   log likelihood = -4331.8113
Refining estimates:
Iteration 0:   log likelihood = -4331.8113

Cox regression with Breslow method for ties

No. of subjects =     14,768                            Number of obs = 14,768
No. of failures =        453
Time at risk    = 414,653.25
                                                        LR chi2(3)    =   3.80
Log likelihood = -4331.8113                             Prob > chi2   = 0.2837

-------------------------------------------------------------------------------
           _t | Haz. ratio   Std. err.      z    P>|z|     [95% conf. interval]
--------------+----------------------------------------------------------------
         drug |
  sotrovimab  |   .3878381   .2748628    -1.34   0.181      .096694    1.555612
    paxlovid  |   1.231235   .5060499     0.51   0.613     .5501596    2.755455
molnupiravir  |   .5804533   .3362604    -0.94   0.348     .1864922    1.806649
-------------------------------------------------------------------------------

. 
. stcurve, survival at1(drug=0) at2(drug=1) at3(drug=2) at4(drug=3)

. preserve

. preserve
already preserved
r(621);

. serset use

. keep if inlist( __000004,0,4,8,12,16,20,24,28)
__000004 not found
r(111);

. keep if inlist( __000006 ,0,4,8,12,16,20,24,28)
(14,554 observations deleted)

. foreach var of varlist _surv1 _surv2 _surv3 _surv4{
  2. 
. gen `var'_round = round(__0 * 100)/100
  3. 
. }

. br

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. use "$projectdir/output/data/main", clear

. 
end of do-file

. stset stop_died_date_ons, id(patient_id) origin(time start_date) enter(time start_date) failure(fail_died_date_ons==1)

Survival-time data settings

           ID variable: patient_id
         Failure event: fail_died_date_ons==1
Observed time interval: (stop_died_date_ons[_n-1], stop_died_date_ons]
     Enter on or after: time start_date
     Exit on or before: failure
     Time for analysis: (time-origin)
                Origin: time start_date

--------------------------------------------------------------------------
     24,655  total observations
      9,887  observations end on or before enter()
--------------------------------------------------------------------------
     14,768  observations remaining, representing
     14,768  subjects
        453  failures in single-failure-per-subject data
 414,653.25  total analysis time at risk and under observation
                                                At risk from t =         0
                                     Earliest observed entry t =         0
                                          Last observed exit t =        29

. 
. stcox i.drug

         Failure _d: fail_died_date_ons==1
   Analysis time _t: (stop_died_date_ons-origin)
             Origin: time start_date
  Enter on or after: time start_date
        ID variable: patient_id

Iteration 0:   log likelihood = -4333.7122
Iteration 1:   log likelihood = -4331.9554
Iteration 2:   log likelihood = -4331.8137
Iteration 3:   log likelihood = -4331.8113
Iteration 4:   log likelihood = -4331.8113
Refining estimates:
Iteration 0:   log likelihood = -4331.8113

Cox regression with Breslow method for ties

No. of subjects =     14,768                            Number of obs = 14,768
No. of failures =        453
Time at risk    = 414,653.25
                                                        LR chi2(3)    =   3.80
Log likelihood = -4331.8113                             Prob > chi2   = 0.2837

-------------------------------------------------------------------------------
           _t | Haz. ratio   Std. err.      z    P>|z|     [95% conf. interval]
--------------+----------------------------------------------------------------
         drug |
  sotrovimab  |   .3878381   .2748628    -1.34   0.181      .096694    1.555612
    paxlovid  |   1.231235   .5060499     0.51   0.613     .5501596    2.755455
molnupiravir  |   .5804533   .3362604    -0.94   0.348     .1864922    1.806649
-------------------------------------------------------------------------------

. 
. stcurve, survival at1(drug=0) at2(drug=1) at3(drug=2) at4(drug=3)

. preserve
already preserved
r(621);

. serset use

. keep if inlist( __000004,0,4,8,12,16,20,24,28)
__000004 not found
r(111);

. keep if inlist( __000007,0,4,8,12,16,20,24,28)
(14,554 observations deleted)

. foreach var of varlist _surv1 _surv2 _surv3 _surv4{
  2. 
. gen `var'_round = round(`var' * 100)/100
  3. 
. }

. br

. tw line _surv1_round __000007, connect(J)

. help tw line

. tw (line _surv1_round __000007, connect(J))  (line _surv2_round __000007, connect(J))

. tw (line _surv1_round __000007, connect(J))  (line _surv2_round __000007, connect(J))  (line _surv3_round __000007, connect(J))  (line _surv4_round _
> _000007, connect(J))

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. tw  (line _surv1_round __000007, connect(J)) (line _surv2_round __000007, connect(J)) //

.     (line _surv3_round __000007, connect(J)) (line _surv4_round __000007, connect(J)) //
( is not a valid command name
r(199);

end of do-file

r(199);

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. tw  (line _surv1_round __000007, connect(J)) (line _surv2_round __000007, connect(J)) ///
>     (line _surv3_round __000007, connect(J)) (line _surv4_round __000007, connect(J)) ///
>     xtitle("Analysis time (days)") legend(order(1 "Control" 2 "Sotrovimab" 3 "Paxlovid" 4 "Molnupiravir") symxsize(*0.4) size(small)) ///
>         ylabel(,angle(horizontal)) plotregion(color(white)) graphregion(color(white)) ///
>         ytitle("Survival Probability" ) xtitle("Time (Days)") 
) required
r(100);

end of do-file

r(100);

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. tw  (line _surv1_round __000007, connect(J)) (line _surv2_round __000007, connect(J)) ///
>     (line _surv3_round __000007, connect(J)) (line _surv4_round __000007, connect(J)) ///
>     xtitle("Analysis time (days)") legend(order(1 "Control" 2 "Sotrovimab" 3 "Paxlovid" 4 "Molnupiravir") symxsize(*0.4) size(small)) 
) required
r(100);

end of do-file

r(100);

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. tw  (line _surv1_round __000007, connect(J)) (line _surv2_round __000007, connect(J)) ///
>     (line _surv3_round __000007, connect(J)) (line _surv4_round __000007, connect(J)), ///
>     xtitle("Analysis time (days)") legend(order(1 "Control" 2 "Sotrovimab" 3 "Paxlovid" 4 "Molnupiravir") symxsize(*0.4) size(small)) 

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. tw  (line _surv1_round __000007, connect(J)) (line _surv2_round __000007, connect(J)) ///
>     (line _surv3_round __000007, connect(J)) (line _surv4_round __000007, connect(J)), ///
>     xtitle("Analysis time (days)") legend(order(1 "Control" 2 "Sotrovimab" 3 "Paxlovid" 4 "Molnupiravir") symxsize(*0.4) size(small)) 

.         ylabel(,angle(horizontal)) plotregion(color(white)) graphregion(color(white)) ytitle("Survival Probability" ) xtitle("Time (Days)") 
command ylabel is unrecognized
r(199);

end of do-file

r(199);

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. tw  (line _surv1_round __000007, connect(J)) (line _surv2_round __000007, connect(J)) ///
>     (line _surv3_round __000007, connect(J)) (line _surv4_round __000007, connect(J)), ///
>     xtitle("Analysis time (days)") legend(order(1 "Control" 2 "Sotrovimab" 3 "Paxlovid" 4 "Molnupiravir") symxsize(*0.4) size(small)) ///
>         ylabel(,angle(horizontal)) plotregion(color(white)) graphregion(color(white)) ytitle("Survival Probability" ) xtitle("Time (Days)") 

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. use "$projectdir/output/data/main", clear

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. preserve

. stset stop_died_date_ons, id(patient_id) origin(time start_date) enter(time start_date) failure(fail_died_date_ons==1)

Survival-time data settings

           ID variable: patient_id
         Failure event: fail_died_date_ons==1
Observed time interval: (stop_died_date_ons[_n-1], stop_died_date_ons]
     Enter on or after: time start_date
     Exit on or before: failure
     Time for analysis: (time-origin)
                Origin: time start_date

--------------------------------------------------------------------------
     24,655  total observations
      9,887  observations end on or before enter()
--------------------------------------------------------------------------
     14,768  observations remaining, representing
     14,768  subjects
        453  failures in single-failure-per-subject data
 414,653.25  total analysis time at risk and under observation
                                                At risk from t =         0
                                     Earliest observed entry t =         0
                                          Last observed exit t =        29

. stcox i.drug

         Failure _d: fail_died_date_ons==1
   Analysis time _t: (stop_died_date_ons-origin)
             Origin: time start_date
  Enter on or after: time start_date
        ID variable: patient_id

Iteration 0:   log likelihood = -4333.7122
Iteration 1:   log likelihood = -4331.9554
Iteration 2:   log likelihood = -4331.8137
Iteration 3:   log likelihood = -4331.8113
Iteration 4:   log likelihood = -4331.8113
Refining estimates:
Iteration 0:   log likelihood = -4331.8113

Cox regression with Breslow method for ties

No. of subjects =     14,768                            Number of obs = 14,768
No. of failures =        453
Time at risk    = 414,653.25
                                                        LR chi2(3)    =   3.80
Log likelihood = -4331.8113                             Prob > chi2   = 0.2837

-------------------------------------------------------------------------------
           _t | Haz. ratio   Std. err.      z    P>|z|     [95% conf. interval]
--------------+----------------------------------------------------------------
         drug |
  sotrovimab  |   .3878381   .2748628    -1.34   0.181      .096694    1.555612
    paxlovid  |   1.231235   .5060499     0.51   0.613     .5501596    2.755455
molnupiravir  |   .5804533   .3362604    -0.94   0.348     .1864922    1.806649
-------------------------------------------------------------------------------

. stcurve, survival at1(drug=0) at2(drug=1) at3(drug=2) at4(drug=3)

. 
end of do-file

. stcurve, survival at1(drug=0) at2(drug=1) at3(drug=2) at4(drug=3), name(katie)
invalid 'name' 
r(198);

. stcurve, survival at1(drug=0) at2(drug=1) at3(drug=2) at4(drug=3) saving(katie)
e(sample) not found
r(111);

. stcurve, survival at1(drug=0) at2(drug=1) at3(drug=2) at4(drug=3), saving(katie)
invalid 'saving' 
r(198);

. stcurve, survival at1(drug=0) at2(drug=1) at3(drug=2) at4(drug=3) name(katie)
e(sample) not found
r(111);

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. serset use

. keep if inlist( __000007,0,4,8,12,16,20,24,28)
__000007 not found
r(111);

end of do-file

r(111);

. br

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. stset stop_died_date_ons, id(patient_id) origin(time start_date) enter(time start_date) failure(fail_died_date_ons==1)
variable stop_died_date_ons not found
r(111);

end of do-file

r(111);

. restore

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. stset stop_died_date_ons, id(patient_id) origin(time start_date) enter(time start_date) failure(fail_died_date_ons==1)

Survival-time data settings

           ID variable: patient_id
         Failure event: fail_died_date_ons==1
Observed time interval: (stop_died_date_ons[_n-1], stop_died_date_ons]
     Enter on or after: time start_date
     Exit on or before: failure
     Time for analysis: (time-origin)
                Origin: time start_date

--------------------------------------------------------------------------
     24,655  total observations
      9,887  observations end on or before enter()
--------------------------------------------------------------------------
     14,768  observations remaining, representing
     14,768  subjects
        453  failures in single-failure-per-subject data
 414,653.25  total analysis time at risk and under observation
                                                At risk from t =         0
                                     Earliest observed entry t =         0
                                          Last observed exit t =        29

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. stcox i.drug

         Failure _d: fail_died_date_ons==1
   Analysis time _t: (stop_died_date_ons-origin)
             Origin: time start_date
  Enter on or after: time start_date
        ID variable: patient_id

Iteration 0:   log likelihood = -4333.7122
Iteration 1:   log likelihood = -4331.9554
Iteration 2:   log likelihood = -4331.8137
Iteration 3:   log likelihood = -4331.8113
Iteration 4:   log likelihood = -4331.8113
Refining estimates:
Iteration 0:   log likelihood = -4331.8113

Cox regression with Breslow method for ties

No. of subjects =     14,768                            Number of obs = 14,768
No. of failures =        453
Time at risk    = 414,653.25
                                                        LR chi2(3)    =   3.80
Log likelihood = -4331.8113                             Prob > chi2   = 0.2837

-------------------------------------------------------------------------------
           _t | Haz. ratio   Std. err.      z    P>|z|     [95% conf. interval]
--------------+----------------------------------------------------------------
         drug |
  sotrovimab  |   .3878381   .2748628    -1.34   0.181      .096694    1.555612
    paxlovid  |   1.231235   .5060499     0.51   0.613     .5501596    2.755455
molnupiravir  |   .5804533   .3362604    -0.94   0.348     .1864922    1.806649
-------------------------------------------------------------------------------

. stcurve, survival at1(drug=0) at2(drug=1) at3(drug=2) at4(drug=3)

. 
end of do-file

. preserve

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. serset use

. 
end of do-file

. br

. serset use

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. keep if inlist( __0,0,4,8,12,16,20,24,28)
(14,554 observations deleted)

. foreach var of varlist _surv1 _surv2 _surv3 _surv4{
  2.         gen `var'_round = round(`var' * 100)/100
  3. }

. 
end of do-file

. br

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. foreach var of varlist _surv1 _surv2 _surv3 _surv4{
  2.         gen `var'_round = round(`var' * 10)/10
  3. }
variable _surv1_round already defined
r(110);

end of do-file

r(110);

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. foreach var of varlist _surv1 _surv2 _surv3 _surv4{
  2.         gen `var'_round1 = round(`var' * 10)/10
  3. }

. 
end of do-file

. br

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. foreach var of varlist _surv1 _surv2 _surv3 _surv4{
  2.         gen `var'_round2 = round(`var' * 10000)/10000
  3. }

. 
end of do-file

. br

. drop _surv1_round _surv1_round _surv2_round _surv3_round _surv4_round _surv1_round1 _surv2_round1 _surv3_round1 _surv4_round1

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. tw  (line _surv1_round __000007, connect(J)) (line _surv2_round __000007, connect(J)) ///
>     (line _surv3_round __000007, connect(J)) (line _surv4_round __000007, connect(J)), ///
>     xtitle("Analysis time (days)") legend(order(1 "Control" 2 "Sotrovimab" 3 "Paxlovid" 4 "Molnupiravir") symxsize(*0.4) size(sma
> ll)) ///
>         ylabel(,angle(horizontal)) plotregion(color(white)) graphregion(color(white)) ytitle("Survival Probability" ) xtitle("Tim
> e (Days)") 
variable __000007 not found
r(111);

end of do-file

r(111);

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. tw  (line _surv1_round __0, connect(J)) (line _surv2_round __0, connect(J)) ///
>     (line _surv3_round __0, connect(J)) (line _surv4_round __0, connect(J)), ///
>     xtitle("Analysis time (days)") legend(order(1 "Control" 2 "Sotrovimab" 3 "Paxlovid" 4 "Molnupiravir") symxsize(*0.4) size(sma
> ll)) ///
>         ylabel(,angle(horizontal)) plotregion(color(white)) graphregion(color(white)) ytitle("Survival Probability" ) xtitle("Tim
> e (Days)") 
__0 ambiguous abbreviation
r(111);

end of do-file

r(111);

. restore

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. preserve

. stset stop_died_date_ons, id(patient_id) origin(time start_date) enter(time start_date) failure(fail_died_date_ons==1)

Survival-time data settings

           ID variable: patient_id
         Failure event: fail_died_date_ons==1
Observed time interval: (stop_died_date_ons[_n-1], stop_died_date_ons]
     Enter on or after: time start_date
     Exit on or before: failure
     Time for analysis: (time-origin)
                Origin: time start_date

--------------------------------------------------------------------------
     24,655  total observations
      9,887  observations end on or before enter()
--------------------------------------------------------------------------
     14,768  observations remaining, representing
     14,768  subjects
        453  failures in single-failure-per-subject data
 414,653.25  total analysis time at risk and under observation
                                                At risk from t =         0
                                     Earliest observed entry t =         0
                                          Last observed exit t =        29

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. stcox i.drug

         Failure _d: fail_died_date_ons==1
   Analysis time _t: (stop_died_date_ons-origin)
             Origin: time start_date
  Enter on or after: time start_date
        ID variable: patient_id

Iteration 0:   log likelihood = -4333.7122
Iteration 1:   log likelihood = -4331.9554
Iteration 2:   log likelihood = -4331.8137
Iteration 3:   log likelihood = -4331.8113
Iteration 4:   log likelihood = -4331.8113
Refining estimates:
Iteration 0:   log likelihood = -4331.8113

Cox regression with Breslow method for ties

No. of subjects =     14,768                            Number of obs = 14,768
No. of failures =        453
Time at risk    = 414,653.25
                                                        LR chi2(3)    =   3.80
Log likelihood = -4331.8113                             Prob > chi2   = 0.2837

-------------------------------------------------------------------------------
           _t | Haz. ratio   Std. err.      z    P>|z|     [95% conf. interval]
--------------+----------------------------------------------------------------
         drug |
  sotrovimab  |   .3878381   .2748628    -1.34   0.181      .096694    1.555612
    paxlovid  |   1.231235   .5060499     0.51   0.613     .5501596    2.755455
molnupiravir  |   .5804533   .3362604    -0.94   0.348     .1864922    1.806649
-------------------------------------------------------------------------------

. stcurve, survival at1(drug=0) at2(drug=1) at3(drug=2) at4(drug=3)

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. serset use

. rename _0 time
variable _0 not found
r(111);

end of do-file

r(111);

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. serset use

. 
end of do-file

. restore
nothing to restore
r(622);

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. serset use

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. use "$projectdir/output/data/main", clear

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. preserve

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. stset stop_died_date_ons, id(patient_id) origin(time start_date) enter(time start_date) failure(fail_died_date_ons==1)

Survival-time data settings

           ID variable: patient_id
         Failure event: fail_died_date_ons==1
Observed time interval: (stop_died_date_ons[_n-1], stop_died_date_ons]
     Enter on or after: time start_date
     Exit on or before: failure
     Time for analysis: (time-origin)
                Origin: time start_date

--------------------------------------------------------------------------
     24,655  total observations
      9,887  observations end on or before enter()
--------------------------------------------------------------------------
     14,768  observations remaining, representing
     14,768  subjects
        453  failures in single-failure-per-subject data
 414,653.25  total analysis time at risk and under observation
                                                At risk from t =         0
                                     Earliest observed entry t =         0
                                          Last observed exit t =        29

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. stcox i.drug

         Failure _d: fail_died_date_ons==1
   Analysis time _t: (stop_died_date_ons-origin)
             Origin: time start_date
  Enter on or after: time start_date
        ID variable: patient_id

Iteration 0:   log likelihood = -4333.7122
Iteration 1:   log likelihood = -4331.9554
Iteration 2:   log likelihood = -4331.8137
Iteration 3:   log likelihood = -4331.8113
Iteration 4:   log likelihood = -4331.8113
Refining estimates:
Iteration 0:   log likelihood = -4331.8113

Cox regression with Breslow method for ties

No. of subjects =     14,768                            Number of obs = 14,768
No. of failures =        453
Time at risk    = 414,653.25
                                                        LR chi2(3)    =   3.80
Log likelihood = -4331.8113                             Prob > chi2   = 0.2837

-------------------------------------------------------------------------------
           _t | Haz. ratio   Std. err.      z    P>|z|     [95% conf. interval]
--------------+----------------------------------------------------------------
         drug |
  sotrovimab  |   .3878381   .2748628    -1.34   0.181      .096694    1.555612
    paxlovid  |   1.231235   .5060499     0.51   0.613     .5501596    2.755455
molnupiravir  |   .5804533   .3362604    -0.94   0.348     .1864922    1.806649
-------------------------------------------------------------------------------

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. stcurve, survival at1(drug=0) at2(drug=1) at3(drug=2) at4(drug=3)

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. serset use

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. stcurve, survival at1(drug=0) at2(drug=1) at3(drug=2) at4(drug=3)
data not st 
r(119);

end of do-file

r(119);

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. use "$projectdir/output/data/main", clear

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. preserve

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. stset stop_died_date_ons, id(patient_id) origin(time start_date) enter(time start_date) failure(fail_died_date_ons==1)

Survival-time data settings

           ID variable: patient_id
         Failure event: fail_died_date_ons==1
Observed time interval: (stop_died_date_ons[_n-1], stop_died_date_ons]
     Enter on or after: time start_date
     Exit on or before: failure
     Time for analysis: (time-origin)
                Origin: time start_date

--------------------------------------------------------------------------
     24,655  total observations
      9,887  observations end on or before enter()
--------------------------------------------------------------------------
     14,768  observations remaining, representing
     14,768  subjects
        453  failures in single-failure-per-subject data
 414,653.25  total analysis time at risk and under observation
                                                At risk from t =         0
                                     Earliest observed entry t =         0
                                          Last observed exit t =        29

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. stcox i.drug

         Failure _d: fail_died_date_ons==1
   Analysis time _t: (stop_died_date_ons-origin)
             Origin: time start_date
  Enter on or after: time start_date
        ID variable: patient_id

Iteration 0:   log likelihood = -4333.7122
Iteration 1:   log likelihood = -4331.9554
Iteration 2:   log likelihood = -4331.8137
Iteration 3:   log likelihood = -4331.8113
Iteration 4:   log likelihood = -4331.8113
Refining estimates:
Iteration 0:   log likelihood = -4331.8113

Cox regression with Breslow method for ties

No. of subjects =     14,768                            Number of obs = 14,768
No. of failures =        453
Time at risk    = 414,653.25
                                                        LR chi2(3)    =   3.80
Log likelihood = -4331.8113                             Prob > chi2   = 0.2837

-------------------------------------------------------------------------------
           _t | Haz. ratio   Std. err.      z    P>|z|     [95% conf. interval]
--------------+----------------------------------------------------------------
         drug |
  sotrovimab  |   .3878381   .2748628    -1.34   0.181      .096694    1.555612
    paxlovid  |   1.231235   .5060499     0.51   0.613     .5501596    2.755455
molnupiravir  |   .5804533   .3362604    -0.94   0.348     .1864922    1.806649
-------------------------------------------------------------------------------

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. preserve

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. serset use

. 
end of do-file

. restore
nothing to restore
r(622);

. preserve

. restorwe
command restorwe is unrecognized
r(199);

. restore

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. use "$projectdir/output/data/main", clear

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. stset stop_died_date_ons, id(patient_id) origin(time start_date) enter(time start_date) failure(fail_died_date_ons==1)

Survival-time data settings

           ID variable: patient_id
         Failure event: fail_died_date_ons==1
Observed time interval: (stop_died_date_ons[_n-1], stop_died_date_ons]
     Enter on or after: time start_date
     Exit on or before: failure
     Time for analysis: (time-origin)
                Origin: time start_date

--------------------------------------------------------------------------
     24,655  total observations
      9,887  observations end on or before enter()
--------------------------------------------------------------------------
     14,768  observations remaining, representing
     14,768  subjects
        453  failures in single-failure-per-subject data
 414,653.25  total analysis time at risk and under observation
                                                At risk from t =         0
                                     Earliest observed entry t =         0
                                          Last observed exit t =        29

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. stcox i.drug

         Failure _d: fail_died_date_ons==1
   Analysis time _t: (stop_died_date_ons-origin)
             Origin: time start_date
  Enter on or after: time start_date
        ID variable: patient_id

Iteration 0:   log likelihood = -4333.7122
Iteration 1:   log likelihood = -4331.9554
Iteration 2:   log likelihood = -4331.8137
Iteration 3:   log likelihood = -4331.8113
Iteration 4:   log likelihood = -4331.8113
Refining estimates:
Iteration 0:   log likelihood = -4331.8113

Cox regression with Breslow method for ties

No. of subjects =     14,768                            Number of obs = 14,768
No. of failures =        453
Time at risk    = 414,653.25
                                                        LR chi2(3)    =   3.80
Log likelihood = -4331.8113                             Prob > chi2   = 0.2837

-------------------------------------------------------------------------------
           _t | Haz. ratio   Std. err.      z    P>|z|     [95% conf. interval]
--------------+----------------------------------------------------------------
         drug |
  sotrovimab  |   .3878381   .2748628    -1.34   0.181      .096694    1.555612
    paxlovid  |   1.231235   .5060499     0.51   0.613     .5501596    2.755455
molnupiravir  |   .5804533   .3362604    -0.94   0.348     .1864922    1.806649
-------------------------------------------------------------------------------

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. stcurve, survival at1(drug=0) at2(drug=1) at3(drug=2) at4(drug=3)

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. serset use

. 
end of do-file

. br

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. serset use

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. serset use

. 
end of do-file

. do "C:\Users\k1635179\AppData\Local\Temp\STDc5c_000000.tmp"

. serset use

. 
end of do-file

. exit, clear
