-------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /workspace/logs/cleaning_dataset_combine.log
  log type:  text
 opened on:  16 Aug 2023, 08:47:41

. 
. *Set Ado file path
. adopath + "$projectdir/analysis/ado"
  [1]  (BASE)      "/usr/local/stata/ado/base/"
  [2]  (SITE)      "/usr/local/ado/"
  [3]              "."
  [4]  (PERSONAL)  "~/ado/personal/"
  [5]  (PLUS)      "~/ado/plus/"
  [6]  (OLDPLACE)  "~/ado/"
  [7]              "/workspace/analysis/ado"

. 
. *       Import control dataset
. import delimited "$projectdir/output/input_control.csv", clear
(263 vars, 50,000 obs)

. gen control_dataset=1

. *       Convert control strings to dates     * 
. foreach var of varlist   pre_covid_hosp_date                                 
>    ///
>                                                  pre_covid_hosp_discharge    
>                            ///
>                                                  covid_test_positive_date    
>                            ///
>                                                  covid_test_positive_date2   
>                            ///
>                                                  covid_test_positive_date3   
>                            ///
>                                                  covid_test_positive_treat   
>                            ///
>                                                  prior_covid_date            
>                            ///
>                                                  sotrovimab                  
>                                            ///
>                                                  molnupiravir                
>                                    /// 
>                                                  paxlovid                    
>                                            ///
>                                                  remdesivir                  
>                                            ///
>                                                  casirivimab                 
>                                    ///
>                                                  sotrovimab_not_start        
>                            ///
>                                                  molnupiravir_not_start      
>                            ///
>                                                  paxlovid_not_start          
>                                    ///
>                                                  date_treated                
>                                    ///
>                                                  start_date                  
>                                            ///
>                                                  drugs_paxlovid_interaction  
>                            ///
>                                                  drugs_nirmatrelvir_interacti
> on                 ///
>                                                  last_vaccination_date       
>                            ///
>                                                  death_date                  
>                                            ///
>                                                  dereg_date                  
>                                    ///
>                                                  bmi_date_measured           
>                                    ///
>                                                  creatinine_ctv3_date        
>                            ///
>                                                  creatinine_snomed_date      
>                            ///
>                                                  creatinine_short_snomed_date
>                    ///
>                                                  ae_diverticulitis_icd       
>                            ///
>                                                  ae_diverticulitis_icd_prim  
>                            ///
>                                                  ae_diverticulitis_snomed    
>                            ///
>                                                  ae_diverticulitis_ae        
>                            ///                      
>                                                  ae_diarrhoea_snomed         
>                            ///
>                                                  ae_diarrhoea_icd            
>                                    ///
>                                                  ae_diarrhoea_icd_prim       
>                            ///
>                                                  ae_diarrhoeal_icd           
>                                    ///
>                                                  ae_diarrhoeal_icd_prim      
>                            ///              
>                                                  ae_taste_snomed             
>                                    ///
>                                                  ae_taste_icd                
>                                    ///
>                                                  ae_taste_icd_prim           
>                                    ///
>                                                  ae_rash_snomed              
>                                    ///
>                                                  ae_rash_ae                  
>                                            ///
>                                                  ae_rash_icd                 
>                                    ///
>                                                  ae_rash_icd_prim            
>                                    ///
>                                                  ae_anaphylaxis_icd          
>                                    ///
>                                              ae_anaphylaxis_icd_prim         
>                    ///
>                                              ae_anaphylaxis_snomed           
>                            ///
>                                                  ae_anaphlaxis_ae            
>                                    ///
>                                                  ae_severedrug_icd           
>                                    ///
>                                                  ae_severedrug_icd_prim      
>                            ///
>                                                  ae_severedrug_sjs_icd       
>                            ///
>                                                  ae_severedrug_sjs_icd_prim  
>                            ///
>                                                  ae_severedrug_snomed        
>                            ///
>                                                  ae_severedrug_ae            
>                                    ///
>                                                  ae_nonsevere_drug_snomed    
>                            ///
>                                                  ae_nonsevere_drug_ae        
>                            ///
>                                                  ae_rheumatoid_arthritis_icd 
>                    ///
>                                                  ae_rheumatoid_arthritis_icd_
> prim               ///
>                                                  ae_rheumatoid_arthritis_snom
> ed                 ///
>                                                  ae_rheumatoid_arthritis_ae  
>                            ///
>                                                  ae_sle_icd                  
>                                            ///
>                                                  ae_sle_icd_prim             
>                                    ///
>                                                  ae_sle_ae                   
>                                            ///
>                                                  ae_sle_ctv                  
>                                            ///
>                                                  ae_psoriasis_icd            
>                                    ///
>                                                  ae_psoriasis_icd_prim       
>                            ///
>                                                  ae_psoriasis_ae             
>                                    ///
>                                                  ae_psoriasis_snomed         
>                            ///
>                                                  ae_psa_icd                  
>                                            ///
>                                                  ae_psa_icd_prim             
>                                    ///
>                                                  ae_psa_snomed               
>                                    ///
>                                                  ae_psa_ae                   
>                                            ///
>                                                  ae_psa_snomed               
>                                    ///
>                                                  ae_axspa_icd                
>                                    ///
>                                                  ae_axspa_icd_prim           
>                                    ///
>                                                  ae_axspa_ctv                
>                                    ///
>                                                  ae_axspa_ae                 
>                                    ///
>                                                  ae_ibd_icd                  
>                                            ///
>                                                  ae_ibd_icd_prim             
>                                    ///
>                                                  ae_ibd_ctv                  
>                                            ///
>                                                  ae_ibd_ae                   
>                                            ///
>                                                  pre_diverticulitis_icd      
>                            ///
>                                                  pre_diverticulitis_icd_prim 
>                    ///
>                                                  pre_diverticulitis_snomed   
>                            ///
>                                                  pre_diverticulitis_ae       
>                            ///
>                                                  pre_diarrhoea_snomed        
>                            ///
>                                                  pre_diarrhoea_icd           
>                                    ///
>                                                  pre_diarrhoea_icd_prim      
>                            ///
>                                                  pre_diarrhoeal_icd          
>                                    ///
>                                                  pre_diarrhoeal_icd_prim     
>                            ///
>                                                  pre_taste_icd               
>                                    ///
>                                                  pre_taste_icd_prim          
>                                    ///
>                                                  pre_taste_snomed            
>                                    ///
>                                                  pre_rash_snomed             
>                                    ///
>                                                  pre_rash_ae                 
>                                    ///
>                                                  pre_rash_icd                
>                                    ///
>                                                  pre_rash_icd_prim           
>                                    ///
>                                                  pre_anaphylaxis_icd_prim    
>                            ///
>                                                  pre_anaphylaxis_icd         
>                            ///
>                                                  pre_anaphylaxis_snomed      
>                            ///                                              
>                                                  pre_anaphlaxis_ae           
>                                    ///
>                                                  pre_severedrug_icd          
>                                    ///
>                                                  pre_severedrug_icd_prim     
>                            ///
>                                                  pre_severedrug_sjs_icd      
>                            ///
>                                                  pre_severedrug_sjs_icd_prim 
>                    ///
>                                                  pre_severedrug_snomed       
>                            ///
>                                                  pre_severedrug_ae           
>                                    ///
>                                              pre_nonsevere_drug_snomed       
>                    ///
>                                                  pre_nonsevere_drug_ae       
>                            ///
>                                                  pre_rheumatoid_icd_prim     
>                            ///
>                                                  pre_sle_icd_prim            
>                                    ///
>                                                  pre_sle_ctv                 
>                                    ///
>                                                  pre_sle_icd                 
>                                    ///
>                                                  pre_sle_ae                  
>                                            ///
>                                                  pre_rheumatoid_arthritis_icd
>                    ///
>                                                  pre_rheumatoid_icd_prim     
>                            ///
>                                                  pre_rheumatoid_arthritis_ae 
>                    ///
>                                                  pre_rheumatoid_arthritis_sno
> med                ///
>                                                  pre_psoriasis_icd           
>                                    ///
>                                                  pre_psoriasis_icd_prim      
>                            ///
>                                                  pre_psoriasis_snomed        
>                            ///
>                                                  pre_psoriasis_ae            
>                                    /// 
>                                                  pre_psa_icd                 
>                                    /// 
>                                                  pre_psa_icd_prim            
>                                    /// 
>                                                  pre_psa_ae                  
>                                            ///
>                                                  pre_psa_snomed              
>                                    ///                                       
>        
>                                                  pre_axspa_icd               
>                                    ///     
>                                                  pre_axspa_icd_prim          
>                                    ///     
>                                                  pre_axspa_ctv               
>                                    ///
>                                                  pre_axspa_ae                
>                                    ///
>                                                  pre_ibd_ae                  
>                                            ///
>                                                  pre_ibd_ctv                 
>                                    ///
>                                                  pre_ibd_icd                 
>                                    ///
>                                                  pre_ibd_icd_prim            
>                                    ///
>                                                  allcause_emerg_aande        
>                            ///
>                                                  all_hosp_date               
>                                    ///
>                                                  all_hosp_date0              
>                                    ///
>                                                  all_hosp_date1              
>                                    ///
>                                                  all_hosp_date2              
>                                    ///
>                                                  hosp_discharge_date         
>                            ///
>                                                  hosp_discharge_date0        
>                            ///
>                                                  hosp_discharge_date1        
>                            ///
>                                                  hosp_discharge_date2        
>                            ///
>                                                  covid_hosp_date             
>                                    ///
>                                                  covid_hosp_date0            
>                                    ///
>                                                  covid_hosp_date1            
>                                    ///
>                                                  covid_hosp_date2            
>                                    ///                                       
>       
>                                                  covid_discharge_date        
>                            ///
>                                                  covid_discharge_date0       
>                            ///                                             
>                                                  covid_discharge_date1       
>                            /// 
>                                                  covid_discharge_date2       
>                            /// 
>                                                  any_covid_hosp_discharge    
>                            ///                     
>                                                  covid_hosp_date_mabs        
>                            /// 
>                                                  covid_hosp_date_mabs_not_pri
> mary               /// 
>                                                  died_date_ons               
>                                    ///
>                                                  died_ons_covid {            
>                             
  2.         capture confirm string variable `var'
  3.         if _rc==0 {
  4.         rename `var' a
  5.         gen `var' = date(a, "YMD")
  6.         drop a
  7.         format %td `var'
  8.  }
  9. }
(47,500 missing values generated)
(47,500 missing values generated)
(4,999 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(30,000 missing values generated)
(4,999 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(47,542 missing values generated)
(47,500 missing values generated)
(47,500 missing values generated)
(2,500 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(2,500 missing values generated)
(25,000 missing values generated)
(25,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(47,500 missing values generated)
(45,000 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(45,000 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(45,000 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(47,500 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(20,000 missing values generated)
(20,000 missing values generated)

. tab control_dataset

control_dat |
       aset |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |     50,000      100.00      100.00
------------+-----------------------------------
      Total |     50,000      100.00

. save "$projectdir/output/data/control.dta", replace 
file /workspace/output/data/control.dta saved

. //                                               //                          
>    ///
. 
. * import treatment dataset
. import delimited "$projectdir/output/input_treatment.csv", clear
(263 vars, 50,000 obs)

. gen treatment_dataset=1

. 
. *       Convert control strings to dates     * 
. foreach var of varlist   pre_covid_hosp_date                                 
>    ///
>                                                  pre_covid_hosp_discharge    
>                            ///
>                                                  covid_test_positive_date    
>                            ///
>                                                  covid_test_positive_date2   
>                            ///
>                                                  covid_test_positive_date3   
>                            ///
>                                                  covid_test_positive_treat   
>                            ///
>                                                  prior_covid_date            
>                            ///
>                                                  sotrovimab                  
>                                            ///
>                                                  molnupiravir                
>                                    /// 
>                                                  paxlovid                    
>                                            ///
>                                                  remdesivir                  
>                                            ///
>                                                  casirivimab                 
>                                    ///
>                                                  sotrovimab_not_start        
>                            ///
>                                                  molnupiravir_not_start      
>                            ///
>                                                  paxlovid_not_start          
>                                    ///
>                                                  date_treated                
>                                    ///
>                                                  start_date                  
>                                            ///
>                                                  drugs_paxlovid_interaction  
>                            ///
>                                                  drugs_nirmatrelvir_interacti
> on                 ///
>                                                  last_vaccination_date       
>                            ///
>                                                  death_date                  
>                                            ///
>                                                  dereg_date                  
>                                    ///
>                                                  bmi_date_measured           
>                                    ///
>                                                  creatinine_ctv3_date        
>                            ///
>                                                  creatinine_snomed_date      
>                            ///
>                                                  creatinine_short_snomed_date
>                    ///
>                                                  ae_diverticulitis_icd       
>                            ///
>                                                  ae_diverticulitis_icd_prim  
>                            ///
>                                                  ae_diverticulitis_snomed    
>                            ///
>                                                  ae_diverticulitis_ae        
>                            ///                      
>                                                  ae_diarrhoea_snomed         
>                            ///
>                                                  ae_diarrhoea_icd            
>                                    ///
>                                                  ae_diarrhoea_icd_prim       
>                            ///
>                                                  ae_diarrhoeal_icd           
>                                    ///
>                                                  ae_diarrhoeal_icd_prim      
>                            ///              
>                                                  ae_taste_snomed             
>                                    ///
>                                                  ae_taste_icd                
>                                    ///
>                                                  ae_taste_icd_prim           
>                                    ///
>                                                  ae_rash_snomed              
>                                    ///
>                                                  ae_rash_ae                  
>                                            ///
>                                                  ae_rash_icd                 
>                                    ///
>                                                  ae_rash_icd_prim            
>                                    ///
>                                                  ae_anaphylaxis_icd          
>                                    ///
>                                              ae_anaphylaxis_icd_prim         
>                    ///
>                                              ae_anaphylaxis_snomed           
>                            ///
>                                                  ae_anaphlaxis_ae            
>                                    ///
>                                                  ae_severedrug_icd           
>                                    ///
>                                                  ae_severedrug_icd_prim      
>                            ///
>                                                  ae_severedrug_sjs_icd       
>                            ///
>                                                  ae_severedrug_sjs_icd_prim  
>                            ///
>                                                  ae_severedrug_snomed        
>                            ///
>                                                  ae_severedrug_ae            
>                                    ///
>                                                  ae_nonsevere_drug_snomed    
>                            ///
>                                                  ae_nonsevere_drug_ae        
>                            ///
>                                                  ae_rheumatoid_arthritis_icd 
>                    ///
>                                                  ae_rheumatoid_arthritis_icd_
> prim               ///
>                                                  ae_rheumatoid_arthritis_snom
> ed                 ///
>                                                  ae_rheumatoid_arthritis_ae  
>                            ///
>                                                  ae_sle_icd                  
>                                            ///
>                                                  ae_sle_icd_prim             
>                                    ///
>                                                  ae_sle_ae                   
>                                            ///
>                                                  ae_sle_ctv                  
>                                            ///
>                                                  ae_psoriasis_icd            
>                                    ///
>                                                  ae_psoriasis_icd_prim       
>                            ///
>                                                  ae_psoriasis_ae             
>                                    ///
>                                                  ae_psoriasis_snomed         
>                            ///
>                                                  ae_psa_icd                  
>                                            ///
>                                                  ae_psa_icd_prim             
>                                    ///
>                                                  ae_psa_snomed               
>                                    ///
>                                                  ae_psa_ae                   
>                                            ///
>                                                  ae_psa_snomed               
>                                    ///
>                                                  ae_axspa_icd                
>                                    ///
>                                                  ae_axspa_icd_prim           
>                                    ///
>                                                  ae_axspa_ctv                
>                                    ///
>                                                  ae_axspa_ae                 
>                                    ///
>                                                  ae_ibd_icd                  
>                                            ///
>                                                  ae_ibd_icd_prim             
>                                    ///
>                                                  ae_ibd_ctv                  
>                                            ///
>                                                  ae_ibd_ae                   
>                                            ///
>                                                  pre_diverticulitis_icd      
>                            ///
>                                                  pre_diverticulitis_icd_prim 
>                    ///
>                                                  pre_diverticulitis_snomed   
>                            ///
>                                                  pre_diverticulitis_ae       
>                            ///
>                                                  pre_diarrhoea_snomed        
>                            ///
>                                                  pre_diarrhoea_icd           
>                                    ///
>                                                  pre_diarrhoea_icd_prim      
>                            ///
>                                                  pre_diarrhoeal_icd          
>                                    ///
>                                                  pre_diarrhoeal_icd_prim     
>                            ///
>                                                  pre_taste_icd               
>                                    ///
>                                                  pre_taste_icd_prim          
>                                    ///
>                                                  pre_taste_snomed            
>                                    ///
>                                                  pre_rash_snomed             
>                                    ///
>                                                  pre_rash_ae                 
>                                    ///
>                                                  pre_rash_icd                
>                                    ///
>                                                  pre_rash_icd_prim           
>                                    ///
>                                                  pre_anaphylaxis_icd_prim    
>                            ///
>                                                  pre_anaphylaxis_icd         
>                            ///
>                                                  pre_anaphylaxis_snomed      
>                            ///                                              
>                                                  pre_anaphlaxis_ae           
>                                    ///
>                                                  pre_severedrug_icd          
>                                    ///
>                                                  pre_severedrug_icd_prim     
>                            ///
>                                                  pre_severedrug_sjs_icd      
>                            ///
>                                                  pre_severedrug_sjs_icd_prim 
>                    ///
>                                                  pre_severedrug_snomed       
>                            ///
>                                                  pre_severedrug_ae           
>                                    ///
>                                              pre_nonsevere_drug_snomed       
>                    ///
>                                                  pre_nonsevere_drug_ae       
>                            ///
>                                                  pre_rheumatoid_icd_prim     
>                            ///
>                                                  pre_sle_icd_prim            
>                                    ///
>                                                  pre_sle_ctv                 
>                                    ///
>                                                  pre_sle_icd                 
>                                    ///
>                                                  pre_sle_ae                  
>                                            ///
>                                                  pre_rheumatoid_arthritis_icd
>                    ///
>                                                  pre_rheumatoid_icd_prim     
>                            ///
>                                                  pre_rheumatoid_arthritis_ae 
>                    ///
>                                                  pre_rheumatoid_arthritis_sno
> med                ///
>                                                  pre_psoriasis_icd           
>                                    ///
>                                                  pre_psoriasis_icd_prim      
>                            ///
>                                                  pre_psoriasis_snomed        
>                            ///
>                                                  pre_psoriasis_ae            
>                                    /// 
>                                                  pre_psa_icd                 
>                                    /// 
>                                                  pre_psa_icd_prim            
>                                    /// 
>                                                  pre_psa_ae                  
>                                            ///
>                                                  pre_psa_snomed              
>                                    ///                                       
>        
>                                                  pre_axspa_icd               
>                                    ///     
>                                                  pre_axspa_icd_prim          
>                                    ///     
>                                                  pre_axspa_ctv               
>                                    ///
>                                                  pre_axspa_ae                
>                                    ///
>                                                  pre_ibd_ae                  
>                                            ///
>                                                  pre_ibd_ctv                 
>                                    ///
>                                                  pre_ibd_icd                 
>                                    ///
>                                                  pre_ibd_icd_prim            
>                                    ///
>                                                  allcause_emerg_aande        
>                            ///
>                                                  all_hosp_date               
>                                    ///
>                                                  all_hosp_date0              
>                                    ///
>                                                  all_hosp_date1              
>                                    ///
>                                                  all_hosp_date2              
>                                    ///
>                                                  hosp_discharge_date         
>                            ///
>                                                  hosp_discharge_date0        
>                            ///
>                                                  hosp_discharge_date1        
>                            ///
>                                                  hosp_discharge_date2        
>                            ///
>                                                  covid_hosp_date             
>                                    ///
>                                                  covid_hosp_date0            
>                                    ///
>                                                  covid_hosp_date1            
>                                    ///
>                                                  covid_hosp_date2            
>                                    ///                                       
>       
>                                                  covid_discharge_date        
>                            ///
>                                                  covid_discharge_date0       
>                            ///                                             
>                                                  covid_discharge_date1       
>                            /// 
>                                                  covid_discharge_date2       
>                            /// 
>                                                  any_covid_hosp_discharge    
>                            ///                     
>                                                  covid_hosp_date_mabs        
>                            /// 
>                                                  covid_hosp_date_mabs_not_pri
> mary               /// 
>                                                  died_date_ons               
>                                    ///
>                                                  died_ons_covid {            
>                             
  2.         capture confirm string variable `var'
  3.         if _rc==0 {
  4.         rename `var' a
  5.         gen `var' = date(a, "YMD")
  6.         drop a
  7.         format %td `var'
  8.  }
  9. }
(47,500 missing values generated)
(47,500 missing values generated)
(4,999 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(30,000 missing values generated)
(4,999 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(47,548 missing values generated)
(48,516 missing values generated)
(47,500 missing values generated)
(47,500 missing values generated)
(2,500 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(2,500 missing values generated)
(25,000 missing values generated)
(25,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(47,500 missing values generated)
(45,000 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(45,000 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(45,000 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(47,500 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(20,000 missing values generated)
(20,000 missing values generated)

. tab treatment_dataset

treatment_d |
     ataset |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |     50,000      100.00      100.00
------------+-----------------------------------
      Total |     50,000      100.00

. *********************************
. *  Append control & treatment datasets     *
. ********************************* 
. append using "$projectdir/output/data/control.dta"

. duplicates tag patient_id, gen(duplicate_patient_id)

Duplicates in terms of patient_id

. bys patient_id (treatment_dataset duplicate_patient_id): gen n=_n

. tab n

          n |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |     94,856       94.86       94.86
          2 |      5,144        5.14      100.00
------------+-----------------------------------
      Total |    100,000      100.00

. drop if n>1  // drops duplicate patient id and in control group
(5,144 observations deleted)

. tab control_dataset,m

control_dat |
       aset |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |     44,856       47.29       47.29
          . |     50,000       52.71      100.00
------------+-----------------------------------
      Total |     94,856      100.00

. tab treatment_dataset,m

treatment_d |
     ataset |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |     50,000       52.71       52.71
          . |     44,856       47.29      100.00
------------+-----------------------------------
      Total |     94,856      100.00

. count if start_date==.
  48,516

. count if start_date!=date_treated & treatment_dataset==1
  982

. count if start_date!=covid_test_positive_date & control_dataset==1
  44,795

. gen dataset = 0 if control_dataset==1
(50,000 missing values generated)

. replace dataset= 1 if treatment_dataset==1
(50,000 real changes made)

. label define dataset 0 "control" 1 "drug" 

. label values dataset dataset

. 
. ****************************
. *       INCLUSION               *
. ****************************
. ** inclusion criteria*
. keep if age>=18 & age<110
(20,111 observations deleted)

. keep if sex=="F"|sex=="M"
(0 observations deleted)

. keep if has_died==0
(3,723 observations deleted)

. 
. ** exclusion criteria*
. count if start_date>dereg_date & start_date!=.
  3,437

. count if start_date>death_date & start_date!=.
  3,432

. drop if start_date>death_date | start_date>dereg_date
(13,380 observations deleted)

. 
. ** hospitalised and control cohort
. // control patient, discharged<5 days prior to covid test
. count if dataset==0 & (start_date-pre_covid_hosp_discharge<5) & (start_date-p
> re_covid_hosp_discharge>=0)
  1

. // control patient, hospitalised without discharged date
. count if dataset==0 & pre_covid_hosp_date!=. & pre_covid_hosp_discharge==. 
  1,298

. count if dataset==0 & pre_covid_hosp_date!=. & pre_covid_hosp_discharge==. & 
> (start_date-pre_covid_hosp_date<29)
  74

. count if dataset==0 & pre_covid_hosp_date!=. & pre_covid_hosp_discharge==. & 
> (start_date-pre_covid_hosp_date<366)
  169

. // control patient, hospitalised and discharge date preceed admission
. count if dataset==0 & pre_covid_hosp_date>pre_covid_hosp_discharge & pre_covi
> d_hosp_date!=. & pre_covid_hosp_discharge!=.
  25

. count if dataset==0 & pre_covid_hosp_date>pre_covid_hosp_discharge & pre_covi
> d_hosp_date!=. & pre_covid_hosp_discharge!=. & (start_date-pre_covid_hosp_dat
> e<29)
  7

. count if dataset==0 & pre_covid_hosp_date>pre_covid_hosp_discharge & pre_covi
> d_hosp_date!=. & pre_covid_hosp_discharge!=. & (start_date-pre_covid_hosp_dat
> e<366)
  12

. // control patient, hospitalised on same day at covid test
. count if dataset==0 & pre_covid_hosp_date==start_date
  0

. count if dataset==0 & pre_covid_hosp_date==covid_test_positive_date
  2,652

. // remove these hospitalised patients from control group
. drop if dataset==0 & (start_date-pre_covid_hosp_discharge<5) & (start_date-pr
> e_covid_hosp_discharge>=0)
(1 observation deleted)

. drop if dataset==0 & pre_covid_hosp_date!=. & pre_covid_hosp_discharge==. & (
> start_date-pre_covid_hosp_date<366)
(169 observations deleted)

. drop if dataset==0 & pre_covid_hosp_date>pre_covid_hosp_discharge & pre_covid
> _hosp_date!=. & pre_covid_hosp_discharge!=. & (start_date-pre_covid_hosp_date
> <366)
(12 observations deleted)

. drop if dataset==0 & pre_covid_hosp_date==start_date
(0 observations deleted)

. 
. ** high risk cohort from blueteq therapeutics datafor drug arms
. tab high_risk_cohort_therapeutics dataset,m //should be 0 in control group

high_risk_cohort_ther |        dataset
             apeutics |   control       drug |     Total
----------------------+----------------------+----------
       Downs syndrome |     2,652      3,028 |     5,680 
          HIV or AIDS |     1,367      1,566 |     2,933 
                 IMID |     2,751      2,970 |     5,721 
    IMID,solid cancer |     2,729      3,036 |     5,765 
                   NA |     1,326      1,513 |     2,839 
haematological dise.. |     1,385      1,469 |     2,854 
haematological mali.. |     1,340      1,521 |     2,861 
        liver disease |     1,323      1,490 |     2,813 
primary immune defi.. |     2,744      3,019 |     5,763 
sickle cell disease.. |     2,678      3,032 |     5,710 
         solid cancer |     2,699      3,115 |     5,814 
solid organ transpl.. |     2,748      3,024 |     5,772 
stem cell transplan.. |     1,412      1,523 |     2,935 
----------------------+----------------------+----------
                Total |    27,154     30,306 |    57,460 

. gen downs_syndrome_therap= 1 if strpos(high_risk_cohort_therapeutics, "Downs 
> syndrome")
(51,780 missing values generated)

. gen solid_cancer_therap=1 if strpos(high_risk_cohort_therapeutics, "solid can
> cer")
(45,881 missing values generated)

. gen haem_disease_therap=1 if strpos(high_risk_cohort_therapeutics, "haematolo
> gical malignancies")
(54,599 missing values generated)

. replace haem_disease_therap=1 if strpos(high_risk_cohort_therapeutics, "haema
> tologic malignancy")
(0 real changes made)

. replace haem_disease_therap=1 if strpos(high_risk_cohort_therapeutics, "sickl
> e cell disease")
(5,710 real changes made)

. replace haem_disease_therap=1 if strpos(high_risk_cohort_therapeutics, "haema
> tological diseases")
(2,854 real changes made)

. replace haem_disease_therap=1 if strpos(high_risk_cohort_therapeutics, "stem 
> cell transplant")
(2,935 real changes made)

. gen renal_disease_therap= 1 if strpos(high_risk_cohort_therapeutics, "renal d
> isease")
(51,688 missing values generated)

. gen liver_disease_therap= 1 if strpos(high_risk_cohort_therapeutics, "liver d
> isease")
(54,647 missing values generated)

. gen imid_on_drug_therap= 1 if strpos(high_risk_cohort_therapeutics, "IMID")
(45,974 missing values generated)

. gen immunosupression_therap= 1 if strpos(high_risk_cohort_therapeutics, "prim
> ary immune deficiencies")
(51,697 missing values generated)

. gen hiv_aids_therap= 1 if strpos(high_risk_cohort_therapeutics, "HIV or AIDS"
> )
(54,527 missing values generated)

. gen organ_transplant_therap= 1 if strpos(high_risk_cohort_therapeutics, "soli
> d organ recipients")
(57,460 missing values generated)

. replace organ_transplant_therap= 1 if strpos(high_risk_cohort_therapeutics, "
> solid organ transplant")
(5,772 real changes made)

. gen rare_neuro_therap= 1 if strpos(high_risk_cohort_therapeutics, "rare neuro
> logical conditions")
(51,750 missing values generated)

. count if high_risk_cohort_therapeutics!=""&high_risk_cohort_therapeutics!="ot
> her"& min(downs_syndrome_therap,solid_cancer_therap,haem_disease_therap,renal
> _disease_therap,liver_disease_therap,imid_on_drug_therap,immunosupression_the
> rap,hiv_aids_therap,organ_transplant_therap,rare_neuro_therap)==. //check if 
> all diseases have been captured
  2,839

. tab high_risk_cohort_therapeutics if high_risk_cohort_therapeutics!=""&high_r
> isk_cohort_therapeutics!="other"& min(downs_syndrome_therap,solid_cancer_ther
> ap,haem_disease_therap,renal_disease_therap,liver_disease_therap,imid_on_drug
> _therap,immunosupression_therap,hiv_aids_therap,organ_transplant_therap,rare_
> neuro_therap)==.

          high_risk_cohort_therapeutics |      Freq.     Percent        Cum.
----------------------------------------+-----------------------------------
                                     NA |      2,839      100.00      100.00
----------------------------------------+-----------------------------------
                                  Total |      2,839      100.00

. gen high_risk_cohort_ther= 1 if high_risk_cohort_therapeutics!=""&high_risk_c
> ohort_therapeutics!="other"

. foreach var of varlist downs_syndrome_therap solid_cancer_therap haem_disease
> _therap renal_disease_therap liver_disease_therap imid_on_drug_therap immunos
> upression_therap hiv_aids_therap organ_transplant_therap rare_neuro_therap{
  2.         replace `var'=0 if `var'==. 
  3. }
(51,780 real changes made)
(45,881 real changes made)
(43,100 real changes made)
(51,688 real changes made)
(54,647 real changes made)
(45,974 real changes made)
(51,697 real changes made)
(54,527 real changes made)
(51,688 real changes made)
(51,750 real changes made)

. 
. ** high risk cohort from open codelist from control group
. tab high_risk_cohort_nhsd,m 

high_risk_c |
 ohort_nhsd |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,230        2.14        2.14
          1 |     56,230       97.86      100.00
------------+-----------------------------------
      Total |     57,460      100.00

. count if downs_syndrome==1
  10,970

. count if solid_cancer==1
  5,755

. count if haem_disease==1
  27,183

. count if renal_disease==1
  19,713

. count if liver_disease==1
  10,860

. count if imid_on_drug==1
  28,733

. count if hiv_aids==1
  10,897

. count if organ_transplant==1
  17,917

. count if rare_neuro==1
  32,699

. count if imid_on_drug==1 & imid_nhsd==1 & imid_drug==0 //should be 0
  15,531

. count if imid_on_drug==1 & imid_nhsd==0 & imid_drug==1 //should be 0
  603

. count if imid_on_drug==1 & imid_nhsd==1 & imid_drug==1 & downs_syndrome==0 &s
> olid_cancer==0 &haem_disease==0 &renal_disease==0 &liver_disease==0 &immunosu
> pression==0 &hiv_aids==0 &organ_transplant==0 &rare_neuro==0
  32

. count if oral_steroid_drug_nhsd_6m_count<4 &oral_steroid_drugs_nhsd==1
  553

. count if oral_steroid_drug_nhsd_6m_count<4 &oral_steroid_drugs_nhsd==1 &immun
> osuppresant==0 &methotrexate==0 &ciclosporin==0 &mycophenolate==0 
  535

. count if oral_steroid_drug_nhsd_6m_count<4 &oral_steroid_drugs_nhsd==1 &immun
> osuppresant==0 &methotrexate==0 &ciclosporin==0 &mycophenolate==0 &imid_on_dr
> ug==1
  273

. count if oral_steroid_drug_nhsd_6m_count<4 &oral_steroid_drugs_nhsd==1 &immun
> osuppresant==0 &methotrexate==0 &ciclosporin==0 &mycophenolate==0 &imid_on_dr
> ug==1 &downs_syndrome==0 &solid_cancer==0 &haem_disease==0 &renal_disease==0 
> &liver_disease==0 &immunosupression==0 &hiv_aids==0 &organ_transplant==0 &rar
> e_neuro==0
  7

. count if oral_steroid_drug_nhsd_6m_count<4 &oral_steroid_drugs_nhsd==1 &immun
> osuppresant==0 &methotrexate==0 &ciclosporin==0 &mycophenolate==0 &imid_on_dr
> ug==1 &downs_syndrome==0 &solid_cancer==0 &haem_disease==0 &renal_disease==0 
> &liver_disease==0 &immunosupression==0 &hiv_aids==0 &organ_transplant==0 &rar
> e_neuro==0&dataset==0
  4

. replace imid_drug=0 if oral_steroid_drug_nhsd_6m_count<4 &oral_steroid_drugs_
> nhsd==1 &immunosuppresant==0 &methotrexate==0 &ciclosporin==0 &mycophenolate=
> =0 &imid_on_drug==1 //ignore if steriods<4 scripts in 6m & not coded other im
> id drug 
(273 real changes made)

. replace oral_steroid_drugs_nhsd=0 if oral_steroid_drug_nhsd_6m_count<4 &oral_
> steroid_drugs_nhsd==1 //ignore if steriods<4 scripts in 6m
(553 real changes made)

. count if imid_on_drug==1 & imid_nhsd==1 & imid_drug==0 
  15,688

. replace imid_on_drug=0 if imid_nhsd==1 & imid_drug==0 //ignore if steriods<4 
> & not coded other imid drug 
(15,688 real changes made)

. replace imid_on_drug=0 if imid_nhsd==0 & imid_drug==1 
(487 real changes made)

. gen high_risk_cohort_codelist=((downs_syndrome + solid_cancer + haem_disease 
> + renal_disease + liver_disease + imid_on_drug + immunosupression + hiv_aids 
> + organ_transplant + rare_neuro )>0)

. tab high_risk_cohort_codelist dataset,m 

high_risk_ |
cohort_cod |        dataset
     elist |   control       drug |     Total
-----------+----------------------+----------
         0 |       897      1,055 |     1,952 
         1 |    26,257     29,251 |    55,508 
-----------+----------------------+----------
     Total |    27,154     30,306 |    57,460 

. drop if high_risk_cohort_codelist==0 & dataset==0 //should be same number dro
> pped as change above 
(897 observations deleted)

. tab high_risk_cohort_codelist dataset

high_risk_ |
cohort_cod |        dataset
     elist |   control       drug |     Total
-----------+----------------------+----------
         0 |         0      1,055 |     1,055 
         1 |    26,257     29,251 |    55,508 
-----------+----------------------+----------
     Total |    26,257     30,306 |    56,563 

. bys dataset:count if high_risk_cohort_codelist==. & high_risk_cohort_ther==.

-------------------------------------------------------------------------------
-> dataset = control
  0
-------------------------------------------------------------------------------
-> dataset = drug
  0

. 
. ** combine two high risk cohorts into one 
. foreach var of varlist downs_syndrome solid_cancer haem_disease renal_disease
>  liver_disease imid_on_drug immunosupression hiv_aids organ_transplant rare_n
> euro {
  2.         gen `var'_comb = `var'
  3.         replace `var'_comb = 1 if `var'_therap==1 
  4.         tab `var' `var'_therap 
  5.         tab dataset `var'_comb 
  6. }
(4,487 real changes made)

downs_synd | downs_syndrome_therap
      rome |         0          1 |     Total
-----------+----------------------+----------
         0 |    41,106      4,487 |    45,593 
         1 |     9,861      1,109 |    10,970 
-----------+----------------------+----------
     Total |    50,967      5,596 |    56,563 

           |  downs_syndrome_comb
   dataset |         0          1 |     Total
-----------+----------------------+----------
   control |    19,020      7,237 |    26,257 
      drug |    22,086      8,220 |    30,306 
-----------+----------------------+----------
     Total |    41,106     15,457 |    56,563 
(10,255 real changes made)

solid_canc |  solid_cancer_therap
        er |         0          1 |     Total
-----------+----------------------+----------
         0 |    40,553     10,255 |    50,808 
         1 |     4,606      1,149 |     5,755 
-----------+----------------------+----------
     Total |    45,159     11,404 |    56,563 

           |   solid_cancer_comb
   dataset |         0          1 |     Total
-----------+----------------------+----------
   control |    18,875      7,382 |    26,257 
      drug |    21,678      8,628 |    30,306 
-----------+----------------------+----------
     Total |    40,553     16,010 |    56,563 
(7,279 real changes made)

haem_disea |  haem_disease_therap
        se |         0          1 |     Total
-----------+----------------------+----------
         0 |    22,101      7,279 |    29,380 
         1 |    20,338      6,845 |    27,183 
-----------+----------------------+----------
     Total |    42,439     14,124 |    56,563 

           |   haem_disease_comb
   dataset |         0          1 |     Total
-----------+----------------------+----------
   control |    10,118     16,139 |    26,257 
      drug |    11,983     18,323 |    30,306 
-----------+----------------------+----------
     Total |    22,101     34,462 |    56,563 
(3,693 real changes made)

renal_dise | renal_disease_therap
       ase |         0          1 |     Total
-----------+----------------------+----------
         0 |    33,157      3,693 |    36,850 
         1 |    17,734      1,979 |    19,713 
-----------+----------------------+----------
     Total |    50,891      5,672 |    56,563 

           |  renal_disease_comb
   dataset |         0          1 |     Total
-----------+----------------------+----------
   control |    15,191     11,066 |    26,257 
      drug |    17,966     12,340 |    30,306 
-----------+----------------------+----------
     Total |    33,157     23,406 |    56,563 
(2,216 real changes made)

liver_dise | liver_disease_therap
       ase |         0          1 |     Total
-----------+----------------------+----------
         0 |    43,487      2,216 |    45,703 
         1 |    10,307        553 |    10,860 
-----------+----------------------+----------
     Total |    53,794      2,769 |    56,563 

           |  liver_disease_comb
   dataset |         0          1 |     Total
-----------+----------------------+----------
   control |    20,145      6,112 |    26,257 
      drug |    23,342      6,964 |    30,306 
-----------+----------------------+----------
     Total |    43,487     13,076 |    56,563 
(8,827 real changes made)

imid_on_dr |  imid_on_drug_therap
        ug |         0          1 |     Total
-----------+----------------------+----------
         0 |    35,178      8,827 |    44,005 
         1 |    10,072      2,486 |    12,558 
-----------+----------------------+----------
     Total |    45,250     11,313 |    56,563 

           |   imid_on_drug_comb
   dataset |         0          1 |     Total
-----------+----------------------+----------
   control |    16,273      9,984 |    26,257 
      drug |    18,905     11,401 |    30,306 
-----------+----------------------+----------
     Total |    35,178     21,385 |    56,563 
(5,115 real changes made)

           | immunosupression_ther
immunosupr |          ap
    ession |         0          1 |     Total
-----------+----------------------+----------
         0 |    45,717      5,115 |    50,832 
         1 |     5,176        555 |     5,731 
-----------+----------------------+----------
     Total |    50,893      5,670 |    56,563 

           | immunosupression_comb
   dataset |         0          1 |     Total
-----------+----------------------+----------
   control |    21,148      5,109 |    26,257 
      drug |    24,569      5,737 |    30,306 
-----------+----------------------+----------
     Total |    45,717     10,846 |    56,563 
(2,299 real changes made)

           |    hiv_aids_therap
  hiv_aids |         0          1 |     Total
-----------+----------------------+----------
         0 |    43,367      2,299 |    45,666 
         1 |    10,304        593 |    10,897 
-----------+----------------------+----------
     Total |    53,671      2,892 |    56,563 

           |     hiv_aids_comb
   dataset |         0          1 |     Total
-----------+----------------------+----------
   control |    20,062      6,195 |    26,257 
      drug |    23,305      7,001 |    30,306 
-----------+----------------------+----------
     Total |    43,367     13,196 |    56,563 
(3,885 real changes made)

           | organ_transplant_ther
organ_tran |          ap
    splant |         0          1 |     Total
-----------+----------------------+----------
         0 |    34,761      3,885 |    38,646 
         1 |    16,130      1,787 |    17,917 
-----------+----------------------+----------
     Total |    50,891      5,672 |    56,563 

           | organ_transplant_comb
   dataset |         0          1 |     Total
-----------+----------------------+----------
   control |    16,031     10,226 |    26,257 
      drug |    18,730     11,576 |    30,306 
-----------+----------------------+----------
     Total |    34,761     21,802 |    56,563 
(2,356 real changes made)

           |   rare_neuro_therap
rare_neuro |         0          1 |     Total
-----------+----------------------+----------
         0 |    21,508      2,356 |    23,864 
         1 |    29,460      3,239 |    32,699 
-----------+----------------------+----------
     Total |    50,968      5,595 |    56,563 

           |    rare_neuro_comb
   dataset |         0          1 |     Total
-----------+----------------------+----------
   control |     9,747     16,510 |    26,257 
      drug |    11,761     18,545 |    30,306 
-----------+----------------------+----------
     Total |    21,508     35,055 |    56,563 

. 
. ****************************
. *       EXPOSURE                *
. ****************************
. ** removing individuals who did not start therapy
. foreach var of varlist sotrovimab molnupiravir paxlovid {
  2.     display "`var'"
  3.         count if `var'!=.
  4.         count if `var'==date_treated & `var'!=. & date_treated!=.
  5.         count if `var'==date_treated & `var'!=. & date_treated!=. & `var'_
> not_start!=.
  6.         gen `var'_start = 1 if `var'==date_treated & `var'!=. & date_treat
> ed!=. & `var'_not_start==.
  7.         replace `var'_start = 0 if `var'==date_treated & `var'!=. & date_t
> reated!=. & `var'_not_start!=.
  8.         tab `var'_start, m  //number on treatment, first drug given, and d
> rug was started
  9. }
sotrovimab
  570
  564
  5
(56,004 missing values generated)
(5 real changes made)

sotrovimab_ |
      start |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |          5        0.01        0.01
          1 |        559        0.99        1.00
          . |     55,999       99.00      100.00
------------+-----------------------------------
      Total |     56,563      100.00
molnupiravir
  539
  520
  4
(56,047 missing values generated)
(4 real changes made)

molnupiravi |
    r_start |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |          4        0.01        0.01
          1 |        516        0.91        0.92
          . |     56,043       99.08      100.00
------------+-----------------------------------
      Total |     56,563      100.00
paxlovid
  549
  538
  4
(56,029 missing values generated)
(4 real changes made)

paxlovid_st |
        art |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |          4        0.01        0.01
          1 |        534        0.94        0.95
          . |     56,025       99.05      100.00
------------+-----------------------------------
      Total |     56,563      100.00

. gen two_drugs= 1 if sotrovimab_start==1 & paxlovid_start==1
(56,563 missing values generated)

. replace two_drugs=2 if sotrovimab_start==1 & molnupiravir_start==1
(0 real changes made)

. replace two_drugs=3 if paxlovid_start==1 & molnupiravir_start==1
(0 real changes made)

. replace two_drugs=4 if sotrovimab_start==1 & paxlovid_start==1 & molnupiravir
> _start==1
(0 real changes made)

. tab two_drug
no observations

. gen drug=7 if remdesivir==date_treated&remdesivir!=.&date_treated!=.
(56,012 missing values generated)

. replace drug=8 if casirivimab==date_treated&casirivimab!=.&date_treated!=.
(544 real changes made)

. tab drug,m 

       drug |      Freq.     Percent        Cum.
------------+-----------------------------------
          7 |        551        0.97        0.97
          8 |        544        0.96        1.94
          . |     55,468       98.06      100.00
------------+-----------------------------------
      Total |     56,563      100.00

. replace drug=1 if sotrovimab_start==1 
(559 real changes made)

. replace drug=2 if paxlovid_start==1
(534 real changes made)

. replace drug=3 if molnupiravir_start==1
(516 real changes made)

. tab drug,m 

       drug |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        559        0.99        0.99
          2 |        534        0.94        1.93
          3 |        516        0.91        2.84
          7 |        551        0.97        3.82
          8 |        544        0.96        4.78
          . |     53,859       95.22      100.00
------------+-----------------------------------
      Total |     56,563      100.00

. replace drug=9 if two_drugs!=.
(0 real changes made)

. tab drug,m 

       drug |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |        559        0.99        0.99
          2 |        534        0.94        1.93
          3 |        516        0.91        2.84
          7 |        551        0.97        3.82
          8 |        544        0.96        4.78
          . |     53,859       95.22      100.00
------------+-----------------------------------
      Total |     56,563      100.00

. replace drug=0 if drug==.
(53,859 real changes made)

. label define drug 0 "control" 1 "sotrovimab" 2 "paxlovid" 3"molnupiravir", re
> place

. label values drug drug

. tab drug, m

        drug |      Freq.     Percent        Cum.
-------------+-----------------------------------
     control |     53,859       95.22       95.22
  sotrovimab |        559        0.99       96.21
    paxlovid |        534        0.94       97.15
molnupiravir |        516        0.91       98.06
           7 |        551        0.97       99.04
           8 |        544        0.96      100.00
-------------+-----------------------------------
       Total |     56,563      100.00

. bys dataset: tab drug,m

-------------------------------------------------------------------------------
-> dataset = control

        drug |      Freq.     Percent        Cum.
-------------+-----------------------------------
     control |     25,028       95.32       95.32
  sotrovimab |        251        0.96       96.28
    paxlovid |        241        0.92       97.19
molnupiravir |        242        0.92       98.11
           7 |        253        0.96       99.08
           8 |        242        0.92      100.00
-------------+-----------------------------------
       Total |     26,257      100.00

-------------------------------------------------------------------------------
-> dataset = drug

        drug |      Freq.     Percent        Cum.
-------------+-----------------------------------
     control |     28,831       95.13       95.13
  sotrovimab |        308        1.02       96.15
    paxlovid |        293        0.97       97.12
molnupiravir |        274        0.90       98.02
           7 |        298        0.98       99.00
           8 |        302        1.00      100.00
-------------+-----------------------------------
       Total |     30,306      100.00


. drop if drug>3
(1,095 observations deleted)

. drop if drug>0 & dataset==0
(734 observations deleted)

. 
. ** start date is date treatment for treatment arms and date of covid test for
>  control arm 
. count if start_date==. //should be 0
  28,823

. count if start_date!=covid_test_positive_date & drug==0  //should be 0
  50,911

. count if start_date!=date_treated & drug>0 //should be 0
  0

. 
. ** check number of positive covid tests prior to drug in treatment arms
. bys drug:count if covid_test_positive_date==. // should be 0 in control arm

-------------------------------------------------------------------------------
-> drug = control
  5,455
-------------------------------------------------------------------------------
-> drug = sotrovimab
  35
-------------------------------------------------------------------------------
-> drug = paxlovid
  22
-------------------------------------------------------------------------------
-> drug = molnupiravir
  23

. bys drug:count if covid_test_positive_date!=. 

-------------------------------------------------------------------------------
-> drug = control
  48,404
-------------------------------------------------------------------------------
-> drug = sotrovimab
  273
-------------------------------------------------------------------------------
-> drug = paxlovid
  271
-------------------------------------------------------------------------------
-> drug = molnupiravir
  251

. bys drug:count if covid_test_positive_date!=.&date_treated!=.& date_treated>c
> ovid_test_positive_date //test prior to treatment

-------------------------------------------------------------------------------
-> drug = control
  6
-------------------------------------------------------------------------------
-> drug = sotrovimab
  148
-------------------------------------------------------------------------------
-> drug = paxlovid
  142
-------------------------------------------------------------------------------
-> drug = molnupiravir
  132

. bys drug:count if covid_test_positive_date!=.&date_treated!=.& (date_treated-
> covid_test_positive_date>0)&(date_treated-covid_test_positive_date<=5) //test
>  <5d

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  3
-------------------------------------------------------------------------------
-> drug = paxlovid
  5
-------------------------------------------------------------------------------
-> drug = molnupiravir
  1

. bys drug:count if covid_test_positive_date2!=.&date_treated!=.& date_treated>
> covid_test_positive_date2 //2nd covid episode prior to treatment 

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  21
-------------------------------------------------------------------------------
-> drug = paxlovid
  8
-------------------------------------------------------------------------------
-> drug = molnupiravir
  16

. bys drug:count if covid_test_positive_date2!=.&date_treated!=.& (date_treated
> -covid_test_positive_date2>0)&(date_treated-covid_test_positive_date2<=5) //t
> est <5d

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. bys drug:count if covid_test_positive_date3!=.&date_treated!=.& date_treated>
> covid_test_positive_date3 //3rd covid episode prior to treatment 

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  9
-------------------------------------------------------------------------------
-> drug = paxlovid
  17
-------------------------------------------------------------------------------
-> drug = molnupiravir
  21

. bys drug:count if covid_test_positive_date3!=.&date_treated!=.& (date_treated
> -covid_test_positive_date3>0)&(date_treated-covid_test_positive_date3<=5) //t
> est <5d

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  1
-------------------------------------------------------------------------------
-> drug = paxlovid
  1
-------------------------------------------------------------------------------
-> drug = molnupiravir
  1

. ** check in control group that covid positive, and not repeat covid test afte
> r an infection within 30 days prior
. tab covid_test_positive covid_positive_previous_30_days if drug==0

           | covid_positive_previo
covid_test |      us_30_days
 _positive |         0          1 |     Total
-----------+----------------------+----------
         0 |     5,141        268 |     5,409 
         1 |    46,028      2,422 |    48,450 
-----------+----------------------+----------
     Total |    51,169      2,690 |    53,859 

. drop if drug==0 & covid_test_positive==1 & covid_positive_previous_30_days==1
(2,422 observations deleted)

. ** gen study start and study end date
. gen campaign_start=mdy(12,16,2021)

. gen study_end_date=mdy(09,01,2023)

. gen start_date_29=start_date + 29
(27,524 missing values generated)

. format campaign_start study_end_date start_date_29 %td

. 
. ****************************
. *       OUTCOME         *
. ****************************
. *** AESI, IMAE and some Drug reaction (need to add further IMAE and DRESS, SJ
> S, TEN) 
. gen new_ae_ra_icd = ae_rheumatoid_arthritis_icd if rheumatoid_arthritis_nhsd_
> snomed==0 
(33,421 missing values generated)

. gen new_ae_ra_icd_prim = ae_rheumatoid_arthritis_icd_prim if rheumatoid_arthr
> itis_nhsd_snomed==0 
(33,480 missing values generated)

. gen new_ae_ra_snomed = ae_rheumatoid_arthritis_snomed if rheumatoid_arthritis
> _nhsd_snomed==0 
(33,430 missing values generated)

. gen new_ae_ra_ae = ae_rheumatoid_arthritis_ae if rheumatoid_arthritis_nhsd_sn
> omed==0
(33,721 missing values generated)

. count if rheumatoid_arthritis_nhsd_snomed!=0 
  5,198

. count if ae_rheumatoid_arthritis_icd!=. 
  20,930

. count if new_ae_ra_icd!=.
  18,891

. count if ae_rheumatoid_arthritis_icd_prim!=. 
  20,958

. count if new_ae_ra_icd_prim!=.
  18,832

. count if ae_rheumatoid_arthritis_snomed!=. 
  20,924

. count if new_ae_ra_snomed!=.
  18,882

. count if ae_rheumatoid_arthritis_ae!=. 
  20,673

. count if new_ae_ra_ae!=.
  18,591

. gen new_ae_sle_icd = ae_sle_icd if sle_nhsd_ctv==0 
(33,511 missing values generated)

. gen new_ae_sle_icd_prim = ae_sle_icd_prim if sle_nhsd_ctv==0 
(33,556 missing values generated)

. gen new_ae_sle_ctv = ae_sle_ctv if sle_nhsd_ctv==0 
(33,464 missing values generated)

. gen new_ae_sle_ae = ae_sle_ae if sle_nhsd_ctv==0 
(33,483 missing values generated)

. count if sle_nhsd_ctv!=0 
  5,300

. count if ae_sle_icd!=. 
  20,903

. count if new_ae_sle_icd!=.
  18,801

. count if ae_sle_icd_prim!=. 
  20,953

. count if new_ae_sle_icd_prim!=.
  18,756

. count if ae_sle_ctv!=. 
  20,941

. count if new_ae_sle_ctv!=.
  18,848

. count if ae_sle_ae!=. 
  20,902

. count if new_ae_sle_ae!=.
  18,829

. gen new_ae_psoriasis_icd = ae_psoriasis_icd if psoriasis_nhsd==0 
(33,438 missing values generated)

. gen new_ae_psoriasis_icd_prim = ae_psoriasis_icd_prim if psoriasis_nhsd==0 
(33,371 missing values generated)

. gen new_ae_psoriasis_snomed = ae_psoriasis_snomed if psoriasis_nhsd==0
(33,540 missing values generated)

. gen new_ae_psoriasis_ae = ae_psoriasis_ae if psoriasis_nhsd==0
(33,614 missing values generated)

. count if psoriasis_nhsd!=0 
  5,176

. count if ae_psoriasis_icd!=. 
  20,883

. count if new_ae_psoriasis_icd!=. 
  18,874

. count if ae_psoriasis_icd_prim!=. 
  21,044

. count if new_ae_psoriasis_icd_prim!=. 
  18,941

. count if ae_psoriasis_snomed!=. 
  20,864

. count if new_ae_psoriasis_snomed!=.
  18,772

. count if ae_psoriasis_ae!=. 
  20,775

. count if new_ae_psoriasis_ae!=.
  18,698

. gen new_ae_psa_icd = ae_psa_icd if psoriatic_arthritis_nhsd==0
(33,552 missing values generated)

. gen new_ae_psa_icd_prim = ae_psa_icd_prim if psoriatic_arthritis_nhsd==0
(33,395 missing values generated)

. gen new_ae_psa_snomed = ae_psa_snomed if psoriatic_arthritis_nhsd==0
(33,469 missing values generated)

. gen new_ae_psa_ae = ae_psa_ae if psoriatic_arthritis_nhsd==0
(33,565 missing values generated)

. count if psoriatic_arthritis_nhsd!=0 
  5,233

. count if ae_psa_icd!=. 
  20,872

. count if new_ae_psa_icd!=. 
  18,760

. count if ae_psa_icd_prim!=. 
  20,990

. count if new_ae_psa_icd_prim!=. 
  18,917

. count if ae_psa_snomed!=. 
  20,851

. count if new_ae_psa_snomed!=.
  18,843

. count if ae_psa_ae!=. 
  20,859

. count if new_ae_psa_ae!=.
  18,747

. gen new_ae_axspa_icd = ae_axspa_icd if ankylosing_spondylitis_nhsd==0
(33,551 missing values generated)

. gen new_ae_axspa_icd_prim = ae_axspa_icd_prim if ankylosing_spondylitis_nhsd=
> =0
(33,432 missing values generated)

. gen new_ae_axspa_ctv = ae_axspa_ctv if ankylosing_spondylitis_nhsd==0
(33,416 missing values generated)

. gen new_ae_axspa_ae = ae_axspa_ae if ankylosing_spondylitis_nhsd==0
(33,387 missing values generated)

. count if ankylosing_spondylitis_nhsd!=0 
  5,172

. count if ae_axspa_icd!=. 
  20,830

. count if new_ae_axspa_icd!=.
  18,761

. count if ae_axspa_icd_prim!=. 
  20,947

. count if new_ae_axspa_icd_prim!=.
  18,880

. count if ae_axspa_ctv!=. 
  20,935

. count if new_ae_axspa_ctv!=.
  18,896

. count if ae_axspa_ae!=. 
  20,962

. count if new_ae_axspa_ae!=.
  18,925

. gen new_ae_ibd_icd = ae_ibd_icd if ibd_ctv==0
(33,421 missing values generated)

. gen new_ae_ibd_icd_prim = ae_ibd_icd_prim if ibd_ctv==0
(33,473 missing values generated)

. gen new_ae_ibd_ctv = ae_ibd_ctv if ibd_ctv==0
(33,544 missing values generated)

. gen new_ae_ibd_ae = ae_ibd_ae if ibd_ctv==0
(33,430 missing values generated)

. count if ibd_ctv!=0 
  5,228

. count if ae_ibd_icd!=. 
  20,901

. count if new_ae_ibd_icd!=.
  18,891

. count if ae_ibd_icd_prim!=. 
  20,963

. count if new_ae_ibd_icd_prim!=.
  18,839

. count if ae_ibd_ctv!=. 
  20,890

. count if new_ae_ibd_ctv!=.
  18,768

. count if ae_ibd_ae!=. 
  20,935

. count if new_ae_ibd_ae!=.
  18,882

.         
. *** comparison of ICD admission primary diagnosis and all diagnoses
. count if ae_diverticulitis_icd!=.
  21,076

. count if ae_diverticulitis_icd_prim!=.
  20,924

. count if ae_taste_icd!=.
  20,921

. count if ae_taste_icd_prim!=.
  20,906

. count if ae_rash_icd!=.
  20,966

. count if ae_rash_icd_prim!=.
  20,884

. count if ae_diarrhoea_icd!=.                                    
  20,894

. count if ae_diarrhoea_icd_prim!=.                                       
  20,907

. count if ae_diarrhoeal_icd!=.                                   
  20,854

. count if ae_diarrhoeal_icd_prim!=.      
  20,931

. count if ae_anaphylaxis_icd!=.
  20,915

. count if ae_anaphylaxis_icd_prim!=.
  20,958

. count if ae_severedrug_icd!=.
  20,921

. count if ae_severedrug_icd_prim!=.
  20,860

. count if ae_severedrug_sjs_icd!=.
  21,080

. count if ae_severedrug_sjs_icd_prim!=.
  20,881

. 
. *** combined ae from GP, hosp and A&E
. egen ae_diverticulitis = rmin(ae_diverticulitis_snomed ae_diverticulitis_icd_
> prim ae_diverticulitis_ae)
(11349 missing values generated)

. egen ae_diarrhoea = rmin(ae_diarrhoea_snomed ae_diarrhoea_icd_prim ae_diarrho
> eal_icd_prim)
(11243 missing values generated)

. egen ae_taste = rmin(ae_taste_snomed ae_taste_icd_prim)
(18850 missing values generated)

. egen ae_rash = rmin(ae_rash_snomed ae_rash_icd_prim ae_rash_ae)
(11149 missing values generated)

. egen ae_anaphylaxis = rmin(ae_anaphylaxis_snomed ae_anaphlaxis_ae ae_anaphyla
> xis_icd_prim)
(11282 missing values generated)

. egen ae_severe_drug = rmin(ae_severedrug_icd_prim ae_severedrug_sjs_icd_prim 
> ae_severedrug_snomed ae_severedrug_ae)
(6825 missing values generated)

. egen ae_nonsevere_drug = rmin(ae_nonsevere_drug_snomed ae_nonsevere_drug_ae)
(18800 missing values generated)

. egen ae_ra = rmin(new_ae_ra_snomed new_ae_ra_icd_prim new_ae_ra_ae)
(15599 missing values generated)

. egen ae_sle = rmin(new_ae_sle_ctv new_ae_sle_icd_prim new_ae_sle_ae)
(15588 missing values generated)

. egen ae_psorasis = rmin(new_ae_psoriasis_icd_prim new_ae_psoriasis_snomed new
> _ae_psoriasis_ae)
(15529 missing values generated)

. egen ae_psa = rmin(new_ae_psa_icd_prim new_ae_psa_snomed new_ae_psa_ae)
(15449 missing values generated)

. egen ae_axspa = rmin(new_ae_axspa_icd_prim new_ae_axspa_ctv new_ae_axspa_ae)
(15321 missing values generated)

. egen ae_ibd = rmin(new_ae_ibd_icd_prim new_ae_ibd_ctv new_ae_ibd_ae)
(15356 missing values generated)

. 
. *** global all ae
. global ae_spc_gp                ae_diverticulitis_snomed                ///
>                                                 ae_diarrhoea_snomed          
>                    ///
>                                                 ae_taste_snomed              
>                    ///             
>                                                 ae_rash_snomed               
>                            

. global ae_spc_icd               ae_diverticulitis_icd_prim              ///
>                                                 ae_taste_icd_prim            
>                    ///
>                                                 ae_rash_icd_prim             
>                    ///
>                                                 ae_diarrhoea_icd_prim        
>            ///
>                                                 ae_diarrhoeal_icd_prim

. global ae_spc_emerg             ae_diverticulitis_ae                    ///
>                                                 ae_rash_ae                   
>                                            

. global ae_drug_gp               ae_anaphylaxis_snomed                   ///  
>    
>                                                 ae_severedrug_snomed         
>            ///
>                                                 ae_nonsevere_drug_snomed     
>                            

. global ae_drug_icd              ae_anaphylaxis_icd_prim                 ///
>                                                 ae_severedrug_icd_prim       
>            ///     
>                                                 ae_severedrug_sjs_icd_prim   
>            

. global ae_drug_emerg    ae_anaphlaxis_ae                                ///
>                                                 ae_severedrug_ae             
>                    ///
>                                                 ae_nonsevere_drug_ae         
>                            

. global ae_imae_gp               new_ae_ra_snomed                             
>    ///
>                                                 new_ae_sle_ctv               
>                    ///
>                                                 new_ae_psoriasis_snomed      
>            ///
>                                                 new_ae_psa_snomed            
>                    ///
>                                                 new_ae_axspa_ctv             
>                    ///
>                                                 new_ae_ibd_ctv  

. global ae_imae_icd              new_ae_ra_icd_prim                           
>    ///
>                                                 new_ae_sle_icd_prim          
>                    ///
>                                                 new_ae_psoriasis_icd_prim    
>            ///
>                                                 new_ae_psa_icd_prim          
>                    ///
>                                                 new_ae_axspa_icd_prim        
>            ///
>                                                 new_ae_ibd_icd_prim

. global ae_imae_emerg    new_ae_ra_ae                                    ///
>                                                 new_ae_sle_ae                
>                    ///
>                                                 new_ae_psoriasis_ae          
>                    ///
>                                                 new_ae_psa_ae                
>                    ///
>                                                 new_ae_axspa_ae              
>                    ///
>                                                 new_ae_ibd_ae   

. global ae_disease               ae_diverticulitis                            
>    ///
>                                                 ae_diarrhoea                 
>                    ///
>                                                 ae_taste                     
>                            ///
>                                                 ae_rash                      
>                            ///
>                                                 ae_anaphylaxis               
>                    ///
>                                                 ae_severe_drug               
>                    ///
>                                                 ae_nonsevere_drug            
>                    ///
>                                                 ae_ra                        
>                            ///
>                                                 ae_sle                       
>                            ///
>                                                 ae_psorasis                  
>                    ///
>                                                 ae_psa                       
>                            ///
>                                                 ae_axspa                     
>                            ///
>                                                 ae_ibd                       
>            

.                                                                         
. *remove event if occurred before start
. foreach x in $ae_spc_gp $ae_spc_icd $ae_spc_emerg $ae_drug_gp $ae_drug_icd $a
> e_drug_emerg $ae_imae_gp $ae_imae_icd $ae_imae_emerg $ae_disease{
  2.                                 display "`x'"
  3.                                 count if (`x' > start_date | `x' < start_d
> ate + 28) & `x'!=. 
  4.                                 count if (`x' < start_date | `x' > start_d
> ate + 28) & `x'!=. & drug==0
  5.                                 count if (`x' < start_date | `x' > start_d
> ate + 28) & `x'!=. & drug>0
  6. }
ae_diverticulitis_snomed
  20,868
  20,071
  330
ae_diarrhoea_snomed
  20,912
  20,129
  327
ae_taste_snomed
  20,975
  20,224
  341
ae_rash_snomed
  20,961
  20,181
  322
ae_diverticulitis_icd_prim
  20,924
  20,101
  335
ae_taste_icd_prim
  20,906
  20,124
  311
ae_rash_icd_prim
  20,884
  20,081
  337
ae_diarrhoea_icd_prim
  20,907
  20,118
  335
ae_diarrhoeal_icd_prim
  20,931
  20,093
  340
ae_diverticulitis_ae
  20,979
  20,202
  319
ae_rash_ae
  20,931
  20,140
  332
ae_anaphylaxis_snomed
  20,828
  20,100
  317
ae_severedrug_snomed
  20,990
  20,189
  330
ae_nonsevere_drug_snomed
  20,976
  20,166
  340
ae_anaphylaxis_icd_prim
  20,958
  20,192
  329
ae_severedrug_icd_prim
  20,860
  20,026
  346
ae_severedrug_sjs_icd_prim
  20,881
  20,115
  320
ae_anaphlaxis_ae
  20,911
  20,128
  320
ae_severedrug_ae
  21,010
  20,227
  326
ae_nonsevere_drug_ae
  20,848
  20,025
  344
new_ae_ra_snomed
  18,882
  18,222
  280
new_ae_sle_ctv
  18,848
  18,116
  310
new_ae_psoriasis_snomed
  18,772
  18,107
  273
new_ae_psa_snomed
  18,843
  18,125
  294
new_ae_axspa_ctv
  18,896
  18,219
  294
new_ae_ibd_ctv
  18,768
  18,053
  308
new_ae_ra_icd_prim
  18,832
  18,117
  287
new_ae_sle_icd_prim
  18,756
  18,020
  296
new_ae_psoriasis_icd_prim
  18,941
  18,212
  302
new_ae_psa_icd_prim
  18,917
  18,211
  318
new_ae_axspa_icd_prim
  18,880
  18,165
  301
new_ae_ibd_icd_prim
  18,839
  18,109
  301
new_ae_ra_ae
  18,591
  17,880
  295
new_ae_sle_ae
  18,829
  18,097
  322
new_ae_psoriasis_ae
  18,698
  17,978
  302
new_ae_psa_ae
  18,747
  18,027
  297
new_ae_axspa_ae
  18,925
  18,190
  311
new_ae_ibd_ae
  18,882
  18,181
  290
ae_diverticulitis
  40,963
  39,372
  661
ae_diarrhoea
  41,069
  39,494
  651
ae_taste
  33,462
  32,212
  536
ae_rash
  41,163
  39,588
  659
ae_anaphylaxis
  41,030
  39,557
  637
ae_severe_drug
  45,487
  43,743
  729
ae_nonsevere_drug
  33,512
  32,231
  538
ae_ra
  36,713
  35,356
  558
ae_sle
  36,724
  35,321
  599
ae_psorasis
  36,783
  35,408
  590
ae_psa
  36,863
  35,479
  599
ae_axspa
  36,991
  35,641
  572
ae_ibd
  36,956
  35,548
  593

. egen ae_spc_gp = rmin($ae_spc_gp)
(6821 missing values generated)

. egen ae_spc_serious = rmin($ae_spc_icd)
(3952 missing values generated)

. egen ae_spc_emerg = rmin($ae_spc_emerg)
(18800 missing values generated)

. egen ae_spc_all = rmin(ae_spc_gp ae_spc_serious ae_spc_emerg)
(174 missing values generated)

. egen ae_drug_gp = rmin($ae_drug_gp)
(11300 missing values generated)

. egen ae_drug_serious = rmin($ae_drug_icd)
(11367 missing values generated)

. egen ae_drug_emerg = rmin($ae_drug_emerg)
(11349 missing values generated)

. egen ae_drug_all = rmin(ae_drug_gp ae_drug_serious ae_drug_emerg)
(493 missing values generated)

. egen ae_imae_gp = rmin($ae_imae_gp)
(3498 missing values generated)

. egen ae_imae_serious = rmin($ae_imae_icd)
(3580 missing values generated)

. egen ae_imae_emerg = rmin($ae_imae_emerg)
(3620 missing values generated)

. egen ae_imae_all = rmin(ae_imae_gp ae_imae_serious ae_imae_emerg)       
(34 missing values generated)

. egen ae_all = rmin(ae_spc_all ae_drug_all ae_imae_all)

. egen ae_all_serious = rmin(ae_spc_serious ae_spc_emerg ae_drug_serious ae_dru
> g_emerg ae_imae_serious ae_imae_emerg)
(1 missing value generated)

. by drug, sort: count if ae_spc_all!=.

-------------------------------------------------------------------------------
-> drug = control
  51,266
-------------------------------------------------------------------------------
-> drug = sotrovimab
  307
-------------------------------------------------------------------------------
-> drug = paxlovid
  292
-------------------------------------------------------------------------------
-> drug = molnupiravir
  273

. by drug, sort: count if ae_drug_all!=.

-------------------------------------------------------------------------------
-> drug = control
  50,961
-------------------------------------------------------------------------------
-> drug = sotrovimab
  301
-------------------------------------------------------------------------------
-> drug = paxlovid
  286
-------------------------------------------------------------------------------
-> drug = molnupiravir
  271

. by drug, sort: count if ae_imae_all!=.

-------------------------------------------------------------------------------
-> drug = control
  51,404
-------------------------------------------------------------------------------
-> drug = sotrovimab
  308
-------------------------------------------------------------------------------
-> drug = paxlovid
  292
-------------------------------------------------------------------------------
-> drug = molnupiravir
  274

. by drug, sort: count if ae_all!=.

-------------------------------------------------------------------------------
-> drug = control
  51,437
-------------------------------------------------------------------------------
-> drug = sotrovimab
  308
-------------------------------------------------------------------------------
-> drug = paxlovid
  293
-------------------------------------------------------------------------------
-> drug = molnupiravir
  274

. 
. *** Secondary outcome - SAEs hospitalisation or death including COVID-19 
. * death
. bys drug: count if died_date_ons!=.

-------------------------------------------------------------------------------
-> drug = control
  30,726
-------------------------------------------------------------------------------
-> drug = sotrovimab
  181
-------------------------------------------------------------------------------
-> drug = paxlovid
  182
-------------------------------------------------------------------------------
-> drug = molnupiravir
  166

. 
. * a&e all admission
. bys drug: count if allcause_emerg_aande!=.

-------------------------------------------------------------------------------
-> drug = control
  2,582
-------------------------------------------------------------------------------
-> drug = sotrovimab
  22
-------------------------------------------------------------------------------
-> drug = paxlovid
  12
-------------------------------------------------------------------------------
-> drug = molnupiravir
  21

. 
. *covid admission
. // checking admission and discharge date; missing admission, missing dischagr
> e, or dischagre preceed admission 
. count if covid_hosp_date!=.&covid_discharge_date==.
  5,202

. count if covid_hosp_date==.&covid_discharge_date!=.
  476

. count if covid_hosp_date!=.&covid_discharge_date!=.&covid_hosp_date==covid_di
> scharge_date
  0

. count if covid_hosp_date!=.&covid_discharge_date!=.&covid_hosp_date<covid_dis
> charge_date
  34

. count if covid_hosp_date!=.&covid_discharge_date!=.&covid_hosp_date>covid_dis
> charge_date
  29

. // all covid hospitalisation
. bys drug: count if covid_hosp_date!=. 

-------------------------------------------------------------------------------
-> drug = control
  5,156
-------------------------------------------------------------------------------
-> drug = sotrovimab
  40
-------------------------------------------------------------------------------
-> drug = paxlovid
  35
-------------------------------------------------------------------------------
-> drug = molnupiravir
  34

. // covid admission on treatment date (control group will not have covid_hosp_
> date0)
. bys drug: count if covid_hosp_date0!=. 

-------------------------------------------------------------------------------
-> drug = control
  507
-------------------------------------------------------------------------------
-> drug = sotrovimab
  5
-------------------------------------------------------------------------------
-> drug = paxlovid
  8
-------------------------------------------------------------------------------
-> drug = molnupiravir
  2

. //  covid admission is the same as date treated 
. bys drug: count if covid_hosp_date0==date_treated&covid_hosp_date0!=.&date_tr
> eated!=.

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if covid_hosp_date1==(date_treated+1) &covid_hosp_date1!=.&da
> te_treated!=.

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. // covid admission is the same  as date treated and is a daycase
. bys drug: count if covid_hosp_date0==covid_discharge_date0&covid_hosp_date0!=
> .

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if covid_hosp_date1==covid_discharge_date1&covid_hosp_date1!=
> .

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. // covid admission is the same date as mab
. bys drug: count if covid_hosp_date0==covid_hosp_date_mabs&covid_hosp_date_mab
> s!=.

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if covid_hosp_date1==covid_hosp_date_mabs&covid_hosp_date_mab
> s!=.

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. // covid admission is the same date as mab and is a daycase or 24 hour admiss
> ion
. bys drug: count if covid_hosp_date0==covid_hosp_date_mabs&covid_hosp_date0!=.
> &covid_hosp_date0==covid_discharge_date0

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if covid_hosp_date1==covid_hosp_date_mabs&covid_hosp_date1!=.
> &covid_hosp_date1==covid_discharge_date1

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if covid_hosp_date0==covid_hosp_date_mabs&covid_hosp_date0!=.
> &(covid_discharge_date0 - covid_hosp_date0)==1

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if covid_hosp_date1==covid_hosp_date_mabs&covid_hosp_date1!=.
> &(covid_discharge_date1 - covid_hosp_date1)==1

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. // REPLACE - ignore covid admission if admission is the day 0 or day 1 after 
> treatment date treated AND a day case
. replace covid_hosp_date=. if covid_hosp_date0==covid_discharge_date0&covid_ho
> sp_date0!=.
(0 real changes made)

. replace covid_hosp_date=. if covid_hosp_date1==covid_discharge_date1&covid_ho
> sp_date1!=.  
(0 real changes made)

. // REPLACE - ignore covid admission if admission is the day 0 or day 1 after 
> treatment date AND a mab procedures 
. replace covid_hosp_date=. if covid_hosp_date0==covid_hosp_date_mabs&covid_hos
> p_date0!=.&covid_hosp_date0==covid_discharge_date0
(0 real changes made)

. replace covid_hosp_date=. if covid_hosp_date1==covid_hosp_date_mabs&covid_hos
> p_date1!=.&covid_hosp_date1==covid_discharge_date1
(0 real changes made)

. replace covid_hosp_date=. if covid_hosp_date0==covid_hosp_date_mabs&covid_hos
> p_date0!=.&(covid_discharge_date0 - covid_hosp_date0)==1
(0 real changes made)

. replace covid_hosp_date=. if covid_hosp_date1==covid_hosp_date_mabs&covid_hos
> p_date1!=.&(covid_discharge_date1 - covid_hosp_date1)==1
(0 real changes made)

. 
. *hosp admission
. // checking admission and discharge date; missing admission, missing dischagr
> e, or dischagre preceed admission 
. count if all_hosp_date!=.&hosp_discharge_date==.
  4,639

. count if all_hosp_date==.&hosp_discharge_date!=.
  4,657

. count if all_hosp_date!=.&hosp_discharge_date!=.&all_hosp_date==hosp_discharg
> e_date
  0

. count if all_hosp_date!=.&hosp_discharge_date!=.&all_hosp_date<hosp_discharge
> _date
  282

. count if all_hosp_date!=.&hosp_discharge_date!=.&all_hosp_date>hosp_discharge
> _date
  246

. // all hospitalisation
. bys drug: count if all_hosp_date!=.

-------------------------------------------------------------------------------
-> drug = control
  5,086
-------------------------------------------------------------------------------
-> drug = sotrovimab
  25
-------------------------------------------------------------------------------
-> drug = paxlovid
  24
-------------------------------------------------------------------------------
-> drug = molnupiravir
  32

. // admission on treatment date (control group will not have hosp_date0)
. bys drug: count if all_hosp_date0!=. 

-------------------------------------------------------------------------------
-> drug = control
  517
-------------------------------------------------------------------------------
-> drug = sotrovimab
  3
-------------------------------------------------------------------------------
-> drug = paxlovid
  1
-------------------------------------------------------------------------------
-> drug = molnupiravir
  2

. // admission is the same date as date treated 
. bys drug: count if all_hosp_date0==date_treated&all_hosp_date0!=.&date_treate
> d!=.

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if all_hosp_date1==(date_treated+1) &all_hosp_date1!=.&date_t
> reated!=.

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. // admission is the same date as date treated and is a daycase
. bys drug: count if all_hosp_date0==hosp_discharge_date0&all_hosp_date0!=.

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if all_hosp_date1==hosp_discharge_date1&all_hosp_date1!=.

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. // admission is for Covid and is the same date as date treated and is a dayca
> se
. bys drug: count if all_hosp_date0==covid_hosp_date0  & all_hosp_date0==hosp_d
> ischarge_date0&all_hosp_date0!=.

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if all_hosp_date1==covid_hosp_date1 & all_hosp_date1==hosp_di
> scharge_date1&all_hosp_date1!=.

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. //  admission is the same date as mab
. bys drug: count if all_hosp_date0==covid_hosp_date_mabs&covid_hosp_date_mabs!
> =.

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if all_hosp_date1==covid_hosp_date_mabs&covid_hosp_date_mabs!
> =.

-------------------------------------------------------------------------------
-> drug = control
  1
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. //  admission is the same date as mab and is a daycase, 1 day admission
. bys drug: count if all_hosp_date0==covid_hosp_date_mabs&all_hosp_date0!=.&all
> _hosp_date0==hosp_discharge_date0

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if all_hosp_date1==covid_hosp_date_mabs&all_hosp_date1!=.&all
> _hosp_date1==hosp_discharge_date1

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if all_hosp_date0==covid_hosp_date_mabs&all_hosp_date0!=.&(ho
> sp_discharge_date0-all_hosp_date0)==1

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if all_hosp_date1==covid_hosp_date_mabs&all_hosp_date1!=.&(ho
> sp_discharge_date1-all_hosp_date1)==1

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. //  admission is is for Covid and the same date as mab and is a daycase, 1 da
> y admission
. bys drug: count if all_hosp_date0==covid_hosp_date0 & all_hosp_date0==covid_h
> osp_date_mabs&all_hosp_date0!=.&all_hosp_date0==hosp_discharge_date0

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if all_hosp_date1==covid_hosp_date1 & all_hosp_date1==covid_h
> osp_date_mabs&all_hosp_date1!=.&all_hosp_date1==hosp_discharge_date1

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if all_hosp_date0==covid_hosp_date0 & all_hosp_date0==covid_h
> osp_date_mabs&all_hosp_date0!=.&(hosp_discharge_date0-all_hosp_date0)==1

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if all_hosp_date1==covid_hosp_date1 & all_hosp_date1==covid_h
> osp_date_mabs&all_hosp_date1!=.&(hosp_discharge_date1-all_hosp_date1)==1

-------------------------------------------------------------------------------
-> drug = control
  0
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  0
-------------------------------------------------------------------------------
-> drug = molnupiravir
  0

. // REPLACE - ignore covid admission if admission is for covid AND day 0 or da
> y 1 after treatment AND daycase
. replace all_hosp_date=. if all_hosp_date0==covid_hosp_date0 & all_hosp_date0=
> =hosp_discharge_date0 & all_hosp_date0!=.
(0 real changes made)

. replace all_hosp_date=. if all_hosp_date1==covid_hosp_date1 & all_hosp_date1=
> =hosp_discharge_date1 & all_hosp_date1!=.
(0 real changes made)

. // REPLACE - ignore admission if admission is for covid AND day 0 or day 1 af
> ter treatment 
. replace all_hosp_date=. if all_hosp_date0==covid_hosp_date0 & all_hosp_date0=
> =covid_hosp_date_mabs&all_hosp_date0!=.&all_hosp_date0==hosp_discharge_date0
(0 real changes made)

. replace all_hosp_date=. if all_hosp_date1==covid_hosp_date1 & all_hosp_date1=
> =covid_hosp_date_mabs&all_hosp_date1!=.&all_hosp_date1==hosp_discharge_date1
(0 real changes made)

. replace all_hosp_date=. if all_hosp_date0==covid_hosp_date0 & all_hosp_date0=
> =covid_hosp_date_mabs&all_hosp_date0!=.&(hosp_discharge_date0 - all_hosp_date
> 0)==1
(0 real changes made)

. replace all_hosp_date=. if all_hosp_date1==covid_hosp_date1 & all_hosp_date1=
> =covid_hosp_date_mabs&all_hosp_date1!=.&(hosp_discharge_date1 - all_hosp_date
> 1)==1
(0 real changes made)

. 
. foreach var of varlist allcause_emerg_aande covid_hosp_date all_hosp_date die
> d_date_ons{
  2.                                 display "`var'"
  3.                                 bys drug: count if (`var' >= start_date & 
> `var' <= start_date + 28) & `var'!=.                          
  4.                                 bys drug: count if (`var' < start_date | `
> var' > start_date + 28) & `var'!=.                            
  5. }
allcause_emerg_aande

-------------------------------------------------------------------------------
-> drug = control
  55
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  1
-------------------------------------------------------------------------------
-> drug = molnupiravir
  1

-------------------------------------------------------------------------------
-> drug = control
  2,527
-------------------------------------------------------------------------------
-> drug = sotrovimab
  22
-------------------------------------------------------------------------------
-> drug = paxlovid
  11
-------------------------------------------------------------------------------
-> drug = molnupiravir
  20
covid_hosp_date

-------------------------------------------------------------------------------
-> drug = control
  139
-------------------------------------------------------------------------------
-> drug = sotrovimab
  4
-------------------------------------------------------------------------------
-> drug = paxlovid
  2
-------------------------------------------------------------------------------
-> drug = molnupiravir
  2

-------------------------------------------------------------------------------
-> drug = control
  5,017
-------------------------------------------------------------------------------
-> drug = sotrovimab
  36
-------------------------------------------------------------------------------
-> drug = paxlovid
  33
-------------------------------------------------------------------------------
-> drug = molnupiravir
  32
all_hosp_date

-------------------------------------------------------------------------------
-> drug = control
  131
-------------------------------------------------------------------------------
-> drug = sotrovimab
  1
-------------------------------------------------------------------------------
-> drug = paxlovid
  2
-------------------------------------------------------------------------------
-> drug = molnupiravir
  3

-------------------------------------------------------------------------------
-> drug = control
  4,955
-------------------------------------------------------------------------------
-> drug = sotrovimab
  24
-------------------------------------------------------------------------------
-> drug = paxlovid
  22
-------------------------------------------------------------------------------
-> drug = molnupiravir
  29
died_date_ons

-------------------------------------------------------------------------------
-> drug = control
  435
-------------------------------------------------------------------------------
-> drug = sotrovimab
  3
-------------------------------------------------------------------------------
-> drug = paxlovid
  7
-------------------------------------------------------------------------------
-> drug = molnupiravir
  4

-------------------------------------------------------------------------------
-> drug = control
  30,291
-------------------------------------------------------------------------------
-> drug = sotrovimab
  178
-------------------------------------------------------------------------------
-> drug = paxlovid
  175
-------------------------------------------------------------------------------
-> drug = molnupiravir
  162

. 
. ****************************
. *       COVARIATES              *
. ****************************
. *Time between 1st positive covid test and treatment*
. gen pre_drug_test=3 if drug>0 & covid_test_positive_date!=. &(date_treated-co
> vid_test_positive_date>0)&(date_treated-covid_test_positive_date<21)
(52,286 missing values generated)

. replace pre_drug_test=2 if drug>0 & covid_test_positive_date!=. &(date_treate
> d-covid_test_positive_date>0)&(date_treated-covid_test_positive_date<=7)
(11 real changes made)

. replace pre_drug_test=1 if drug>0 & covid_test_positive_date!=. &(date_treate
> d-covid_test_positive_date>0)&(date_treated-covid_test_positive_date<=5)
(9 real changes made)

. replace pre_drug_test=0 if drug>0 & covid_test_positive_date!=. &(date_treate
> d-covid_test_positive_date>=0)&(date_treated-covid_test_positive_date<=3)
(5 real changes made)

. replace pre_drug_test=4 if drug>0 & (date_treated-covid_test_positive_date<0)
>  & (date_treated-covid_test_positive_date>-7)
(4 real changes made)

. replace pre_drug_test=5 if drug>0 & (covid_test_positive_date==. | (date_trea
> ted-covid_test_positive_date<=-7) | (date_treated-covid_test_positive_date>=2
> 1)) 
(845 real changes made)

. label define pre_drug_test 0 "<3 days" 1 "3-5 days"  2 "5-7 days" 3 ">7 days 
> & <21 days" 4 "treatment proceeds test <7 days" 5 "no test", replace 

. label values pre_drug_test pre_drug_test

. tab pre_drug_test drug,m

                      |                    drug
        pre_drug_test |   control  sotrovima   paxlovid  molnupira |     Total
----------------------+--------------------------------------------+----------
              <3 days |         0          2          3          0 |         5 
             3-5 days |         0          1          2          1 |         4 
             5-7 days |         0          1          0          1 |         2 
   >7 days & <21 days |         0          6          1          8 |        15 
treatment proceeds te |         0          0          1          3 |         4 
              no test |         0        298        286        261 |       845 
                    . |    51,437          0          0          0 |    51,437 
----------------------+--------------------------------------------+----------
                Total |    51,437        308        293        274 |    52,312 

. 
. * Demographics*
. * Age
. sum age

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         age |     52,312     48.7691    18.97573         18        109

. gen age_group=(age>=40)+(age>=60)

. label define age_group 0 "18-39" 1 "40-59" 2 ">=60" 

. label values age_group age_group

. egen age_5y_band=cut(age), at(18,25,30,35,40,45,50,55,60,65,70,75,80,85,110) 
> label

. tab age_group,m

  age_group |      Freq.     Percent        Cum.
------------+-----------------------------------
      18-39 |     19,111       36.53       36.53
      40-59 |     17,467       33.39       69.92
       >=60 |     15,734       30.08      100.00
------------+-----------------------------------
      Total |     52,312      100.00

. tab age_5y_band,m

age_5y_band |      Freq.     Percent        Cum.
------------+-----------------------------------
        18- |      5,700       10.90       10.90
        25- |      4,636        8.86       19.76
        30- |      4,401        8.41       28.17
        35- |      4,374        8.36       36.53
        40- |      3,956        7.56       44.10
        45- |      4,450        8.51       52.60
        50- |      4,719        9.02       61.62
        55- |      4,342        8.30       69.92
        60- |      3,741        7.15       77.07
        65- |      3,358        6.42       83.49
        70- |      3,190        6.10       89.59
        75- |      2,197        4.20       93.79
        80- |      1,612        3.08       96.87
        85- |      1,636        3.13      100.00
------------+-----------------------------------
      Total |     52,312      100.00

. * Sex
. gen male = 1 if sex == "M"
(26,575 missing values generated)

. replace male = 0 if sex == "F"
(26,575 real changes made)

. rename sex sex_str

. gen sex=0 if sex_str=="M"
(26,575 missing values generated)

. replace sex=1 if sex_str=="F"
(26,575 real changes made)

. label define sex 0 "Male" 1 "Female"

. label values sex sex

. tab sex

        sex |      Freq.     Percent        Cum.
------------+-----------------------------------
       Male |     25,737       49.20       49.20
     Female |     26,575       50.80      100.00
------------+-----------------------------------
      Total |     52,312      100.00

. * Ethnicity
. tab ethnicity,m

  ethnicity |      Freq.     Percent        Cum.
------------+-----------------------------------
            |     31,334       59.90       59.90
      Black |      2,182        4.17       64.07
      Mixed |      2,074        3.96       68.03
      Other |      2,039        3.90       71.93
South Asian |      2,165        4.14       76.07
      White |     12,518       23.93      100.00
------------+-----------------------------------
      Total |     52,312      100.00

. rename ethnicity ethnicity_str

. encode  ethnicity_str, gen(ethnicity)

. label list ethnicity
ethnicity:
           1 Black
           2 Mixed
           3 Other
           4 South Asian
           5 White

. replace ethnicity=. if ethnicity==2 
(2,074 real changes made, 2,074 to missing)

. tab ethnicity                           

  ethnicity |      Freq.     Percent        Cum.
------------+-----------------------------------
      Black |      2,182       11.54       11.54
      Other |      2,039       10.79       22.33
South Asian |      2,165       11.45       33.78
      White |     12,518       66.22      100.00
------------+-----------------------------------
      Total |     18,904      100.00

. gen ethnicity_with_missing=ethnicity
(33,408 missing values generated)

. replace ethnicity_with_missing=9 if ethnicity_with_missing==.
(33,408 real changes made)

. label define ethnicity_with_missing 1 "Black" 3 "Mixed" 4 "Other" 5 "South As
> ian" 6 "White" 9 "Missing", replace

. label values ethnicity_with_missing ethnicity_with_missing

. tab ethnicity_with_missing

ethnicity_w |
ith_missing |      Freq.     Percent        Cum.
------------+-----------------------------------
      Black |      2,182        4.17        4.17
      Mixed |      2,039        3.90        8.07
      Other |      2,165        4.14       12.21
South Asian |     12,518       23.93       36.14
    Missing |     33,408       63.86      100.00
------------+-----------------------------------
      Total |     52,312      100.00

. gen White=1 if ethnicity==6
(52,312 missing values generated)

. replace White=0 if ethnicity!=6&ethnicity!=.
(18,904 real changes made)

. tab White

      White |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     18,904      100.00      100.00
------------+-----------------------------------
      Total |     18,904      100.00

. gen White_with_missing=White
(33,408 missing values generated)

. replace White_with_missing=9 if White==.
(33,408 real changes made)

. tab White_with_missing

White_with_ |
    missing |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     18,904       36.14       36.14
          9 |     33,408       63.86      100.00
------------+-----------------------------------
      Total |     52,312      100.00

. * IMD
. tab imdq5,m

             imdQ5 |      Freq.     Percent        Cum.
-------------------+-----------------------------------
 1 (most deprived) |     10,550       20.17       20.17
                 2 |     10,633       20.33       40.49
                 3 |     10,412       19.90       60.40
                 4 |     10,261       19.62       80.01
5 (least deprived) |      9,953       19.03       99.04
           Unknown |        503        0.96      100.00
-------------------+-----------------------------------
             Total |     52,312      100.00

. replace imdq5="." if imdq5=="Unknown" 
(503 real changes made)

. replace imdq5="1" if imdq5=="1 (most deprived)" 
(10,550 real changes made)

. replace imdq5="5" if imdq5=="5 (least deprived)" 
(9,953 real changes made)

. destring imdq5, replace
imdq5: all characters numeric; replaced as byte
(503 missing values generated)

. recode imdq5 5 = 1 4 = 2 3 = 3 2 = 4 1 = 5 // Reverse the order (so 5 is more
>  deprived)
(imdq5: 41397 changes made)

. label define imdq5 1 "1 least deprived" 2 "2" 3 "3" 4 "4" 5 "5 most deprived"
> , replace

. label values imdq5 imdq5

. gen imd_with_missing=imdq5
(503 missing values generated)

. replace imd_with_missing=9 if imdq5==.
(503 real changes made)

. tab imdq5,m

           imdQ5 |      Freq.     Percent        Cum.
-----------------+-----------------------------------
1 least deprived |      9,953       19.03       19.03
               2 |     10,261       19.62       38.64
               3 |     10,412       19.90       58.54
               4 |     10,633       20.33       78.87
 5 most deprived |     10,550       20.17       99.04
               . |        503        0.96      100.00
-----------------+-----------------------------------
           Total |     52,312      100.00

. * Region
. tab region_nhs,m

              region_nhs |      Freq.     Percent        Cum.
-------------------------+-----------------------------------
                    East |      5,289       10.11       10.11
           East Midlands |      5,124        9.80       19.91
                  London |     10,472       20.02       39.92
              North East |      5,272       10.08       50.00
              North West |      5,300       10.13       60.13
              South East |      5,213        9.97       70.10
              South West |      5,154        9.85       79.95
           West Midlands |      5,170        9.88       89.83
Yorkshire and The Humber |      5,318       10.17      100.00
-------------------------+-----------------------------------
                   Total |     52,312      100.00

. tab drug region_nhs

             |                 region_nhs
        drug |      East  East Mi..     London  North E.. |     Total
-------------+--------------------------------------------+----------
     control |     5,195      5,044     10,286      5,179 |    51,437 
  sotrovimab |        29         27         74         33 |       308 
    paxlovid |        32         27         59         31 |       293 
molnupiravir |        33         26         53         29 |       274 
-------------+--------------------------------------------+----------
       Total |     5,289      5,124     10,472      5,272 |    52,312 


             |                 region_nhs
        drug | North W..  South E..  South W..  West Mi.. |     Total
-------------+--------------------------------------------+----------
     control |     5,216      5,128      5,063      5,086 |    51,437 
  sotrovimab |        27         33         36         21 |       308 
    paxlovid |        32         27         31         32 |       293 
molnupiravir |        25         25         24         31 |       274 
-------------+--------------------------------------------+----------
       Total |     5,300      5,213      5,154      5,170 |    52,312 


             | region_nhs
        drug | Yorkshi.. |     Total
-------------+-----------+----------
     control |     5,240 |    51,437 
  sotrovimab |        28 |       308 
    paxlovid |        22 |       293 
molnupiravir |        28 |       274 
-------------+-----------+----------
       Total |     5,318 |    52,312 

. rename region_nhs region_nhs_str 

. encode  region_nhs_str, gen(region_nhs)

. label list region_nhs
region_nhs:
           1 East
           2 East Midlands
           3 London
           4 North East
           5 North West
           6 South East
           7 South West
           8 West Midlands
           9 Yorkshire and The Humber

. tab region_covid_therapeutics,m

region_covid_therapeutic |
                       s |      Freq.     Percent        Cum.
-------------------------+-----------------------------------
                    East |      5,248       10.03       10.03
           East Midlands |      5,225        9.99       20.02
                  London |     10,405       19.89       39.91
              North East |      5,215        9.97       49.88
              North West |      5,172        9.89       59.77
              South East |      5,234       10.01       69.77
              South West |      5,272       10.08       79.85
           West Midlands |      5,230       10.00       89.85
Yorkshire and The Humber |      5,311       10.15      100.00
-------------------------+-----------------------------------
                   Total |     52,312      100.00

. rename region_covid_therapeutics region_covid_therapeutics_str

. encode region_covid_therapeutics_str, gen(region_covid_therapeutics)

. label list region_covid_therapeutics
region_covid_therapeutics:
           1 East
           2 East Midlands
           3 London
           4 North East
           5 North West
           6 South East
           7 South West
           8 West Midlands
           9 Yorkshire and The Humber

. tab stp,m

        stp |      Freq.     Percent        Cum.
------------+-----------------------------------
       STP1 |      5,373       10.27       10.27
      STP10 |      5,301       10.13       20.40
       STP2 |      5,234       10.01       30.41
       STP3 |      5,227        9.99       40.40
       STP4 |      5,214        9.97       50.37
       STP5 |      5,230       10.00       60.37
       STP6 |      5,155        9.85       70.22
       STP7 |      5,249       10.03       80.26
       STP8 |      5,162        9.87       90.12
       STP9 |      5,167        9.88      100.00
------------+-----------------------------------
      Total |     52,312      100.00

. rename stp stp_str

. encode  stp_str,gen(stp)

. label list stp
stp:
           1 STP1
           2 STP10
           3 STP2
           4 STP3
           5 STP4
           6 STP5
           7 STP6
           8 STP7
           9 STP8
          10 STP9

. label values stp stp

. by stp, sort: gen stp_N=_N if stp!=. //combine stps with low N (<100) as "Oth
> er"

. replace stp=99 if stp_N<100
(0 real changes made)

. tab stp,m

        stp |      Freq.     Percent        Cum.
------------+-----------------------------------
       STP1 |      5,373       10.27       10.27
      STP10 |      5,301       10.13       20.40
       STP2 |      5,234       10.01       30.41
       STP3 |      5,227        9.99       40.40
       STP4 |      5,214        9.97       50.37
       STP5 |      5,230       10.00       60.37
       STP6 |      5,155        9.85       70.22
       STP7 |      5,249       10.03       80.26
       STP8 |      5,162        9.87       90.12
       STP9 |      5,167        9.88      100.00
------------+-----------------------------------
      Total |     52,312      100.00

. * BMI
. tabstat bmi, stat(mean p25 p50 p75 min max) 

    variable |      mean       p25       p50       p75       min       max
-------------+------------------------------------------------------------
         bmi |  26.55963  21.52382  27.41292  33.02086 -7.600333   61.7328
--------------------------------------------------------------------------

. replace bmi=. if bmi<10|bmi>60
(3,231 real changes made, 3,231 to missing)

. gen bmi_10y=bmi if bmi_date_measured!=. & bmi_date_measured>=start_date-365*1
> 0 & (age+((bmi_date_measured-start_date)/365)>=18)
(52,312 missing values generated)

. gen bmi_5y=bmi if bmi_date_measured!=. & bmi_date_measured>=start_date-365*5 
> & (age+((bmi_date_measured-start_date)/365)>=18)
(52,312 missing values generated)

. gen bmi_2y=bmi if bmi_date_measured!=. & bmi_date_measured>=start_date-365*2 
> & (age+((bmi_date_measured-start_date)/365)>=18)
(52,312 missing values generated)

. gen bmi_group=(bmi>=18.5)+(bmi>=25.0)+(bmi>=30.0) if bmi!=.
(3,231 missing values generated)

. label define bmi_group 0 "underweight" 1 "normal" 2 "overweight" 3 "obese"

. label values bmi_group bmi_group

. gen bmi_group_with_missing=bmi_group
(3,231 missing values generated)

. replace bmi_group_with_missing=9 if bmi_group==.
(3,231 real changes made)

. gen bmi_25=(bmi>=25) if bmi!=.
(3,231 missing values generated)

. gen bmi_30=(bmi>=30) if bmi!=.
(3,231 missing values generated)

. * Comorbidities
. tab diabetes,m

   diabetes |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     47,072       89.98       89.98
          1 |      5,240       10.02      100.00
------------+-----------------------------------
      Total |     52,312      100.00

. tab chronic_cardiac_disease,m

chronic_car |
diac_diseas |
          e |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     47,135       90.10       90.10
          1 |      5,177        9.90      100.00
------------+-----------------------------------
      Total |     52,312      100.00

. tab hypertension,m

hypertensio |
          n |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     47,134       90.10       90.10
          1 |      5,178        9.90      100.00
------------+-----------------------------------
      Total |     52,312      100.00

. tab chronic_respiratory_disease,m

chronic_res |
piratory_di |
      sease |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     47,142       90.12       90.12
          1 |      5,170        9.88      100.00
------------+-----------------------------------
      Total |     52,312      100.00

. * Vaccination 
. tab vaccination_status,m

       vaccination_status |      Freq.     Percent        Cum.
--------------------------+-----------------------------------
Four or more vaccinations |      5,093        9.74        9.74
          One vaccination |      5,141        9.83       19.56
       Three vaccinations |     26,169       50.02       69.59
         Two vaccinations |      5,300       10.13       79.72
            Un-vaccinated |      5,283       10.10       89.82
 Un-vaccinated (declined) |      5,326       10.18      100.00
--------------------------+-----------------------------------
                    Total |     52,312      100.00

. rename vaccination_status vaccination_status_group

. gen vaccination_status=0 if vaccination_status_g=="Un-vaccinated"|vaccination
> _status_g=="Un-vaccinated (declined)"
(41,703 missing values generated)

. replace vaccination_status=1 if vaccination_status_g=="One vaccination"
(5,141 real changes made)

. replace vaccination_status=2 if vaccination_status_g=="Two vaccinations"
(5,300 real changes made)

. replace vaccination_status=3 if vaccination_status_g=="Three vaccinations"
(26,169 real changes made)

. replace vaccination_status=4 if vaccination_status_g=="Four or more vaccinati
> ons"
(5,093 real changes made)

. label define vaccination_status 0 "Un-vaccinated" 1 "One vaccination" 2 "Two 
> vaccinations" 3 "Three vaccinations" 4 "Four or more vaccinations"

. label values vaccination_status vaccination_status

. gen vaccination_3_plus=1 if vaccination_status==3|vaccination_status==4
(21,050 missing values generated)

. replace vaccination_3_plus=0 if vaccination_status<3
(21,050 real changes made)

. * time between vaccine and covid positive test or treatment
. gen days_vacc_covid=covid_test_positive_date - last_vaccination_date if (covi
> d_test_positive_date>last_vaccination_date & drug==0)
(19,897 missing values generated)

. sum days_vacc_covid,de

                       days_vacc_covid
-------------------------------------------------------------
      Percentiles      Smallest
 1%            9              1
 5%           43              1
10%           87              1       Obs              32,415
25%          217              1       Sum of Wgt.      32,415

50%          428                      Mean            446.129
                        Largest       Std. Dev.      274.7923
75%          650           1146
90%          836           1146       Variance       75510.78
95%          932           1147       Skewness       .2975887
99%         1056           1148       Kurtosis        2.18436

. gen days_vacc_treat=date_treated - last_vaccination_date if (date_treated>las
> t_vaccination_date & drug>0)
(51,712 missing values generated)

. sum days_vacc_treat,de

                       days_vacc_treat
-------------------------------------------------------------
      Percentiles      Smallest
 1%           19              2
 5%         55.5              7
10%           97             12       Obs                 600
25%        226.5             14       Sum of Wgt.         600

50%          437                      Mean           454.3933
                        Largest       Std. Dev.      271.2942
75%        668.5           1103
90%          817           1110       Variance       73600.55
95%          914           1121       Skewness       .2603259
99%       1077.5           1125       Kurtosis       2.151366

. gen days_vacc_treat_test = days_vacc_covid if drug==0
(19,897 missing values generated)

. replace days_vacc_treat_test = days_vacc_treat if drug>0
(600 real changes made)

. sum days_vacc_treat_test,de

                    days_vacc_treat_test
-------------------------------------------------------------
      Percentiles      Smallest
 1%            9              1
 5%           43              1
10%           87              1       Obs              33,015
25%          217              1       Sum of Wgt.      33,015

50%          428                      Mean           446.2792
                        Largest       Std. Dev.      274.7272
75%          650           1146
90%          835           1146       Variance       75475.05
95%          932           1147       Skewness       .2968895
99%         1056           1148       Kurtosis       2.183741

. gen month_vacc_covid=ceil(days_vacc_treat_test/30)
(19,297 missing values generated)

. tab month_vacc_covid,m

month_vacc_ |
      covid |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |      1,163        2.22        2.22
          2 |      1,138        2.18        4.40
          3 |      1,137        2.17        6.57
          4 |      1,160        2.22        8.79
          5 |      1,142        2.18       10.97
          6 |      1,180        2.26       13.23
          7 |      1,098        2.10       15.33
          8 |      1,137        2.17       17.50
          9 |      1,172        2.24       19.74
         10 |      1,165        2.23       21.97
         11 |      1,196        2.29       24.25
         12 |      1,193        2.28       26.54
         13 |      1,174        2.24       28.78
         14 |      1,183        2.26       31.04
         15 |      1,123        2.15       33.19
         16 |      1,154        2.21       35.39
         17 |      1,173        2.24       37.64
         18 |      1,133        2.17       39.80
         19 |      1,194        2.28       42.08
         20 |      1,095        2.09       44.18
         21 |      1,018        1.95       46.12
         22 |        999        1.91       48.03
         23 |        924        1.77       49.80
         24 |        883        1.69       51.49
         25 |        816        1.56       53.05
         26 |        728        1.39       54.44
         27 |        721        1.38       55.82
         28 |        616        1.18       56.99
         29 |        598        1.14       58.14
         30 |        518        0.99       59.13
         31 |        424        0.81       59.94
         32 |        402        0.77       60.71
         33 |        358        0.68       61.39
         34 |        289        0.55       61.94
         35 |        237        0.45       62.40
         36 |        174        0.33       62.73
         37 |        129        0.25       62.98
         38 |         66        0.13       63.10
         39 |          5        0.01       63.11
          . |     19,297       36.89      100.00
------------+-----------------------------------
      Total |     52,312      100.00

. *Calendar time*
. gen day_after_campaign=start_date-mdy(12,15,2021)
(27,524 missing values generated)

. sum day_after_campaign,de

                     day_after_campaign
-------------------------------------------------------------
      Percentiles      Smallest
 1%            1             -3
 5%           25             -3
10%           56             -3       Obs              24,788
25%          146             -3       Sum of Wgt.      24,788

50%          301                      Mean           299.3451
                        Largest       Std. Dev.      175.5831
75%          451            601
90%          541            601       Variance       30829.44
95%          573            601       Skewness      -.0112354
99%          595            601       Kurtosis       1.799369

. gen month_after_campaign=ceil((start_date-mdy(12,15,2021))/30)
(27,524 missing values generated)

. tab month_after_campaign,m

month_after |
  _campaign |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |        208        0.40        0.40
          1 |      1,242        2.37        2.77
          2 |      1,246        2.38        5.15
          3 |      1,274        2.44        7.59
          4 |      1,179        2.25        9.84
          5 |      1,247        2.38       12.23
          6 |      1,132        2.16       14.39
          7 |      1,168        2.23       16.62
          8 |      1,222        2.34       18.96
          9 |      1,255        2.40       21.36
         10 |      1,207        2.31       23.67
         11 |      1,199        2.29       25.96
         12 |      1,260        2.41       28.37
         13 |      1,283        2.45       30.82
         14 |      1,190        2.27       33.09
         15 |      1,265        2.42       35.51
         16 |      1,252        2.39       37.91
         17 |      1,179        2.25       40.16
         18 |      1,266        2.42       42.58
         19 |      1,163        2.22       44.80
         20 |      1,317        2.52       47.32
         21 |         34        0.06       47.38
          . |     27,524       52.62      100.00
------------+-----------------------------------
      Total |     52,312      100.00

. tab start_date if month_after_campaign>100
no observations

. drop if month_after_campaign>100
(27,524 observations deleted)

. * Variant
. label define sgtf_new 0 "S gene detected" 1 "confirmed SGTF" 9 "NA"

. label values sgtf_new sgtf_new

. * Prior infection / check Bang code
. tab prior_covid, m

prior_covid |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     17,311       69.84       69.84
          1 |      7,477       30.16      100.00
------------+-----------------------------------
      Total |     24,788      100.00

. gen prior_covid_index=1 if prior_covid==1 & prior_covid_date<campaign_start
(24,750 missing values generated)

. tab prior_covid_index,m

prior_covid |
     _index |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         38        0.15        0.15
          . |     24,750       99.85      100.00
------------+-----------------------------------
      Total |     24,788      100.00

. replace prior_covid_index=0 if prior_covid_index==.
(24,750 real changes made)

. *Contraindications for Pax*
. tab drug if organ_transplant==1

        drug |      Freq.     Percent        Cum.
-------------+-----------------------------------
     control |      7,688       96.78       96.78
  sotrovimab |         84        1.06       97.83
    paxlovid |         95        1.20       99.03
molnupiravir |         77        0.97      100.00
-------------+-----------------------------------
       Total |      7,944      100.00

. tab drug if liver_disease_nhsd_icd10==1

        drug |      Freq.     Percent        Cum.
-------------+-----------------------------------
     control |      2,439       96.90       96.90
  sotrovimab |         27        1.07       97.97
    paxlovid |         27        1.07       99.05
molnupiravir |         24        0.95      100.00
-------------+-----------------------------------
       Total |      2,517      100.00

. tab drug if renal_disease==1

        drug |      Freq.     Percent        Cum.
-------------+-----------------------------------
     control |      8,583       96.45       96.45
  sotrovimab |        102        1.15       97.60
    paxlovid |        113        1.27       98.87
molnupiravir |        101        1.13      100.00
-------------+-----------------------------------
       Total |      8,899      100.00

. * Calculating egfr: adapted from https://github.com/opensafely/COVID-19-vacci
> ne-breakthrough/blob/updates-feb/analysis/data_process.R*
. tabstat creatinine_ctv3, stat(mean p25 p50 p75 min max) 

    variable |      mean       p25       p50       p75       min       max
-------------+------------------------------------------------------------
creat~e_ctv3 |  56.97345   47.8691  59.08975  69.40036         0  115.9269
--------------------------------------------------------------------------

. replace creatinine_ctv3=. if !inrange(creatinine_ctv3, 20, 3000)|creatinine_c
> tv3_date>start_date
(12,386 real changes made, 12,386 to missing)

. tabstat creatinine_ctv3, stat(mean p25 p50 p75 min max) 

    variable |      mean       p25       p50       p75       min       max
-------------+------------------------------------------------------------
creat~e_ctv3 |   60.0686  49.95726  60.02332  70.03149  20.05616  115.9269
--------------------------------------------------------------------------

. replace creatinine_ctv3 = creatinine_ctv3/88.4
(12,402 real changes made)

. gen min_creatinine_ctv3=.
(24,788 missing values generated)

. replace min_creatinine_ctv3 = (creatinine_ctv3/0.7)^-0.329 if sex==1
(6,227 real changes made)

. replace min_creatinine_ctv3 = (creatinine_ctv3/0.9)^-0.411 if sex==0
(6,175 real changes made)

. replace min_creatinine_ctv3 = 1 if min_creatinine_ctv3<1
(3,408 real changes made)

. gen max_creatinine_ctv3=.
(24,788 missing values generated)

. replace max_creatinine_ctv3 = (creatinine_ctv3/0.7)^-1.209 if sex==1
(6,227 real changes made)

. replace max_creatinine_ctv3 = (creatinine_ctv3/0.9)^-1.209 if sex==0
(6,175 real changes made)

. replace max_creatinine_ctv3 = 1 if max_creatinine_ctv3>1
(21,380 real changes made)

. gen egfr_creatinine_ctv3 = min_creatinine_ctv3*max_creatinine_ctv3*141*(0.993
> ^age_creatinine_ctv3) if age_creatinine_ctv3>0&age_creatinine_ctv3<=120
(12,536 missing values generated)

. replace egfr_creatinine_ctv3 = egfr_creatinine_ctv3*1.018 if sex==1
(6,160 real changes made)

. tabstat creatinine_snomed, stat(mean p25 p50 p75 min max) 

    variable |      mean       p25       p50       p75       min       max
-------------+------------------------------------------------------------
cre~e_snomed |  22.40458         0         0  44.83016 -36.65901  117.7373
--------------------------------------------------------------------------

. replace creatinine_snomed = . if !inrange(creatinine_snomed, 20, 3000)| creat
> inine_snomed_date>start_date
(18,978 real changes made, 18,978 to missing)

. replace creatinine_snomed_date = creatinine_short_snomed_date if missing(crea
> tinine_snomed)
(12,798 real changes made, 3,307 to missing)

. replace creatinine_operator_snomed = creatinine_operator_short_snomed if miss
> ing(creatinine_snomed)
(10,497 real changes made)

. replace age_creatinine_snomed = age_creatinine_short_snomed if missing(creati
> nine_snomed)
(18,781 real changes made)

. replace creatinine_snomed = creatinine_short_snomed if missing(creatinine_sno
> med)
(18,978 real changes made)

. replace creatinine_snomed = . if !inrange(creatinine_snomed, 20, 3000)| creat
> inine_snomed_date>start_date
(14,813 real changes made, 14,813 to missing)

. replace creatinine_snomed = creatinine_snomed/88.4
(9,975 real changes made)

. gen min_creatinine_snomed=.
(24,788 missing values generated)

. replace min_creatinine_snomed = (creatinine_snomed/0.7)^-0.329 if sex==1
(5,085 real changes made)

. replace min_creatinine_snomed = (creatinine_snomed/0.9)^-0.411 if sex==0
(4,890 real changes made)

. replace min_creatinine_snomed = 1 if min_creatinine_snomed<1
(1,349 real changes made)

. gen max_creatinine_snomed=.
(24,788 missing values generated)

. replace max_creatinine_snomed = (creatinine_snomed/0.7)^-1.209 if sex==1
(5,085 real changes made)

. replace max_creatinine_snomed = (creatinine_snomed/0.9)^-1.209 if sex==0
(4,890 real changes made)

. replace max_creatinine_snomed = 1 if max_creatinine_snomed>1
(23,439 real changes made)

. gen egfr_creatinine_snomed = min_creatinine_snomed*max_creatinine_snomed*141*
> (0.993^age_creatinine_snomed) if age_creatinine_snomed>0&age_creatinine_snome
> d<=120
(14,909 missing values generated)

. replace egfr_creatinine_snomed = egfr_creatinine_snomed*1.018 if sex==1
(5,028 real changes made)

. gen egfr_60 = 1 if (egfr_creatinine_ctv3<60&creatinine_operator_ctv3!="<")|(e
> gfr_creatinine_snomed<60&creatinine_operator_snomed!="<")|(egfr_record<60&egf
> r_record>0&egfr_operator!=">"&egfr_operator!=">=")|(egfr_short_record<60&egfr
> _short_record>0&egfr_short_operator!=">"&egfr_short_operator!=">=")
(21,559 missing values generated)

. gen egfr_30 = 1 if (egfr_creatinine_ctv3<30&creatinine_operator_ctv3!="<")|(e
> gfr_creatinine_snomed<30&creatinine_operator_snomed!="<")|(egfr_record<30&egf
> r_record>0&egfr_operator!=">"&egfr_operator!=">=")|(egfr_short_record<30&egfr
> _short_record>0&egfr_short_operator!=">"&egfr_short_operator!=">=")
(24,040 missing values generated)

. tab drug if egfr_60==1

        drug |      Freq.     Percent        Cum.
-------------+-----------------------------------
     control |      3,114       96.44       96.44
  sotrovimab |         37        1.15       97.58
    paxlovid |         35        1.08       98.67
molnupiravir |         43        1.33      100.00
-------------+-----------------------------------
       Total |      3,229      100.00

. tab drug if egfr_30==1

        drug |      Freq.     Percent        Cum.
-------------+-----------------------------------
     control |        725       96.93       96.93
  sotrovimab |          7        0.94       97.86
    paxlovid |          7        0.94       98.80
molnupiravir |          9        1.20      100.00
-------------+-----------------------------------
       Total |        748      100.00

. *drug interactions*
. tab drug if drugs_paxlovid_interaction<=start_date

        drug |      Freq.     Percent        Cum.
-------------+-----------------------------------
     control |        639       97.86       97.86
  sotrovimab |          4        0.61       98.47
    paxlovid |          5        0.77       99.23
molnupiravir |          5        0.77      100.00
-------------+-----------------------------------
       Total |        653      100.00

. tab drug if drugs_paxlovid_interaction<=start_date&drugs_paxlovid_interaction
> >=(start_date-3*365.25)

        drug |      Freq.     Percent        Cum.
-------------+-----------------------------------
     control |        639       97.86       97.86
  sotrovimab |          4        0.61       98.47
    paxlovid |          5        0.77       99.23
molnupiravir |          5        0.77      100.00
-------------+-----------------------------------
       Total |        653      100.00

. tab drug if drugs_paxlovid_interaction<=start_date&drugs_paxlovid_interaction
> >=(start_date-365.25)

        drug |      Freq.     Percent        Cum.
-------------+-----------------------------------
     control |        529       97.96       97.96
  sotrovimab |          3        0.56       98.52
    paxlovid |          4        0.74       99.26
molnupiravir |          4        0.74      100.00
-------------+-----------------------------------
       Total |        540      100.00

. tab drug if drugs_paxlovid_interaction<=start_date&drugs_paxlovid_interaction
> >=(start_date-180)

        drug |      Freq.     Percent        Cum.
-------------+-----------------------------------
     control |        305       98.07       98.07
    paxlovid |          4        1.29       99.36
molnupiravir |          2        0.64      100.00
-------------+-----------------------------------
       Total |        311      100.00

. tab drug if drugs_nirmatrelvir_interaction<=start_date

        drug |      Freq.     Percent        Cum.
-------------+-----------------------------------
     control |        629       95.16       95.16
  sotrovimab |         12        1.82       96.97
    paxlovid |         12        1.82       98.79
molnupiravir |          8        1.21      100.00
-------------+-----------------------------------
       Total |        661      100.00

. tab drug if drugs_nirmatrelvir_interaction<=start_date&drugs_nirmatrelvir_int
> eraction>=(start_date-3*365.25)

        drug |      Freq.     Percent        Cum.
-------------+-----------------------------------
     control |        629       95.16       95.16
  sotrovimab |         12        1.82       96.97
    paxlovid |         12        1.82       98.79
molnupiravir |          8        1.21      100.00
-------------+-----------------------------------
       Total |        661      100.00

. tab drug if drugs_nirmatrelvir_interaction<=start_date&drugs_nirmatrelvir_int
> eraction>=(start_date-365.25)

        drug |      Freq.     Percent        Cum.
-------------+-----------------------------------
     control |        523       94.75       94.75
  sotrovimab |         12        2.17       96.92
    paxlovid |         11        1.99       98.91
molnupiravir |          6        1.09      100.00
-------------+-----------------------------------
       Total |        552      100.00

. tab drug if drugs_nirmatrelvir_interaction<=start_date&drugs_nirmatrelvir_int
> eraction>=(start_date-180)

        drug |      Freq.     Percent        Cum.
-------------+-----------------------------------
     control |        292       93.59       93.59
  sotrovimab |          8        2.56       96.15
    paxlovid |          7        2.24       98.40
molnupiravir |          5        1.60      100.00
-------------+-----------------------------------
       Total |        312      100.00

. gen paxlovid_interaction=(drugs_paxlovid_interaction<=start_date&drugs_paxlov
> id_interaction>=(start_date-180))  

. gen nirmatrelvir_interaction=(drugs_nirmatrelvir_interaction<=start_date&drug
> s_nirmatrelvir_interaction>=(start_date-180))

. * Drug contraindicated 
. gen paxlovid_contraindicated = 1 if egfr_30==1 | dialysis==1
(21,551 missing values generated)

. replace paxlovid_contraindicated = 1 if liver_disease==1 
(4,217 real changes made)

. replace paxlovid_contraindicated = 1 if organ_transplant==1 
(5,669 real changes made)

. replace paxlovid_contraindicated = 1 if drugs_paxlovid_interaction<=start_dat
> e&drugs_paxlovid_interaction>=(start_date-180)
(147 real changes made)

. recode paxlovid_contraindicated . = 0
(paxlovid_contraindicated: 11518 changes made)

. by drug, sort: count if paxlovid_contraindicated==1

-------------------------------------------------------------------------------
-> drug = control
  12,842
-------------------------------------------------------------------------------
-> drug = sotrovimab
  141
-------------------------------------------------------------------------------
-> drug = paxlovid
  154
-------------------------------------------------------------------------------
-> drug = molnupiravir
  133

. 
. ****************************
. *       COX MODEL               *
. ****************************
. global ae               ae_spc_all                              ///
>                                 ae_drug_all                             ///  
>            
>                                 ae_imae_all                     ///          
>                    
>                                 ae_all                                  ///
>                                 allcause_emerg_aande    ///
>                                 covid_hosp_date                 ///
>                                 all_hosp_date                   ///
>                                 died_date_ons

. 
. * Generate failure 
. foreach x in    $ae $ae_disease ///
>                                 $ae_spc_gp $ae_spc_icd $ae_spc_emerg ///
>                                 $ae_drug_gp $ae_drug_icd $ae_drug_emerg ///
>                                 $ae_imae_gp $ae_imae_icd $ae_imae_emerg ///
>                                 {
  2.         display "`x'"
  3.         by drug, sort: count if `x'!=.
  4.         by drug, sort: count if `x'>=start_date & `x'!=.
  5.         by drug, sort: count if `x'>=start_date & `x'<start_date_29 &`x'!=
> .
  6.         gen fail_`x'=(`x'!=.&`x'<= min(study_end_date, start_date_29, paxl
> ovid, molnupiravir)) if drug==1
  7.         replace fail_`x'=(`x'!=.&`x'<= min(study_end_date, start_date_29, 
> sotrovimab, molnupiravir)) if drug==2
  8.         replace fail_`x'=(`x'!=.&`x'<= min(study_end_date, start_date_29, 
> sotrovimab, paxlovid)) if drug==3
  9.         replace fail_`x'=(`x'!=.&`x'<= min(study_end_date, start_date_29, 
> sotrovimab, paxlovid, molnupiravir)) if drug==0
 10.         tab drug fail_`x', m
 11. }
ae_spc_all

-------------------------------------------------------------------------------
-> drug = control
  23,839
-------------------------------------------------------------------------------
-> drug = sotrovimab
  307
-------------------------------------------------------------------------------
-> drug = paxlovid
  292
-------------------------------------------------------------------------------
-> drug = molnupiravir
  273

-------------------------------------------------------------------------------
-> drug = control
  5,158
-------------------------------------------------------------------------------
-> drug = sotrovimab
  74
-------------------------------------------------------------------------------
-> drug = paxlovid
  59
-------------------------------------------------------------------------------
-> drug = molnupiravir
  46

-------------------------------------------------------------------------------
-> drug = control
  1,043
-------------------------------------------------------------------------------
-> drug = sotrovimab
  14
-------------------------------------------------------------------------------
-> drug = paxlovid
  5
-------------------------------------------------------------------------------
-> drug = molnupiravir
  4
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |    fail_ae_spc_all
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |     4,164     19,749 |    23,913 
  sotrovimab |        59        249 |       308 
    paxlovid |        54        239 |       293 
molnupiravir |        43        231 |       274 
-------------+----------------------+----------
       Total |     4,320     20,468 |    24,788 
ae_drug_all

-------------------------------------------------------------------------------
-> drug = control
  23,708
-------------------------------------------------------------------------------
-> drug = sotrovimab
  301
-------------------------------------------------------------------------------
-> drug = paxlovid
  286
-------------------------------------------------------------------------------
-> drug = molnupiravir
  271

-------------------------------------------------------------------------------
-> drug = control
  5,874
-------------------------------------------------------------------------------
-> drug = sotrovimab
  91
-------------------------------------------------------------------------------
-> drug = paxlovid
  67
-------------------------------------------------------------------------------
-> drug = molnupiravir
  66

-------------------------------------------------------------------------------
-> drug = control
  1,069
-------------------------------------------------------------------------------
-> drug = sotrovimab
  13
-------------------------------------------------------------------------------
-> drug = paxlovid
  10
-------------------------------------------------------------------------------
-> drug = molnupiravir
  10
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |   fail_ae_drug_all
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |     4,975     18,938 |    23,913 
  sotrovimab |        85        223 |       308 
    paxlovid |        62        231 |       293 
molnupiravir |        59        215 |       274 
-------------+----------------------+----------
       Total |     5,181     19,607 |    24,788 
ae_imae_all

-------------------------------------------------------------------------------
-> drug = control
  23,899
-------------------------------------------------------------------------------
-> drug = sotrovimab
  308
-------------------------------------------------------------------------------
-> drug = paxlovid
  292
-------------------------------------------------------------------------------
-> drug = molnupiravir
  274

-------------------------------------------------------------------------------
-> drug = control
  3,732
-------------------------------------------------------------------------------
-> drug = sotrovimab
  45
-------------------------------------------------------------------------------
-> drug = paxlovid
  45
-------------------------------------------------------------------------------
-> drug = molnupiravir
  36

-------------------------------------------------------------------------------
-> drug = control
  998
-------------------------------------------------------------------------------
-> drug = sotrovimab
  17
-------------------------------------------------------------------------------
-> drug = paxlovid
  15
-------------------------------------------------------------------------------
-> drug = molnupiravir
  8
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |   fail_ae_imae_all
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |     2,718     21,195 |    23,913 
  sotrovimab |        28        280 |       308 
    paxlovid |        31        262 |       293 
molnupiravir |        28        246 |       274 
-------------+----------------------+----------
       Total |     2,805     21,983 |    24,788 
ae_all

-------------------------------------------------------------------------------
-> drug = control
  23,913
-------------------------------------------------------------------------------
-> drug = sotrovimab
  308
-------------------------------------------------------------------------------
-> drug = paxlovid
  293
-------------------------------------------------------------------------------
-> drug = molnupiravir
  274

-------------------------------------------------------------------------------
-> drug = control
  1,909
-------------------------------------------------------------------------------
-> drug = sotrovimab
  26
-------------------------------------------------------------------------------
-> drug = paxlovid
  23
-------------------------------------------------------------------------------
-> drug = molnupiravir
  18

-------------------------------------------------------------------------------
-> drug = control
  982
-------------------------------------------------------------------------------
-> drug = sotrovimab
  16
-------------------------------------------------------------------------------
-> drug = paxlovid
  9
-------------------------------------------------------------------------------
-> drug = molnupiravir
  4
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |      fail_ae_all
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |       899     23,014 |    23,913 
  sotrovimab |        10        298 |       308 
    paxlovid |        13        280 |       293 
molnupiravir |        14        260 |       274 
-------------+----------------------+----------
       Total |       936     23,852 |    24,788 
allcause_emerg_aande

-------------------------------------------------------------------------------
-> drug = control
  1,231
-------------------------------------------------------------------------------
-> drug = sotrovimab
  22
-------------------------------------------------------------------------------
-> drug = paxlovid
  12
-------------------------------------------------------------------------------
-> drug = molnupiravir
  21

-------------------------------------------------------------------------------
-> drug = control
  725
-------------------------------------------------------------------------------
-> drug = sotrovimab
  13
-------------------------------------------------------------------------------
-> drug = paxlovid
  6
-------------------------------------------------------------------------------
-> drug = molnupiravir
  10

-------------------------------------------------------------------------------
-> drug = control
  55
-------------------------------------------------------------------------------
-> drug = sotrovimab
  0
-------------------------------------------------------------------------------
-> drug = paxlovid
  1
-------------------------------------------------------------------------------
-> drug = molnupiravir
  1
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_allcause_emerg_a
             |         ande
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    23,351        562 |    23,913 
  sotrovimab |       299          9 |       308 
    paxlovid |       286          7 |       293 
molnupiravir |       262         12 |       274 
-------------+----------------------+----------
       Total |    24,198        590 |    24,788 
covid_hosp_date

-------------------------------------------------------------------------------
-> drug = control
  2,424
-------------------------------------------------------------------------------
-> drug = sotrovimab
  40
-------------------------------------------------------------------------------
-> drug = paxlovid
  35
-------------------------------------------------------------------------------
-> drug = molnupiravir
  34

-------------------------------------------------------------------------------
-> drug = control
  1,362
-------------------------------------------------------------------------------
-> drug = sotrovimab
  25
-------------------------------------------------------------------------------
-> drug = paxlovid
  24
-------------------------------------------------------------------------------
-> drug = molnupiravir
  17

-------------------------------------------------------------------------------
-> drug = control
  139
-------------------------------------------------------------------------------
-> drug = sotrovimab
  4
-------------------------------------------------------------------------------
-> drug = paxlovid
  2
-------------------------------------------------------------------------------
-> drug = molnupiravir
  2
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_covid_hosp_date
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    22,704      1,209 |    23,913 
  sotrovimab |       289         19 |       308 
    paxlovid |       280         13 |       293 
molnupiravir |       255         19 |       274 
-------------+----------------------+----------
       Total |    23,528      1,260 |    24,788 
all_hosp_date

-------------------------------------------------------------------------------
-> drug = control
  2,366
-------------------------------------------------------------------------------
-> drug = sotrovimab
  25
-------------------------------------------------------------------------------
-> drug = paxlovid
  24
-------------------------------------------------------------------------------
-> drug = molnupiravir
  32

-------------------------------------------------------------------------------
-> drug = control
  1,359
-------------------------------------------------------------------------------
-> drug = sotrovimab
  20
-------------------------------------------------------------------------------
-> drug = paxlovid
  18
-------------------------------------------------------------------------------
-> drug = molnupiravir
  19

-------------------------------------------------------------------------------
-> drug = control
  131
-------------------------------------------------------------------------------
-> drug = sotrovimab
  1
-------------------------------------------------------------------------------
-> drug = paxlovid
  2
-------------------------------------------------------------------------------
-> drug = molnupiravir
  3
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |  fail_all_hosp_date
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    22,772      1,141 |    23,913 
  sotrovimab |       302          6 |       308 
    paxlovid |       285          8 |       293 
molnupiravir |       258         16 |       274 
-------------+----------------------+----------
       Total |    23,617      1,171 |    24,788 
died_date_ons

-------------------------------------------------------------------------------
-> drug = control
  14,261
-------------------------------------------------------------------------------
-> drug = sotrovimab
  181
-------------------------------------------------------------------------------
-> drug = paxlovid
  182
-------------------------------------------------------------------------------
-> drug = molnupiravir
  166

-------------------------------------------------------------------------------
-> drug = control
  4,582
-------------------------------------------------------------------------------
-> drug = sotrovimab
  49
-------------------------------------------------------------------------------
-> drug = paxlovid
  49
-------------------------------------------------------------------------------
-> drug = molnupiravir
  47

-------------------------------------------------------------------------------
-> drug = control
  435
-------------------------------------------------------------------------------
-> drug = sotrovimab
  3
-------------------------------------------------------------------------------
-> drug = paxlovid
  7
-------------------------------------------------------------------------------
-> drug = molnupiravir
  4
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |  fail_died_date_ons
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    13,786     10,127 |    23,913 
  sotrovimab |       173        135 |       308 
    paxlovid |       153        140 |       293 
molnupiravir |       150        124 |       274 
-------------+----------------------+----------
       Total |    14,262     10,526 |    24,788 
ae_diverticulitis

-------------------------------------------------------------------------------
-> drug = control
  18,741
-------------------------------------------------------------------------------
-> drug = sotrovimab
  236
-------------------------------------------------------------------------------
-> drug = paxlovid
  238
-------------------------------------------------------------------------------
-> drug = molnupiravir
  214

-------------------------------------------------------------------------------
-> drug = control
  7,955
-------------------------------------------------------------------------------
-> drug = sotrovimab
  94
-------------------------------------------------------------------------------
-> drug = paxlovid
  95
-------------------------------------------------------------------------------
-> drug = molnupiravir
  81

-------------------------------------------------------------------------------
-> drug = control
  903
-------------------------------------------------------------------------------
-> drug = sotrovimab
  12
-------------------------------------------------------------------------------
-> drug = paxlovid
  9
-------------------------------------------------------------------------------
-> drug = molnupiravir
  6
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_ae_diverticuliti
             |           s
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    12,204     11,709 |    23,913 
  sotrovimab |       153        155 |       308 
    paxlovid |       141        152 |       293 
molnupiravir |       135        139 |       274 
-------------+----------------------+----------
       Total |    12,633     12,155 |    24,788 
ae_diarrhoea

-------------------------------------------------------------------------------
-> drug = control
  18,786
-------------------------------------------------------------------------------
-> drug = sotrovimab
  238
-------------------------------------------------------------------------------
-> drug = paxlovid
  227
-------------------------------------------------------------------------------
-> drug = molnupiravir
  218

-------------------------------------------------------------------------------
-> drug = control
  7,977
-------------------------------------------------------------------------------
-> drug = sotrovimab
  120
-------------------------------------------------------------------------------
-> drug = paxlovid
  93
-------------------------------------------------------------------------------
-> drug = molnupiravir
  82

-------------------------------------------------------------------------------
-> drug = control
  892
-------------------------------------------------------------------------------
-> drug = sotrovimab
  12
-------------------------------------------------------------------------------
-> drug = paxlovid
  9
-------------------------------------------------------------------------------
-> drug = molnupiravir
  11
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |   fail_ae_diarrhoea
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    12,194     11,719 |    23,913 
  sotrovimab |       177        131 |       308 
    paxlovid |       149        144 |       293 
molnupiravir |       127        147 |       274 
-------------+----------------------+----------
       Total |    12,647     12,141 |    24,788 
ae_taste

-------------------------------------------------------------------------------
-> drug = control
  15,236
-------------------------------------------------------------------------------
-> drug = sotrovimab
  200
-------------------------------------------------------------------------------
-> drug = paxlovid
  173
-------------------------------------------------------------------------------
-> drug = molnupiravir
  180

-------------------------------------------------------------------------------
-> drug = control
  7,059
-------------------------------------------------------------------------------
-> drug = sotrovimab
  91
-------------------------------------------------------------------------------
-> drug = paxlovid
  73
-------------------------------------------------------------------------------
-> drug = molnupiravir
  66

-------------------------------------------------------------------------------
-> drug = control
  697
-------------------------------------------------------------------------------
-> drug = sotrovimab
  4
-------------------------------------------------------------------------------
-> drug = paxlovid
  4
-------------------------------------------------------------------------------
-> drug = molnupiravir
  9
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |     fail_ae_taste
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    15,011      8,902 |    23,913 
  sotrovimab |       193        115 |       308 
    paxlovid |       188        105 |       293 
molnupiravir |       151        123 |       274 
-------------+----------------------+----------
       Total |    15,543      9,245 |    24,788 
ae_rash

-------------------------------------------------------------------------------
-> drug = control
  18,801
-------------------------------------------------------------------------------
-> drug = sotrovimab
  238
-------------------------------------------------------------------------------
-> drug = paxlovid
  234
-------------------------------------------------------------------------------
-> drug = molnupiravir
  211

-------------------------------------------------------------------------------
-> drug = control
  7,941
-------------------------------------------------------------------------------
-> drug = sotrovimab
  98
-------------------------------------------------------------------------------
-> drug = paxlovid
  99
-------------------------------------------------------------------------------
-> drug = molnupiravir
  86

-------------------------------------------------------------------------------
-> drug = control
  892
-------------------------------------------------------------------------------
-> drug = sotrovimab
  10
-------------------------------------------------------------------------------
-> drug = paxlovid
  8
-------------------------------------------------------------------------------
-> drug = molnupiravir
  6
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |     fail_ae_rash
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    12,137     11,776 |    23,913 
  sotrovimab |       158        150 |       308 
    paxlovid |       150        143 |       293 
molnupiravir |       143        131 |       274 
-------------+----------------------+----------
       Total |    12,588     12,200 |    24,788 
ae_anaphylaxis

-------------------------------------------------------------------------------
-> drug = control
  18,780
-------------------------------------------------------------------------------
-> drug = sotrovimab
  223
-------------------------------------------------------------------------------
-> drug = paxlovid
  229
-------------------------------------------------------------------------------
-> drug = molnupiravir
  215

-------------------------------------------------------------------------------
-> drug = control
  7,973
-------------------------------------------------------------------------------
-> drug = sotrovimab
  93
-------------------------------------------------------------------------------
-> drug = paxlovid
  88
-------------------------------------------------------------------------------
-> drug = molnupiravir
  87

-------------------------------------------------------------------------------
-> drug = control
  806
-------------------------------------------------------------------------------
-> drug = sotrovimab
  7
-------------------------------------------------------------------------------
-> drug = paxlovid
  15
-------------------------------------------------------------------------------
-> drug = molnupiravir
  8
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |  fail_ae_anaphylaxis
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    12,280     11,633 |    23,913 
  sotrovimab |       171        137 |       308 
    paxlovid |       137        156 |       293 
molnupiravir |       138        136 |       274 
-------------+----------------------+----------
       Total |    12,726     12,062 |    24,788 
ae_severe_drug

-------------------------------------------------------------------------------
-> drug = control
  20,793
-------------------------------------------------------------------------------
-> drug = sotrovimab
  264
-------------------------------------------------------------------------------
-> drug = paxlovid
  251
-------------------------------------------------------------------------------
-> drug = molnupiravir
  247

-------------------------------------------------------------------------------
-> drug = control
  8,017
-------------------------------------------------------------------------------
-> drug = sotrovimab
  113
-------------------------------------------------------------------------------
-> drug = paxlovid
  97
-------------------------------------------------------------------------------
-> drug = molnupiravir
  86

-------------------------------------------------------------------------------
-> drug = control
  982
-------------------------------------------------------------------------------
-> drug = sotrovimab
  15
-------------------------------------------------------------------------------
-> drug = paxlovid
  11
-------------------------------------------------------------------------------
-> drug = molnupiravir
  7
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |  fail_ae_severe_drug
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    10,118     13,795 |    23,913 
  sotrovimab |       142        166 |       308 
    paxlovid |       128        165 |       293 
molnupiravir |       106        168 |       274 
-------------+----------------------+----------
       Total |    10,494     14,294 |    24,788 
ae_nonsevere_drug

-------------------------------------------------------------------------------
-> drug = control
  15,336
-------------------------------------------------------------------------------
-> drug = sotrovimab
  189
-------------------------------------------------------------------------------
-> drug = paxlovid
  206
-------------------------------------------------------------------------------
-> drug = molnupiravir
  172

-------------------------------------------------------------------------------
-> drug = control
  7,044
-------------------------------------------------------------------------------
-> drug = sotrovimab
  94
-------------------------------------------------------------------------------
-> drug = paxlovid
  79
-------------------------------------------------------------------------------
-> drug = molnupiravir
  80

-------------------------------------------------------------------------------
-> drug = control
  714
-------------------------------------------------------------------------------
-> drug = sotrovimab
  8
-------------------------------------------------------------------------------
-> drug = paxlovid
  10
-------------------------------------------------------------------------------
-> drug = molnupiravir
  11
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_ae_nonsevere_dru
             |           g
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    14,888      9,025 |    23,913 
  sotrovimab |       205        103 |       308 
    paxlovid |       153        140 |       293 
molnupiravir |       171        103 |       274 
-------------+----------------------+----------
       Total |    15,417      9,371 |    24,788 
ae_ra

-------------------------------------------------------------------------------
-> drug = control
  16,804
-------------------------------------------------------------------------------
-> drug = sotrovimab
  218
-------------------------------------------------------------------------------
-> drug = paxlovid
  187
-------------------------------------------------------------------------------
-> drug = molnupiravir
  178

-------------------------------------------------------------------------------
-> drug = control
  7,016
-------------------------------------------------------------------------------
-> drug = sotrovimab
  88
-------------------------------------------------------------------------------
-> drug = paxlovid
  68
-------------------------------------------------------------------------------
-> drug = molnupiravir
  79

-------------------------------------------------------------------------------
-> drug = control
  774
-------------------------------------------------------------------------------
-> drug = sotrovimab
  4
-------------------------------------------------------------------------------
-> drug = paxlovid
  8
-------------------------------------------------------------------------------
-> drug = molnupiravir
  13
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |      fail_ae_ra
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    13,317     10,596 |    23,913 
  sotrovimab |       174        134 |       308 
    paxlovid |       166        127 |       293 
molnupiravir |       162        112 |       274 
-------------+----------------------+----------
       Total |    13,819     10,969 |    24,788 
ae_sle

-------------------------------------------------------------------------------
-> drug = control
  16,761
-------------------------------------------------------------------------------
-> drug = sotrovimab
  219
-------------------------------------------------------------------------------
-> drug = paxlovid
  215
-------------------------------------------------------------------------------
-> drug = molnupiravir
  198

-------------------------------------------------------------------------------
-> drug = control
  7,086
-------------------------------------------------------------------------------
-> drug = sotrovimab
  93
-------------------------------------------------------------------------------
-> drug = paxlovid
  91
-------------------------------------------------------------------------------
-> drug = molnupiravir
  69

-------------------------------------------------------------------------------
-> drug = control
  771
-------------------------------------------------------------------------------
-> drug = sotrovimab
  12
-------------------------------------------------------------------------------
-> drug = paxlovid
  13
-------------------------------------------------------------------------------
-> drug = molnupiravir
  8
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |      fail_ae_sle
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    13,447     10,466 |    23,913 
  sotrovimab |       170        138 |       308 
    paxlovid |       156        137 |       293 
molnupiravir |       137        137 |       274 
-------------+----------------------+----------
       Total |    13,910     10,878 |    24,788 
ae_psorasis

-------------------------------------------------------------------------------
-> drug = control
  16,774
-------------------------------------------------------------------------------
-> drug = sotrovimab
  213
-------------------------------------------------------------------------------
-> drug = paxlovid
  204
-------------------------------------------------------------------------------
-> drug = molnupiravir
  202

-------------------------------------------------------------------------------
-> drug = control
  7,124
-------------------------------------------------------------------------------
-> drug = sotrovimab
  86
-------------------------------------------------------------------------------
-> drug = paxlovid
  83
-------------------------------------------------------------------------------
-> drug = molnupiravir
  72

-------------------------------------------------------------------------------
-> drug = control
  756
-------------------------------------------------------------------------------
-> drug = sotrovimab
  7
-------------------------------------------------------------------------------
-> drug = paxlovid
  15
-------------------------------------------------------------------------------
-> drug = molnupiravir
  7
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |   fail_ae_psorasis
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    13,486     10,427 |    23,913 
  sotrovimab |       174        134 |       308 
    paxlovid |       157        136 |       293 
molnupiravir |       137        137 |       274 
-------------+----------------------+----------
       Total |    13,954     10,834 |    24,788 
ae_psa

-------------------------------------------------------------------------------
-> drug = control
  16,850
-------------------------------------------------------------------------------
-> drug = sotrovimab
  210
-------------------------------------------------------------------------------
-> drug = paxlovid
  206
-------------------------------------------------------------------------------
-> drug = molnupiravir
  205

-------------------------------------------------------------------------------
-> drug = control
  7,148
-------------------------------------------------------------------------------
-> drug = sotrovimab
  93
-------------------------------------------------------------------------------
-> drug = paxlovid
  89
-------------------------------------------------------------------------------
-> drug = molnupiravir
  87

-------------------------------------------------------------------------------
-> drug = control
  763
-------------------------------------------------------------------------------
-> drug = sotrovimab
  10
-------------------------------------------------------------------------------
-> drug = paxlovid
  7
-------------------------------------------------------------------------------
-> drug = molnupiravir
  5
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |      fail_ae_psa
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    13,422     10,491 |    23,913 
  sotrovimab |       181        127 |       308 
    paxlovid |       169        124 |       293 
molnupiravir |       151        123 |       274 
-------------+----------------------+----------
       Total |    13,923     10,865 |    24,788 
ae_axspa

-------------------------------------------------------------------------------
-> drug = control
  16,953
-------------------------------------------------------------------------------
-> drug = sotrovimab
  213
-------------------------------------------------------------------------------
-> drug = paxlovid
  199
-------------------------------------------------------------------------------
-> drug = molnupiravir
  195

-------------------------------------------------------------------------------
-> drug = control
  7,245
-------------------------------------------------------------------------------
-> drug = sotrovimab
  90
-------------------------------------------------------------------------------
-> drug = paxlovid
  74
-------------------------------------------------------------------------------
-> drug = molnupiravir
  95

-------------------------------------------------------------------------------
-> drug = control
  743
-------------------------------------------------------------------------------
-> drug = sotrovimab
  12
-------------------------------------------------------------------------------
-> drug = paxlovid
  14
-------------------------------------------------------------------------------
-> drug = molnupiravir
  9
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |     fail_ae_axspa
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    13,433     10,480 |    23,913 
  sotrovimab |       173        135 |       308 
    paxlovid |       154        139 |       293 
molnupiravir |       165        109 |       274 
-------------+----------------------+----------
       Total |    13,925     10,863 |    24,788 
ae_ibd

-------------------------------------------------------------------------------
-> drug = control
  16,900
-------------------------------------------------------------------------------
-> drug = sotrovimab
  221
-------------------------------------------------------------------------------
-> drug = paxlovid
  204
-------------------------------------------------------------------------------
-> drug = molnupiravir
  199

-------------------------------------------------------------------------------
-> drug = control
  7,164
-------------------------------------------------------------------------------
-> drug = sotrovimab
  94
-------------------------------------------------------------------------------
-> drug = paxlovid
  86
-------------------------------------------------------------------------------
-> drug = molnupiravir
  86

-------------------------------------------------------------------------------
-> drug = control
  784
-------------------------------------------------------------------------------
-> drug = sotrovimab
  11
-------------------------------------------------------------------------------
-> drug = paxlovid
  9
-------------------------------------------------------------------------------
-> drug = molnupiravir
  11
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |      fail_ae_ibd
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    13,379     10,534 |    23,913 
  sotrovimab |       170        138 |       308 
    paxlovid |       166        127 |       293 
molnupiravir |       150        124 |       274 
-------------+----------------------+----------
       Total |    13,865     10,923 |    24,788 
ae_diverticulitis_snomed

-------------------------------------------------------------------------------
-> drug = control
  9,504
-------------------------------------------------------------------------------
-> drug = sotrovimab
  124
-------------------------------------------------------------------------------
-> drug = paxlovid
  115
-------------------------------------------------------------------------------
-> drug = molnupiravir
  108

-------------------------------------------------------------------------------
-> drug = control
  4,839
-------------------------------------------------------------------------------
-> drug = sotrovimab
  58
-------------------------------------------------------------------------------
-> drug = paxlovid
  61
-------------------------------------------------------------------------------
-> drug = molnupiravir
  55

-------------------------------------------------------------------------------
-> drug = control
  450
-------------------------------------------------------------------------------
-> drug = sotrovimab
  7
-------------------------------------------------------------------------------
-> drug = paxlovid
  4
-------------------------------------------------------------------------------
-> drug = molnupiravir
  6
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_ae_diverticuliti
             |       s_snomed
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    18,782      5,131 |    23,913 
  sotrovimab |       235         73 |       308 
    paxlovid |       235         58 |       293 
molnupiravir |       215         59 |       274 
-------------+----------------------+----------
       Total |    19,467      5,321 |    24,788 
ae_diarrhoea_snomed

-------------------------------------------------------------------------------
-> drug = control
  9,587
-------------------------------------------------------------------------------
-> drug = sotrovimab
  109
-------------------------------------------------------------------------------
-> drug = paxlovid
  120
-------------------------------------------------------------------------------
-> drug = molnupiravir
  117

-------------------------------------------------------------------------------
-> drug = control
  4,907
-------------------------------------------------------------------------------
-> drug = sotrovimab
  58
-------------------------------------------------------------------------------
-> drug = paxlovid
  68
-------------------------------------------------------------------------------
-> drug = molnupiravir
  58

-------------------------------------------------------------------------------
-> drug = control
  437
-------------------------------------------------------------------------------
-> drug = sotrovimab
  5
-------------------------------------------------------------------------------
-> drug = paxlovid
  6
-------------------------------------------------------------------------------
-> drug = molnupiravir
  8
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_ae_diarrhoea_sno
             |          med
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    18,786      5,127 |    23,913 
  sotrovimab |       252         56 |       308 
    paxlovid |       235         58 |       293 
molnupiravir |       207         67 |       274 
-------------+----------------------+----------
       Total |    19,480      5,308 |    24,788 
ae_taste_snomed

-------------------------------------------------------------------------------
-> drug = control
  9,560
-------------------------------------------------------------------------------
-> drug = sotrovimab
  122
-------------------------------------------------------------------------------
-> drug = paxlovid
  109
-------------------------------------------------------------------------------
-> drug = molnupiravir
  120

-------------------------------------------------------------------------------
-> drug = control
  4,803
-------------------------------------------------------------------------------
-> drug = sotrovimab
  58
-------------------------------------------------------------------------------
-> drug = paxlovid
  46
-------------------------------------------------------------------------------
-> drug = molnupiravir
  47

-------------------------------------------------------------------------------
-> drug = control
  400
-------------------------------------------------------------------------------
-> drug = sotrovimab
  1
-------------------------------------------------------------------------------
-> drug = paxlovid
  2
-------------------------------------------------------------------------------
-> drug = molnupiravir
  7
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_ae_taste_snomed
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    18,745      5,168 |    23,913 
  sotrovimab |       243         65 |       308 
    paxlovid |       227         66 |       293 
molnupiravir |       194         80 |       274 
-------------+----------------------+----------
       Total |    19,409      5,379 |    24,788 
ae_rash_snomed

-------------------------------------------------------------------------------
-> drug = control
  9,552
-------------------------------------------------------------------------------
-> drug = sotrovimab
  113
-------------------------------------------------------------------------------
-> drug = paxlovid
  114
-------------------------------------------------------------------------------
-> drug = molnupiravir
  112

-------------------------------------------------------------------------------
-> drug = control
  4,739
-------------------------------------------------------------------------------
-> drug = sotrovimab
  66
-------------------------------------------------------------------------------
-> drug = paxlovid
  59
-------------------------------------------------------------------------------
-> drug = molnupiravir
  49

-------------------------------------------------------------------------------
-> drug = control
  441
-------------------------------------------------------------------------------
-> drug = sotrovimab
  10
-------------------------------------------------------------------------------
-> drug = paxlovid
  5
-------------------------------------------------------------------------------
-> drug = molnupiravir
  2
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |  fail_ae_rash_snomed
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    18,643      5,270 |    23,913 
  sotrovimab |       251         57 |       308 
    paxlovid |       233         60 |       293 
molnupiravir |       209         65 |       274 
-------------+----------------------+----------
       Total |    19,336      5,452 |    24,788 
ae_diverticulitis_icd_prim

-------------------------------------------------------------------------------
-> drug = control
  9,605
-------------------------------------------------------------------------------
-> drug = sotrovimab
  128
-------------------------------------------------------------------------------
-> drug = paxlovid
  113
-------------------------------------------------------------------------------
-> drug = molnupiravir
  109

-------------------------------------------------------------------------------
-> drug = control
  4,849
-------------------------------------------------------------------------------
-> drug = sotrovimab
  62
-------------------------------------------------------------------------------
-> drug = paxlovid
  52
-------------------------------------------------------------------------------
-> drug = molnupiravir
  53

-------------------------------------------------------------------------------
-> drug = control
  473
-------------------------------------------------------------------------------
-> drug = sotrovimab
  7
-------------------------------------------------------------------------------
-> drug = paxlovid
  5
-------------------------------------------------------------------------------
-> drug = molnupiravir
  3
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_ae_diverticuliti
             |      s_icd_prim
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    18,671      5,242 |    23,913 
  sotrovimab |       234         74 |       308 
    paxlovid |       227         66 |       293 
molnupiravir |       215         59 |       274 
-------------+----------------------+----------
       Total |    19,347      5,441 |    24,788 
ae_taste_icd_prim

-------------------------------------------------------------------------------
-> drug = control
  9,522
-------------------------------------------------------------------------------
-> drug = sotrovimab
  117
-------------------------------------------------------------------------------
-> drug = paxlovid
  106
-------------------------------------------------------------------------------
-> drug = molnupiravir
  100

-------------------------------------------------------------------------------
-> drug = control
  4,779
-------------------------------------------------------------------------------
-> drug = sotrovimab
  58
-------------------------------------------------------------------------------
-> drug = paxlovid
  52
-------------------------------------------------------------------------------
-> drug = molnupiravir
  47

-------------------------------------------------------------------------------
-> drug = control
  459
-------------------------------------------------------------------------------
-> drug = sotrovimab
  3
-------------------------------------------------------------------------------
-> drug = paxlovid
  3
-------------------------------------------------------------------------------
-> drug = molnupiravir
  6
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_ae_taste_icd_pri
             |           m
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    18,693      5,220 |    23,913 
  sotrovimab |       244         64 |       308 
    paxlovid |       236         57 |       293 
molnupiravir |       215         59 |       274 
-------------+----------------------+----------
       Total |    19,388      5,400 |    24,788 
ae_rash_icd_prim

-------------------------------------------------------------------------------
-> drug = control
  9,534
-------------------------------------------------------------------------------
-> drug = sotrovimab
  123
-------------------------------------------------------------------------------
-> drug = paxlovid
  122
-------------------------------------------------------------------------------
-> drug = molnupiravir
  107

-------------------------------------------------------------------------------
-> drug = control
  4,759
-------------------------------------------------------------------------------
-> drug = sotrovimab
  66
-------------------------------------------------------------------------------
-> drug = paxlovid
  58
-------------------------------------------------------------------------------
-> drug = molnupiravir
  49

-------------------------------------------------------------------------------
-> drug = control
  451
-------------------------------------------------------------------------------
-> drug = sotrovimab
  5
-------------------------------------------------------------------------------
-> drug = paxlovid
  5
-------------------------------------------------------------------------------
-> drug = molnupiravir
  5
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_ae_rash_icd_prim
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    18,676      5,237 |    23,913 
  sotrovimab |       246         62 |       308 
    paxlovid |       224         69 |       293 
molnupiravir |       211         63 |       274 
-------------+----------------------+----------
       Total |    19,357      5,431 |    24,788 
ae_diarrhoea_icd_prim

-------------------------------------------------------------------------------
-> drug = control
  9,553
-------------------------------------------------------------------------------
-> drug = sotrovimab
  127
-------------------------------------------------------------------------------
-> drug = paxlovid
  122
-------------------------------------------------------------------------------
-> drug = molnupiravir
  100

-------------------------------------------------------------------------------
-> drug = control
  4,825
-------------------------------------------------------------------------------
-> drug = sotrovimab
  79
-------------------------------------------------------------------------------
-> drug = paxlovid
  55
-------------------------------------------------------------------------------
-> drug = molnupiravir
  47

-------------------------------------------------------------------------------
-> drug = control
  440
-------------------------------------------------------------------------------
-> drug = sotrovimab
  6
-------------------------------------------------------------------------------
-> drug = paxlovid
  5
-------------------------------------------------------------------------------
-> drug = molnupiravir
  3
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_ae_diarrhoea_icd
             |         _prim
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    18,731      5,182 |    23,913 
  sotrovimab |       253         55 |       308 
    paxlovid |       220         73 |       293 
molnupiravir |       218         56 |       274 
-------------+----------------------+----------
       Total |    19,422      5,366 |    24,788 
ae_diarrhoeal_icd_prim

-------------------------------------------------------------------------------
-> drug = control
  9,592
-------------------------------------------------------------------------------
-> drug = sotrovimab
  125
-------------------------------------------------------------------------------
-> drug = paxlovid
  122
-------------------------------------------------------------------------------
-> drug = molnupiravir
  112

-------------------------------------------------------------------------------
-> drug = control
  4,827
-------------------------------------------------------------------------------
-> drug = sotrovimab
  71
-------------------------------------------------------------------------------
-> drug = paxlovid
  63
-------------------------------------------------------------------------------
-> drug = molnupiravir
  47

-------------------------------------------------------------------------------
-> drug = control
  479
-------------------------------------------------------------------------------
-> drug = sotrovimab
  11
-------------------------------------------------------------------------------
-> drug = paxlovid
  4
-------------------------------------------------------------------------------
-> drug = molnupiravir
  4
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_ae_diarrhoeal_ic
             |        d_prim
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    18,660      5,253 |    23,913 
  sotrovimab |       243         65 |       308 
    paxlovid |       230         63 |       293 
molnupiravir |       205         69 |       274 
-------------+----------------------+----------
       Total |    19,338      5,450 |    24,788 
ae_diverticulitis_ae

-------------------------------------------------------------------------------
-> drug = control
  9,523
-------------------------------------------------------------------------------
-> drug = sotrovimab
  107
-------------------------------------------------------------------------------
-> drug = paxlovid
  117
-------------------------------------------------------------------------------
-> drug = molnupiravir
  111

-------------------------------------------------------------------------------
-> drug = control
  4,754
-------------------------------------------------------------------------------
-> drug = sotrovimab
  54
-------------------------------------------------------------------------------
-> drug = paxlovid
  53
-------------------------------------------------------------------------------
-> drug = molnupiravir
  42

-------------------------------------------------------------------------------
-> drug = control
  442
-------------------------------------------------------------------------------
-> drug = sotrovimab
  7
-------------------------------------------------------------------------------
-> drug = paxlovid
  6
-------------------------------------------------------------------------------
-> drug = molnupiravir
  3
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_ae_diverticuliti
             |         s_ae
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    18,688      5,225 |    23,913 
  sotrovimab |       248         60 |       308 
    paxlovid |       223         70 |       293 
molnupiravir |       202         72 |       274 
-------------+----------------------+----------
       Total |    19,361      5,427 |    24,788 
ae_rash_ae

-------------------------------------------------------------------------------
-> drug = control
  9,532
-------------------------------------------------------------------------------
-> drug = sotrovimab
  120
-------------------------------------------------------------------------------
-> drug = paxlovid
  109
-------------------------------------------------------------------------------
-> drug = molnupiravir
  109

-------------------------------------------------------------------------------
-> drug = control
  4,810
-------------------------------------------------------------------------------
-> drug = sotrovimab
  46
-------------------------------------------------------------------------------
-> drug = paxlovid
  57
-------------------------------------------------------------------------------
-> drug = molnupiravir
  53

-------------------------------------------------------------------------------
-> drug = control
  453
-------------------------------------------------------------------------------
-> drug = sotrovimab
  2
-------------------------------------------------------------------------------
-> drug = paxlovid
  1
-------------------------------------------------------------------------------
-> drug = molnupiravir
  3
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |    fail_ae_rash_ae
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    18,726      5,187 |    23,913 
  sotrovimab |       232         76 |       308 
    paxlovid |       240         53 |       293 
molnupiravir |       215         59 |       274 
-------------+----------------------+----------
       Total |    19,413      5,375 |    24,788 
ae_anaphylaxis_snomed

-------------------------------------------------------------------------------
-> drug = control
  9,495
-------------------------------------------------------------------------------
-> drug = sotrovimab
  107
-------------------------------------------------------------------------------
-> drug = paxlovid
  102
-------------------------------------------------------------------------------
-> drug = molnupiravir
  118

-------------------------------------------------------------------------------
-> drug = control
  4,764
-------------------------------------------------------------------------------
-> drug = sotrovimab
  46
-------------------------------------------------------------------------------
-> drug = paxlovid
  54
-------------------------------------------------------------------------------
-> drug = molnupiravir
  58

-------------------------------------------------------------------------------
-> drug = control
  401
-------------------------------------------------------------------------------
-> drug = sotrovimab
  2
-------------------------------------------------------------------------------
-> drug = paxlovid
  7
-------------------------------------------------------------------------------
-> drug = molnupiravir
  1
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_ae_anaphylaxis_s
             |         nomed
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    18,765      5,148 |    23,913 
  sotrovimab |       245         63 |       308 
    paxlovid |       238         55 |       293 
molnupiravir |       213         61 |       274 
-------------+----------------------+----------
       Total |    19,461      5,327 |    24,788 
ae_severedrug_snomed

-------------------------------------------------------------------------------
-> drug = control
  9,608
-------------------------------------------------------------------------------
-> drug = sotrovimab
  119
-------------------------------------------------------------------------------
-> drug = paxlovid
  117
-------------------------------------------------------------------------------
-> drug = molnupiravir
  110

-------------------------------------------------------------------------------
-> drug = control
  4,837
-------------------------------------------------------------------------------
-> drug = sotrovimab
  64
-------------------------------------------------------------------------------
-> drug = paxlovid
  51
-------------------------------------------------------------------------------
-> drug = molnupiravir
  47

-------------------------------------------------------------------------------
-> drug = control
  455
-------------------------------------------------------------------------------
-> drug = sotrovimab
  5
-------------------------------------------------------------------------------
-> drug = paxlovid
  8
-------------------------------------------------------------------------------
-> drug = molnupiravir
  3
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_ae_severedrug_sn
             |         omed
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    18,673      5,240 |    23,913 
  sotrovimab |       248         60 |       308 
    paxlovid |       219         74 |       293 
molnupiravir |       208         66 |       274 
-------------+----------------------+----------
       Total |    19,348      5,440 |    24,788 
ae_nonsevere_drug_snomed

-------------------------------------------------------------------------------
-> drug = control
  9,587
-------------------------------------------------------------------------------
-> drug = sotrovimab
  118
-------------------------------------------------------------------------------
-> drug = paxlovid
  135
-------------------------------------------------------------------------------
-> drug = molnupiravir
  103

-------------------------------------------------------------------------------
-> drug = control
  4,720
-------------------------------------------------------------------------------
-> drug = sotrovimab
  65
-------------------------------------------------------------------------------
-> drug = paxlovid
  63
-------------------------------------------------------------------------------
-> drug = molnupiravir
  54

-------------------------------------------------------------------------------
-> drug = control
  454
-------------------------------------------------------------------------------
-> drug = sotrovimab
  4
-------------------------------------------------------------------------------
-> drug = paxlovid
  5
-------------------------------------------------------------------------------
-> drug = molnupiravir
  7
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_ae_nonsevere_dru
             |       g_snomed
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    18,577      5,336 |    23,913 
  sotrovimab |       250         58 |       308 
    paxlovid |       216         77 |       293 
molnupiravir |       218         56 |       274 
-------------+----------------------+----------
       Total |    19,261      5,527 |    24,788 
ae_anaphylaxis_icd_prim

-------------------------------------------------------------------------------
-> drug = control
  9,574
-------------------------------------------------------------------------------
-> drug = sotrovimab
  113
-------------------------------------------------------------------------------
-> drug = paxlovid
  123
-------------------------------------------------------------------------------
-> drug = molnupiravir
  109

-------------------------------------------------------------------------------
-> drug = control
  4,885
-------------------------------------------------------------------------------
-> drug = sotrovimab
  57
-------------------------------------------------------------------------------
-> drug = paxlovid
  58
-------------------------------------------------------------------------------
-> drug = molnupiravir
  52

-------------------------------------------------------------------------------
-> drug = control
  421
-------------------------------------------------------------------------------
-> drug = sotrovimab
  2
-------------------------------------------------------------------------------
-> drug = paxlovid
  7
-------------------------------------------------------------------------------
-> drug = molnupiravir
  7
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_ae_anaphylaxis_i
             |        cd_prim
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    18,796      5,117 |    23,913 
  sotrovimab |       250         58 |       308 
    paxlovid |       221         72 |       293 
molnupiravir |       210         64 |       274 
-------------+----------------------+----------
       Total |    19,477      5,311 |    24,788 
ae_severedrug_icd_prim

-------------------------------------------------------------------------------
-> drug = control
  9,517
-------------------------------------------------------------------------------
-> drug = sotrovimab
  116
-------------------------------------------------------------------------------
-> drug = paxlovid
  113
-------------------------------------------------------------------------------
-> drug = molnupiravir
  130

-------------------------------------------------------------------------------
-> drug = control
  4,824
-------------------------------------------------------------------------------
-> drug = sotrovimab
  65
-------------------------------------------------------------------------------
-> drug = paxlovid
  60
-------------------------------------------------------------------------------
-> drug = molnupiravir
  69

-------------------------------------------------------------------------------
-> drug = control
  475
-------------------------------------------------------------------------------
-> drug = sotrovimab
  7
-------------------------------------------------------------------------------
-> drug = paxlovid
  1
-------------------------------------------------------------------------------
-> drug = molnupiravir
  5
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_ae_severedrug_ic
             |        d_prim
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    18,734      5,179 |    23,913 
  sotrovimab |       250         58 |       308 
    paxlovid |       239         54 |       293 
molnupiravir |       208         66 |       274 
-------------+----------------------+----------
       Total |    19,431      5,357 |    24,788 
ae_severedrug_sjs_icd_prim

-------------------------------------------------------------------------------
-> drug = control
  9,554
-------------------------------------------------------------------------------
-> drug = sotrovimab
  120
-------------------------------------------------------------------------------
-> drug = paxlovid
  101
-------------------------------------------------------------------------------
-> drug = molnupiravir
  112

-------------------------------------------------------------------------------
-> drug = control
  4,680
-------------------------------------------------------------------------------
-> drug = sotrovimab
  60
-------------------------------------------------------------------------------
-> drug = paxlovid
  53
-------------------------------------------------------------------------------
-> drug = molnupiravir
  62

-------------------------------------------------------------------------------
-> drug = control
  433
-------------------------------------------------------------------------------
-> drug = sotrovimab
  4
-------------------------------------------------------------------------------
-> drug = paxlovid
  4
-------------------------------------------------------------------------------
-> drug = molnupiravir
  5
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_ae_severedrug_sj
             |      s_icd_prim
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    18,587      5,326 |    23,913 
  sotrovimab |       244         64 |       308 
    paxlovid |       240         53 |       293 
molnupiravir |       219         55 |       274 
-------------+----------------------+----------
       Total |    19,290      5,498 |    24,788 
ae_anaphlaxis_ae

-------------------------------------------------------------------------------
-> drug = control
  9,588
-------------------------------------------------------------------------------
-> drug = sotrovimab
  111
-------------------------------------------------------------------------------
-> drug = paxlovid
  121
-------------------------------------------------------------------------------
-> drug = molnupiravir
  103

-------------------------------------------------------------------------------
-> drug = control
  4,911
-------------------------------------------------------------------------------
-> drug = sotrovimab
  52
-------------------------------------------------------------------------------
-> drug = paxlovid
  54
-------------------------------------------------------------------------------
-> drug = molnupiravir
  49

-------------------------------------------------------------------------------
-> drug = control
  448
-------------------------------------------------------------------------------
-> drug = sotrovimab
  7
-------------------------------------------------------------------------------
-> drug = paxlovid
  5
-------------------------------------------------------------------------------
-> drug = molnupiravir
  3
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_ae_anaphlaxis_ae
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    18,774      5,139 |    23,913 
  sotrovimab |       242         66 |       308 
    paxlovid |       221         72 |       293 
molnupiravir |       217         57 |       274 
-------------+----------------------+----------
       Total |    19,454      5,334 |    24,788 
ae_severedrug_ae

-------------------------------------------------------------------------------
-> drug = control
  9,647
-------------------------------------------------------------------------------
-> drug = sotrovimab
  134
-------------------------------------------------------------------------------
-> drug = paxlovid
  100
-------------------------------------------------------------------------------
-> drug = molnupiravir
  114

-------------------------------------------------------------------------------
-> drug = control
  4,848
-------------------------------------------------------------------------------
-> drug = sotrovimab
  71
-------------------------------------------------------------------------------
-> drug = paxlovid
  51
-------------------------------------------------------------------------------
-> drug = molnupiravir
  45

-------------------------------------------------------------------------------
-> drug = control
  435
-------------------------------------------------------------------------------
-> drug = sotrovimab
  8
-------------------------------------------------------------------------------
-> drug = paxlovid
  11
-------------------------------------------------------------------------------
-> drug = molnupiravir
  3
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_ae_severedrug_ae
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    18,662      5,251 |    23,913 
  sotrovimab |       237         71 |       308 
    paxlovid |       232         61 |       293 
molnupiravir |       202         72 |       274 
-------------+----------------------+----------
       Total |    19,333      5,455 |    24,788 
ae_nonsevere_drug_ae

-------------------------------------------------------------------------------
-> drug = control
  9,495
-------------------------------------------------------------------------------
-> drug = sotrovimab
  117
-------------------------------------------------------------------------------
-> drug = paxlovid
  136
-------------------------------------------------------------------------------
-> drug = molnupiravir
  112

-------------------------------------------------------------------------------
-> drug = control
  4,821
-------------------------------------------------------------------------------
-> drug = sotrovimab
  56
-------------------------------------------------------------------------------
-> drug = paxlovid
  53
-------------------------------------------------------------------------------
-> drug = molnupiravir
  55

-------------------------------------------------------------------------------
-> drug = control
  458
-------------------------------------------------------------------------------
-> drug = sotrovimab
  5
-------------------------------------------------------------------------------
-> drug = paxlovid
  8
-------------------------------------------------------------------------------
-> drug = molnupiravir
  8
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_ae_nonsevere_dru
             |         g_ae
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    18,770      5,143 |    23,913 
  sotrovimab |       242         66 |       308 
    paxlovid |       199         94 |       293 
molnupiravir |       209         65 |       274 
-------------+----------------------+----------
       Total |    19,420      5,368 |    24,788 
new_ae_ra_snomed

-------------------------------------------------------------------------------
-> drug = control
  8,649
-------------------------------------------------------------------------------
-> drug = sotrovimab
  104
-------------------------------------------------------------------------------
-> drug = paxlovid
  83
-------------------------------------------------------------------------------
-> drug = molnupiravir
  104

-------------------------------------------------------------------------------
-> drug = control
  4,286
-------------------------------------------------------------------------------
-> drug = sotrovimab
  49
-------------------------------------------------------------------------------
-> drug = paxlovid
  32
-------------------------------------------------------------------------------
-> drug = molnupiravir
  67

-------------------------------------------------------------------------------
-> drug = control
  369
-------------------------------------------------------------------------------
-> drug = sotrovimab
  1
-------------------------------------------------------------------------------
-> drug = paxlovid
  1
-------------------------------------------------------------------------------
-> drug = molnupiravir
  9
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_new_ae_ra_snomed
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    19,159      4,754 |    23,913 
  sotrovimab |       252         56 |       308 
    paxlovid |       241         52 |       293 
molnupiravir |       228         46 |       274 
-------------+----------------------+----------
       Total |    19,880      4,908 |    24,788 
new_ae_sle_ctv

-------------------------------------------------------------------------------
-> drug = control
  8,647
-------------------------------------------------------------------------------
-> drug = sotrovimab
  117
-------------------------------------------------------------------------------
-> drug = paxlovid
  98
-------------------------------------------------------------------------------
-> drug = molnupiravir
  113

-------------------------------------------------------------------------------
-> drug = control
  4,353
-------------------------------------------------------------------------------
-> drug = sotrovimab
  60
-------------------------------------------------------------------------------
-> drug = paxlovid
  41
-------------------------------------------------------------------------------
-> drug = molnupiravir
  54

-------------------------------------------------------------------------------
-> drug = control
  404
-------------------------------------------------------------------------------
-> drug = sotrovimab
  8
-------------------------------------------------------------------------------
-> drug = paxlovid
  4
-------------------------------------------------------------------------------
-> drug = molnupiravir
  6
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |  fail_new_ae_sle_ctv
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    19,203      4,710 |    23,913 
  sotrovimab |       243         65 |       308 
    paxlovid |       232         61 |       293 
molnupiravir |       209         65 |       274 
-------------+----------------------+----------
       Total |    19,887      4,901 |    24,788 
new_ae_psoriasis_snomed

-------------------------------------------------------------------------------
-> drug = control
  8,594
-------------------------------------------------------------------------------
-> drug = sotrovimab
  93
-------------------------------------------------------------------------------
-> drug = paxlovid
  89
-------------------------------------------------------------------------------
-> drug = molnupiravir
  101

-------------------------------------------------------------------------------
-> drug = control
  4,337
-------------------------------------------------------------------------------
-> drug = sotrovimab
  46
-------------------------------------------------------------------------------
-> drug = paxlovid
  32
-------------------------------------------------------------------------------
-> drug = molnupiravir
  41

-------------------------------------------------------------------------------
-> drug = control
  382
-------------------------------------------------------------------------------
-> drug = sotrovimab
  4
-------------------------------------------------------------------------------
-> drug = paxlovid
  4
-------------------------------------------------------------------------------
-> drug = molnupiravir
  2
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_new_ae_psoriasis
             |        _snomed
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    19,262      4,651 |    23,913 
  sotrovimab |       257         51 |       308 
    paxlovid |       232         61 |       293 
molnupiravir |       212         62 |       274 
-------------+----------------------+----------
       Total |    19,963      4,825 |    24,788 
new_ae_psa_snomed

-------------------------------------------------------------------------------
-> drug = control
  8,600
-------------------------------------------------------------------------------
-> drug = sotrovimab
  103
-------------------------------------------------------------------------------
-> drug = paxlovid
  95
-------------------------------------------------------------------------------
-> drug = molnupiravir
  106

-------------------------------------------------------------------------------
-> drug = control
  4,325
-------------------------------------------------------------------------------
-> drug = sotrovimab
  49
-------------------------------------------------------------------------------
-> drug = paxlovid
  45
-------------------------------------------------------------------------------
-> drug = molnupiravir
  51

-------------------------------------------------------------------------------
-> drug = control
  414
-------------------------------------------------------------------------------
-> drug = sotrovimab
  3
-------------------------------------------------------------------------------
-> drug = paxlovid
  4
-------------------------------------------------------------------------------
-> drug = molnupiravir
  3
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_new_ae_psa_snome
             |           d
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    19,208      4,705 |    23,913 
  sotrovimab |       251         57 |       308 
    paxlovid |       239         54 |       293 
molnupiravir |       216         58 |       274 
-------------+----------------------+----------
       Total |    19,914      4,874 |    24,788 
new_ae_axspa_ctv

-------------------------------------------------------------------------------
-> drug = control
  8,675
-------------------------------------------------------------------------------
-> drug = sotrovimab
  117
-------------------------------------------------------------------------------
-> drug = paxlovid
  104
-------------------------------------------------------------------------------
-> drug = molnupiravir
  88

-------------------------------------------------------------------------------
-> drug = control
  4,419
-------------------------------------------------------------------------------
-> drug = sotrovimab
  59
-------------------------------------------------------------------------------
-> drug = paxlovid
  49
-------------------------------------------------------------------------------
-> drug = molnupiravir
  53

-------------------------------------------------------------------------------
-> drug = control
  368
-------------------------------------------------------------------------------
-> drug = sotrovimab
  7
-------------------------------------------------------------------------------
-> drug = paxlovid
  5
-------------------------------------------------------------------------------
-> drug = molnupiravir
  3
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_new_ae_axspa_ctv
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    19,279      4,634 |    23,913 
  sotrovimab |       243         65 |       308 
    paxlovid |       233         60 |       293 
molnupiravir |       236         38 |       274 
-------------+----------------------+----------
       Total |    19,991      4,797 |    24,788 
new_ae_ibd_ctv

-------------------------------------------------------------------------------
-> drug = control
  8,614
-------------------------------------------------------------------------------
-> drug = sotrovimab
  117
-------------------------------------------------------------------------------
-> drug = paxlovid
  98
-------------------------------------------------------------------------------
-> drug = molnupiravir
  105

-------------------------------------------------------------------------------
-> drug = control
  4,461
-------------------------------------------------------------------------------
-> drug = sotrovimab
  57
-------------------------------------------------------------------------------
-> drug = paxlovid
  45
-------------------------------------------------------------------------------
-> drug = molnupiravir
  56

-------------------------------------------------------------------------------
-> drug = control
  395
-------------------------------------------------------------------------------
-> drug = sotrovimab
  1
-------------------------------------------------------------------------------
-> drug = paxlovid
  6
-------------------------------------------------------------------------------
-> drug = molnupiravir
  5
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |  fail_new_ae_ibd_ctv
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    19,356      4,557 |    23,913 
  sotrovimab |       247         61 |       308 
    paxlovid |       234         59 |       293 
molnupiravir |       220         54 |       274 
-------------+----------------------+----------
       Total |    20,057      4,731 |    24,788 
new_ae_ra_icd_prim

-------------------------------------------------------------------------------
-> drug = control
  8,648
-------------------------------------------------------------------------------
-> drug = sotrovimab
  121
-------------------------------------------------------------------------------
-> drug = paxlovid
  92
-------------------------------------------------------------------------------
-> drug = molnupiravir
  88

-------------------------------------------------------------------------------
-> drug = control
  4,385
-------------------------------------------------------------------------------
-> drug = sotrovimab
  65
-------------------------------------------------------------------------------
-> drug = paxlovid
  42
-------------------------------------------------------------------------------
-> drug = molnupiravir
  45

-------------------------------------------------------------------------------
-> drug = control
  414
-------------------------------------------------------------------------------
-> drug = sotrovimab
  3
-------------------------------------------------------------------------------
-> drug = paxlovid
  7
-------------------------------------------------------------------------------
-> drug = molnupiravir
  4
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_new_ae_ra_icd_pr
             |          im
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    19,218      4,695 |    23,913 
  sotrovimab |       248         60 |       308 
    paxlovid |       236         57 |       293 
molnupiravir |       227         47 |       274 
-------------+----------------------+----------
       Total |    19,929      4,859 |    24,788 
new_ae_sle_icd_prim

-------------------------------------------------------------------------------
-> drug = control
  8,561
-------------------------------------------------------------------------------
-> drug = sotrovimab
  110
-------------------------------------------------------------------------------
-> drug = paxlovid
  110
-------------------------------------------------------------------------------
-> drug = molnupiravir
  93

-------------------------------------------------------------------------------
-> drug = control
  4,293
-------------------------------------------------------------------------------
-> drug = sotrovimab
  62
-------------------------------------------------------------------------------
-> drug = paxlovid
  51
-------------------------------------------------------------------------------
-> drug = molnupiravir
  40

-------------------------------------------------------------------------------
-> drug = control
  423
-------------------------------------------------------------------------------
-> drug = sotrovimab
  9
-------------------------------------------------------------------------------
-> drug = paxlovid
  5
-------------------------------------------------------------------------------
-> drug = molnupiravir
  3
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_new_ae_sle_icd_p
             |          rim
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    19,212      4,701 |    23,913 
  sotrovimab |       251         57 |       308 
    paxlovid |       229         64 |       293 
molnupiravir |       218         56 |       274 
-------------+----------------------+----------
       Total |    19,910      4,878 |    24,788 
new_ae_psoriasis_icd_prim

-------------------------------------------------------------------------------
-> drug = control
  8,617
-------------------------------------------------------------------------------
-> drug = sotrovimab
  106
-------------------------------------------------------------------------------
-> drug = paxlovid
  109
-------------------------------------------------------------------------------
-> drug = molnupiravir
  104

-------------------------------------------------------------------------------
-> drug = control
  4,340
-------------------------------------------------------------------------------
-> drug = sotrovimab
  47
-------------------------------------------------------------------------------
-> drug = paxlovid
  65
-------------------------------------------------------------------------------
-> drug = molnupiravir
  54

-------------------------------------------------------------------------------
-> drug = control
  410
-------------------------------------------------------------------------------
-> drug = sotrovimab
  1
-------------------------------------------------------------------------------
-> drug = paxlovid
  11
-------------------------------------------------------------------------------
-> drug = molnupiravir
  5
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_new_ae_psoriasis
             |       _icd_prim
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    19,214      4,699 |    23,913 
  sotrovimab |       248         60 |       308 
    paxlovid |       238         55 |       293 
molnupiravir |       219         55 |       274 
-------------+----------------------+----------
       Total |    19,919      4,869 |    24,788 
new_ae_psa_icd_prim

-------------------------------------------------------------------------------
-> drug = control
  8,584
-------------------------------------------------------------------------------
-> drug = sotrovimab
  108
-------------------------------------------------------------------------------
-> drug = paxlovid
  115
-------------------------------------------------------------------------------
-> drug = molnupiravir
  108

-------------------------------------------------------------------------------
-> drug = control
  4,366
-------------------------------------------------------------------------------
-> drug = sotrovimab
  48
-------------------------------------------------------------------------------
-> drug = paxlovid
  58
-------------------------------------------------------------------------------
-> drug = molnupiravir
  48

-------------------------------------------------------------------------------
-> drug = control
  375
-------------------------------------------------------------------------------
-> drug = sotrovimab
  4
-------------------------------------------------------------------------------
-> drug = paxlovid
  4
-------------------------------------------------------------------------------
-> drug = molnupiravir
  5
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_new_ae_psa_icd_p
             |          rim
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    19,305      4,608 |    23,913 
  sotrovimab |       244         64 |       308 
    paxlovid |       232         61 |       293 
molnupiravir |       209         65 |       274 
-------------+----------------------+----------
       Total |    19,990      4,798 |    24,788 
new_ae_axspa_icd_prim

-------------------------------------------------------------------------------
-> drug = control
  8,633
-------------------------------------------------------------------------------
-> drug = sotrovimab
  103
-------------------------------------------------------------------------------
-> drug = paxlovid
  112
-------------------------------------------------------------------------------
-> drug = molnupiravir
  103

-------------------------------------------------------------------------------
-> drug = control
  4,343
-------------------------------------------------------------------------------
-> drug = sotrovimab
  50
-------------------------------------------------------------------------------
-> drug = paxlovid
  56
-------------------------------------------------------------------------------
-> drug = molnupiravir
  56

-------------------------------------------------------------------------------
-> drug = control
  397
-------------------------------------------------------------------------------
-> drug = sotrovimab
  4
-------------------------------------------------------------------------------
-> drug = paxlovid
  9
-------------------------------------------------------------------------------
-> drug = molnupiravir
  4
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_new_ae_axspa_icd
             |         _prim
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    19,206      4,707 |    23,913 
  sotrovimab |       251         57 |       308 
    paxlovid |       228         65 |       293 
molnupiravir |       223         51 |       274 
-------------+----------------------+----------
       Total |    19,908      4,880 |    24,788 
new_ae_ibd_icd_prim

-------------------------------------------------------------------------------
-> drug = control
  8,555
-------------------------------------------------------------------------------
-> drug = sotrovimab
  115
-------------------------------------------------------------------------------
-> drug = paxlovid
  109
-------------------------------------------------------------------------------
-> drug = molnupiravir
  93

-------------------------------------------------------------------------------
-> drug = control
  4,261
-------------------------------------------------------------------------------
-> drug = sotrovimab
  60
-------------------------------------------------------------------------------
-> drug = paxlovid
  51
-------------------------------------------------------------------------------
-> drug = molnupiravir
  44

-------------------------------------------------------------------------------
-> drug = control
  413
-------------------------------------------------------------------------------
-> drug = sotrovimab
  11
-------------------------------------------------------------------------------
-> drug = paxlovid
  3
-------------------------------------------------------------------------------
-> drug = molnupiravir
  2
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_new_ae_ibd_icd_p
             |          rim
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    19,193      4,720 |    23,913 
  sotrovimab |       242         66 |       308 
    paxlovid |       231         62 |       293 
molnupiravir |       223         51 |       274 
-------------+----------------------+----------
       Total |    19,889      4,899 |    24,788 
new_ae_ra_ae

-------------------------------------------------------------------------------
-> drug = control
  8,506
-------------------------------------------------------------------------------
-> drug = sotrovimab
  103
-------------------------------------------------------------------------------
-> drug = paxlovid
  114
-------------------------------------------------------------------------------
-> drug = molnupiravir
  89

-------------------------------------------------------------------------------
-> drug = control
  4,216
-------------------------------------------------------------------------------
-> drug = sotrovimab
  46
-------------------------------------------------------------------------------
-> drug = paxlovid
  55
-------------------------------------------------------------------------------
-> drug = molnupiravir
  37

-------------------------------------------------------------------------------
-> drug = control
  405
-------------------------------------------------------------------------------
-> drug = sotrovimab
  3
-------------------------------------------------------------------------------
-> drug = paxlovid
  5
-------------------------------------------------------------------------------
-> drug = molnupiravir
  3
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |   fail_new_ae_ra_ae
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    19,205      4,708 |    23,913 
  sotrovimab |       248         60 |       308 
    paxlovid |       229         64 |       293 
molnupiravir |       219         55 |       274 
-------------+----------------------+----------
       Total |    19,901      4,887 |    24,788 
new_ae_sle_ae

-------------------------------------------------------------------------------
-> drug = control
  8,546
-------------------------------------------------------------------------------
-> drug = sotrovimab
  122
-------------------------------------------------------------------------------
-> drug = paxlovid
  125
-------------------------------------------------------------------------------
-> drug = molnupiravir
  94

-------------------------------------------------------------------------------
-> drug = control
  4,245
-------------------------------------------------------------------------------
-> drug = sotrovimab
  62
-------------------------------------------------------------------------------
-> drug = paxlovid
  67
-------------------------------------------------------------------------------
-> drug = molnupiravir
  41

-------------------------------------------------------------------------------
-> drug = control
  391
-------------------------------------------------------------------------------
-> drug = sotrovimab
  7
-------------------------------------------------------------------------------
-> drug = paxlovid
  9
-------------------------------------------------------------------------------
-> drug = molnupiravir
  3
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |  fail_new_ae_sle_ae
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    19,207      4,706 |    23,913 
  sotrovimab |       241         67 |       308 
    paxlovid |       226         67 |       293 
molnupiravir |       218         56 |       274 
-------------+----------------------+----------
       Total |    19,892      4,896 |    24,788 
new_ae_psoriasis_ae

-------------------------------------------------------------------------------
-> drug = control
  8,454
-------------------------------------------------------------------------------
-> drug = sotrovimab
  116
-------------------------------------------------------------------------------
-> drug = paxlovid
  109
-------------------------------------------------------------------------------
-> drug = molnupiravir
  99

-------------------------------------------------------------------------------
-> drug = control
  4,259
-------------------------------------------------------------------------------
-> drug = sotrovimab
  58
-------------------------------------------------------------------------------
-> drug = paxlovid
  54
-------------------------------------------------------------------------------
-> drug = molnupiravir
  44

-------------------------------------------------------------------------------
-> drug = control
  396
-------------------------------------------------------------------------------
-> drug = sotrovimab
  7
-------------------------------------------------------------------------------
-> drug = paxlovid
  6
-------------------------------------------------------------------------------
-> drug = molnupiravir
  9
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_new_ae_psoriasis
             |          _ae
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    19,313      4,600 |    23,913 
  sotrovimab |       243         65 |       308 
    paxlovid |       232         61 |       293 
molnupiravir |       209         65 |       274 
-------------+----------------------+----------
       Total |    19,997      4,791 |    24,788 
new_ae_psa_ae

-------------------------------------------------------------------------------
-> drug = control
  8,569
-------------------------------------------------------------------------------
-> drug = sotrovimab
  108
-------------------------------------------------------------------------------
-> drug = paxlovid
  111
-------------------------------------------------------------------------------
-> drug = molnupiravir
  95

-------------------------------------------------------------------------------
-> drug = control
  4,335
-------------------------------------------------------------------------------
-> drug = sotrovimab
  66
-------------------------------------------------------------------------------
-> drug = paxlovid
  58
-------------------------------------------------------------------------------
-> drug = molnupiravir
  54

-------------------------------------------------------------------------------
-> drug = control
  406
-------------------------------------------------------------------------------
-> drug = sotrovimab
  9
-------------------------------------------------------------------------------
-> drug = paxlovid
  3
-------------------------------------------------------------------------------
-> drug = molnupiravir
  5
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |  fail_new_ae_psa_ae
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    19,259      4,654 |    23,913 
  sotrovimab |       257         51 |       308 
    paxlovid |       237         56 |       293 
molnupiravir |       228         46 |       274 
-------------+----------------------+----------
       Total |    19,981      4,807 |    24,788 
new_ae_axspa_ae

-------------------------------------------------------------------------------
-> drug = control
  8,670
-------------------------------------------------------------------------------
-> drug = sotrovimab
  111
-------------------------------------------------------------------------------
-> drug = paxlovid
  114
-------------------------------------------------------------------------------
-> drug = molnupiravir
  103

-------------------------------------------------------------------------------
-> drug = control
  4,394
-------------------------------------------------------------------------------
-> drug = sotrovimab
  56
-------------------------------------------------------------------------------
-> drug = paxlovid
  59
-------------------------------------------------------------------------------
-> drug = molnupiravir
  54

-------------------------------------------------------------------------------
-> drug = control
  407
-------------------------------------------------------------------------------
-> drug = sotrovimab
  4
-------------------------------------------------------------------------------
-> drug = paxlovid
  10
-------------------------------------------------------------------------------
-> drug = molnupiravir
  3
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             | fail_new_ae_axspa_ae
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    19,220      4,693 |    23,913 
  sotrovimab |       249         59 |       308 
    paxlovid |       228         65 |       293 
molnupiravir |       222         52 |       274 
-------------+----------------------+----------
       Total |    19,919      4,869 |    24,788 
new_ae_ibd_ae

-------------------------------------------------------------------------------
-> drug = control
  8,616
-------------------------------------------------------------------------------
-> drug = sotrovimab
  110
-------------------------------------------------------------------------------
-> drug = paxlovid
  91
-------------------------------------------------------------------------------
-> drug = molnupiravir
  106

-------------------------------------------------------------------------------
-> drug = control
  4,279
-------------------------------------------------------------------------------
-> drug = sotrovimab
  59
-------------------------------------------------------------------------------
-> drug = paxlovid
  45
-------------------------------------------------------------------------------
-> drug = molnupiravir
  46

-------------------------------------------------------------------------------
-> drug = control
  394
-------------------------------------------------------------------------------
-> drug = sotrovimab
  5
-------------------------------------------------------------------------------
-> drug = paxlovid
  3
-------------------------------------------------------------------------------
-> drug = molnupiravir
  9
(24,480 missing values generated)
(293 real changes made)
(274 real changes made)
(23,913 real changes made)

             |  fail_new_ae_ibd_ae
        drug |         0          1 |     Total
-------------+----------------------+----------
     control |    19,173      4,740 |    23,913 
  sotrovimab |       252         56 |       308 
    paxlovid |       244         49 |       293 
molnupiravir |       205         69 |       274 
-------------+----------------------+----------
       Total |    19,874      4,914 |    24,788 

. 
. * Add half-day buffer if outcome on indexdate
. foreach x in    $ae $ae_disease ///
>                                 $ae_spc_gp $ae_spc_icd $ae_spc_emerg ///
>                                 $ae_drug_gp $ae_drug_icd $ae_drug_emerg ///
>                                 $ae_imae_gp $ae_imae_icd $ae_imae_emerg ///
>                                 {
  2.         display "`x'"
  3.         replace `x'=`x'+0.75 if `x'==start_date
  4. }
ae_spc_all
(41 real changes made)
ae_drug_all
(35 real changes made)
ae_imae_all
(35 real changes made)
ae_all
(36 real changes made)
allcause_emerg_aande
(2 real changes made)
covid_hosp_date
(3 real changes made)
all_hosp_date
(3 real changes made)
died_date_ons
(10 real changes made)
ae_diverticulitis
(35 real changes made)
ae_diarrhoea
(40 real changes made)
ae_taste
(29 real changes made)
ae_rash
(40 real changes made)
ae_anaphylaxis
(35 real changes made)
ae_severe_drug
(30 real changes made)
ae_nonsevere_drug
(18 real changes made)
ae_ra
(25 real changes made)
ae_sle
(33 real changes made)
ae_psorasis
(31 real changes made)
ae_psa
(25 real changes made)
ae_axspa
(30 real changes made)
ae_ibd
(20 real changes made)
ae_diverticulitis_snomed
(14 real changes made)
ae_diarrhoea_snomed
(20 real changes made)
ae_taste_snomed
(20 real changes made)
ae_rash_snomed
(27 real changes made)
ae_diverticulitis_icd_prim
(25 real changes made)
ae_taste_icd_prim
(18 real changes made)
ae_rash_icd_prim
(15 real changes made)
ae_diarrhoea_icd_prim
(19 real changes made)
ae_diarrhoeal_icd_prim
(18 real changes made)
ae_diverticulitis_ae
(12 real changes made)
ae_rash_ae
(18 real changes made)
ae_anaphylaxis_snomed
(16 real changes made)
ae_severedrug_snomed
(17 real changes made)
ae_nonsevere_drug_snomed
(9 real changes made)
ae_anaphylaxis_icd_prim
(22 real changes made)
ae_severedrug_icd_prim
(20 real changes made)
ae_severedrug_sjs_icd_prim
(13 real changes made)
ae_anaphlaxis_ae
(16 real changes made)
ae_severedrug_ae
(10 real changes made)
ae_nonsevere_drug_ae
(16 real changes made)
new_ae_ra_snomed
(12 real changes made)
new_ae_sle_ctv
(23 real changes made)
new_ae_psoriasis_snomed
(17 real changes made)
new_ae_psa_snomed
(12 real changes made)
new_ae_axspa_ctv
(12 real changes made)
new_ae_ibd_ctv
(7 real changes made)
new_ae_ra_icd_prim
(13 real changes made)
new_ae_sle_icd_prim
(14 real changes made)
new_ae_psoriasis_icd_prim
(19 real changes made)
new_ae_psa_icd_prim
(11 real changes made)
new_ae_axspa_icd_prim
(21 real changes made)
new_ae_ibd_icd_prim
(8 real changes made)
new_ae_ra_ae
(11 real changes made)
new_ae_sle_ae
(14 real changes made)
new_ae_psoriasis_ae
(13 real changes made)
new_ae_psa_ae
(15 real changes made)
new_ae_axspa_ae
(16 real changes made)
new_ae_ibd_ae
(12 real changes made)

. 
. *Generate censor date
. foreach x in    $ae $ae_disease ///
>                                 $ae_spc_gp $ae_spc_icd $ae_spc_emerg ///
>                                 $ae_drug_gp $ae_drug_icd $ae_drug_emerg ///
>                                 $ae_imae_gp $ae_imae_icd $ae_imae_emerg ///
>                                 {
  2.         gen stop_`x'=`x' if fail_`x'==1
  3.         replace stop_`x'=min(death_date,dereg_date,study_end_date,start_da
> te_29,paxlovid,molnupiravir) if fail_`x'==0&drug==1
  4.         replace stop_`x'=min(death_date,dereg_date,study_end_date,start_da
> te_29,sotrovimab,molnupiravir) if fail_`x'==0&drug==2
  5.         replace stop_`x'=min(death_date,dereg_date,study_end_date,start_da
> te_29,sotrovimab,paxlovid) if fail_`x'==0&drug==3
  6.         replace stop_`x'=min(death_date,dereg_date,study_end_date,start_da
> te_29,sotrovimab,paxlovid,molnupiravir) if fail_`x'==0&drug==0
  7.         format %td stop_`x'
  8. }
(4,320 missing values generated)
(59 real changes made)
(54 real changes made)
(43 real changes made)
(4,164 real changes made)
(5,181 missing values generated)
(85 real changes made)
(62 real changes made)
(59 real changes made)
(4,975 real changes made)
(2,805 missing values generated)
(28 real changes made)
(31 real changes made)
(28 real changes made)
(2,718 real changes made)
(936 missing values generated)
(10 real changes made)
(13 real changes made)
(14 real changes made)
(899 real changes made)
(24,198 missing values generated)
(299 real changes made)
(286 real changes made)
(262 real changes made)
(23,351 real changes made)
(23,528 missing values generated)
(289 real changes made)
(280 real changes made)
(255 real changes made)
(22,704 real changes made)
(23,617 missing values generated)
(302 real changes made)
(285 real changes made)
(258 real changes made)
(22,772 real changes made)
(14,262 missing values generated)
(173 real changes made)
(153 real changes made)
(150 real changes made)
(13,786 real changes made)
(12,633 missing values generated)
(153 real changes made)
(141 real changes made)
(135 real changes made)
(12,204 real changes made)
(12,647 missing values generated)
(177 real changes made)
(149 real changes made)
(127 real changes made)
(12,194 real changes made)
(15,543 missing values generated)
(193 real changes made)
(188 real changes made)
(151 real changes made)
(15,011 real changes made)
(12,588 missing values generated)
(158 real changes made)
(150 real changes made)
(143 real changes made)
(12,137 real changes made)
(12,726 missing values generated)
(171 real changes made)
(137 real changes made)
(138 real changes made)
(12,280 real changes made)
(10,494 missing values generated)
(142 real changes made)
(128 real changes made)
(106 real changes made)
(10,118 real changes made)
(15,417 missing values generated)
(205 real changes made)
(153 real changes made)
(171 real changes made)
(14,888 real changes made)
(13,819 missing values generated)
(174 real changes made)
(166 real changes made)
(162 real changes made)
(13,317 real changes made)
(13,910 missing values generated)
(170 real changes made)
(156 real changes made)
(137 real changes made)
(13,447 real changes made)
(13,954 missing values generated)
(174 real changes made)
(157 real changes made)
(137 real changes made)
(13,486 real changes made)
(13,923 missing values generated)
(181 real changes made)
(169 real changes made)
(151 real changes made)
(13,422 real changes made)
(13,925 missing values generated)
(173 real changes made)
(154 real changes made)
(165 real changes made)
(13,433 real changes made)
(13,865 missing values generated)
(170 real changes made)
(166 real changes made)
(150 real changes made)
(13,379 real changes made)
(19,467 missing values generated)
(235 real changes made)
(235 real changes made)
(215 real changes made)
(18,782 real changes made)
(19,480 missing values generated)
(252 real changes made)
(235 real changes made)
(207 real changes made)
(18,786 real changes made)
(19,409 missing values generated)
(243 real changes made)
(227 real changes made)
(194 real changes made)
(18,745 real changes made)
(19,336 missing values generated)
(251 real changes made)
(233 real changes made)
(209 real changes made)
(18,643 real changes made)
(19,347 missing values generated)
(234 real changes made)
(227 real changes made)
(215 real changes made)
(18,671 real changes made)
(19,388 missing values generated)
(244 real changes made)
(236 real changes made)
(215 real changes made)
(18,693 real changes made)
(19,357 missing values generated)
(246 real changes made)
(224 real changes made)
(211 real changes made)
(18,676 real changes made)
(19,422 missing values generated)
(253 real changes made)
(220 real changes made)
(218 real changes made)
(18,731 real changes made)
(19,338 missing values generated)
(243 real changes made)
(230 real changes made)
(205 real changes made)
(18,660 real changes made)
(19,361 missing values generated)
(248 real changes made)
(223 real changes made)
(202 real changes made)
(18,688 real changes made)
(19,413 missing values generated)
(232 real changes made)
(240 real changes made)
(215 real changes made)
(18,726 real changes made)
(19,461 missing values generated)
(245 real changes made)
(238 real changes made)
(213 real changes made)
(18,765 real changes made)
(19,348 missing values generated)
(248 real changes made)
(219 real changes made)
(208 real changes made)
(18,673 real changes made)
(19,261 missing values generated)
(250 real changes made)
(216 real changes made)
(218 real changes made)
(18,577 real changes made)
(19,477 missing values generated)
(250 real changes made)
(221 real changes made)
(210 real changes made)
(18,796 real changes made)
(19,431 missing values generated)
(250 real changes made)
(239 real changes made)
(208 real changes made)
(18,734 real changes made)
(19,290 missing values generated)
(244 real changes made)
(240 real changes made)
(219 real changes made)
(18,587 real changes made)
(19,454 missing values generated)
(242 real changes made)
(221 real changes made)
(217 real changes made)
(18,774 real changes made)
(19,333 missing values generated)
(237 real changes made)
(232 real changes made)
(202 real changes made)
(18,662 real changes made)
(19,420 missing values generated)
(242 real changes made)
(199 real changes made)
(209 real changes made)
(18,770 real changes made)
(19,880 missing values generated)
(252 real changes made)
(241 real changes made)
(228 real changes made)
(19,159 real changes made)
(19,887 missing values generated)
(243 real changes made)
(232 real changes made)
(209 real changes made)
(19,203 real changes made)
(19,963 missing values generated)
(257 real changes made)
(232 real changes made)
(212 real changes made)
(19,262 real changes made)
(19,914 missing values generated)
(251 real changes made)
(239 real changes made)
(216 real changes made)
(19,208 real changes made)
(19,991 missing values generated)
(243 real changes made)
(233 real changes made)
(236 real changes made)
(19,279 real changes made)
(20,057 missing values generated)
(247 real changes made)
(234 real changes made)
(220 real changes made)
(19,356 real changes made)
(19,929 missing values generated)
(248 real changes made)
(236 real changes made)
(227 real changes made)
(19,218 real changes made)
(19,910 missing values generated)
(251 real changes made)
(229 real changes made)
(218 real changes made)
(19,212 real changes made)
(19,919 missing values generated)
(248 real changes made)
(238 real changes made)
(219 real changes made)
(19,214 real changes made)
(19,990 missing values generated)
(244 real changes made)
(232 real changes made)
(209 real changes made)
(19,305 real changes made)
(19,908 missing values generated)
(251 real changes made)
(228 real changes made)
(223 real changes made)
(19,206 real changes made)
(19,889 missing values generated)
(242 real changes made)
(231 real changes made)
(223 real changes made)
(19,193 real changes made)
(19,901 missing values generated)
(248 real changes made)
(229 real changes made)
(219 real changes made)
(19,205 real changes made)
(19,892 missing values generated)
(241 real changes made)
(226 real changes made)
(218 real changes made)
(19,207 real changes made)
(19,997 missing values generated)
(243 real changes made)
(232 real changes made)
(209 real changes made)
(19,313 real changes made)
(19,981 missing values generated)
(257 real changes made)
(237 real changes made)
(228 real changes made)
(19,259 real changes made)
(19,919 missing values generated)
(249 real changes made)
(228 real changes made)
(222 real changes made)
(19,220 real changes made)
(19,874 missing values generated)
(252 real changes made)
(244 real changes made)
(205 real changes made)
(19,173 real changes made)

. 
. * Follow-up time
. stset stop_ae_all, id(patient_id) origin(time start_date) enter(time start_da
> te) failure(fail_ae_all==1) 

                id:  patient_id
     failure event:  fail_ae_all == 1
obs. time interval:  (stop_ae_all[_n-1], stop_ae_all]
 enter on or after:  time start_date
 exit on or before:  failure
    t for analysis:  (time-origin)
            origin:  time start_date

------------------------------------------------------------------------------
     24,788  total observations
     22,817  observations end on or before enter()
------------------------------------------------------------------------------
      1,971  observations remaining, representing
      1,971  subjects
      1,042  failures in single-failure-per-subject data
     39,826  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =        29

. *count censored due to second therapy*
. count if fail_ae_all==0&drug==1&min(paxlovid,molnupiravir)==stop_ae_all
  0

. count if fail_ae_all==0&drug==2&min(sotrovimab,molnupiravir)==stop_ae_all
  0

. count if fail_ae_all==0&drug==3&min(sotrovimab,paxlovid)==stop_ae_all
  0

. count if fail_ae_all==0&drug==0&min(sotrovimab,paxlovid,molnupiravir)==stop_a
> e_all
  2

. tab _st  // keep if _st==1 -> removes observations that end on or before ente
> r 

1 if record |
   is to be |
    used; 0 |
  otherwise |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     22,817       92.05       92.05
          1 |      1,971        7.95      100.00
------------+-----------------------------------
      Total |     24,788      100.00

. count if start_date>=stop_ae_all & _st==0
  22,817

. count if start_date==stop_ae_all & _st==0
  5

. tab _t,m

   analysis |
  time when |
record ends |      Freq.     Percent        Cum.
------------+-----------------------------------
        .75 |         36        0.15        0.15
          1 |         44        0.18        0.32
          2 |         53        0.21        0.54
          3 |         44        0.18        0.71
          4 |         45        0.18        0.90
          5 |         44        0.18        1.07
          6 |         57        0.23        1.30
          7 |         44        0.18        1.48
          8 |         45        0.18        1.66
          9 |         42        0.17        1.83
         10 |         42        0.17        2.00
         11 |         35        0.14        2.14
         12 |         36        0.15        2.29
         13 |         39        0.16        2.44
         14 |         41        0.17        2.61
         15 |         25        0.10        2.71
         16 |         28        0.11        2.82
         17 |         27        0.11        2.93
         18 |         28        0.11        3.05
         19 |         35        0.14        3.19
         20 |         30        0.12        3.31
         21 |         34        0.14        3.45
         22 |         23        0.09        3.54
         23 |         34        0.14        3.68
         24 |         21        0.08        3.76
         25 |         27        0.11        3.87
         26 |         29        0.12        3.99
         27 |         30        0.12        4.11
         28 |         22        0.09        4.20
         29 |        931        3.76        7.95
          . |     22,817       92.05      100.00
------------+-----------------------------------
      Total |     24,788      100.00

. tab _t drug,m col

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

  analysis |
 time when |
    record |                    drug
      ends |   control  sotrovima   paxlovid  molnupira |     Total
-----------+--------------------------------------------+----------
       .75 |        36          0          0          0 |        36 
           |      0.15       0.00       0.00       0.00 |      0.15 
-----------+--------------------------------------------+----------
         1 |        41          2          1          0 |        44 
           |      0.17       0.65       0.34       0.00 |      0.18 
-----------+--------------------------------------------+----------
         2 |        51          1          1          0 |        53 
           |      0.21       0.32       0.34       0.00 |      0.21 
-----------+--------------------------------------------+----------
         3 |        41          2          1          0 |        44 
           |      0.17       0.65       0.34       0.00 |      0.18 
-----------+--------------------------------------------+----------
         4 |        45          0          0          0 |        45 
           |      0.19       0.00       0.00       0.00 |      0.18 
-----------+--------------------------------------------+----------
         5 |        43          0          0          1 |        44 
           |      0.18       0.00       0.00       0.36 |      0.18 
-----------+--------------------------------------------+----------
         6 |        56          1          0          0 |        57 
           |      0.23       0.32       0.00       0.00 |      0.23 
-----------+--------------------------------------------+----------
         7 |        43          1          0          0 |        44 
           |      0.18       0.32       0.00       0.00 |      0.18 
-----------+--------------------------------------------+----------
         8 |        43          1          1          0 |        45 
           |      0.18       0.32       0.34       0.00 |      0.18 
-----------+--------------------------------------------+----------
         9 |        40          1          0          1 |        42 
           |      0.17       0.32       0.00       0.36 |      0.17 
-----------+--------------------------------------------+----------
        10 |        41          0          0          1 |        42 
           |      0.17       0.00       0.00       0.36 |      0.17 
-----------+--------------------------------------------+----------
        11 |        34          1          0          0 |        35 
           |      0.14       0.32       0.00       0.00 |      0.14 
-----------+--------------------------------------------+----------
        12 |        36          0          0          0 |        36 
           |      0.15       0.00       0.00       0.00 |      0.15 
-----------+--------------------------------------------+----------
        13 |        37          1          1          0 |        39 
           |      0.15       0.32       0.34       0.00 |      0.16 
-----------+--------------------------------------------+----------
        14 |        41          0          0          0 |        41 
           |      0.17       0.00       0.00       0.00 |      0.17 
-----------+--------------------------------------------+----------
        15 |        24          1          0          0 |        25 
           |      0.10       0.32       0.00       0.00 |      0.10 
-----------+--------------------------------------------+----------
        16 |        28          0          0          0 |        28 
           |      0.12       0.00       0.00       0.00 |      0.11 
-----------+--------------------------------------------+----------
        17 |        27          0          0          0 |        27 
           |      0.11       0.00       0.00       0.00 |      0.11 
-----------+--------------------------------------------+----------
        18 |        27          1          0          0 |        28 
           |      0.11       0.32       0.00       0.00 |      0.11 
-----------+--------------------------------------------+----------
        19 |        32          1          2          0 |        35 
           |      0.13       0.32       0.68       0.00 |      0.14 
-----------+--------------------------------------------+----------
        20 |        29          1          0          0 |        30 
           |      0.12       0.32       0.00       0.00 |      0.12 
-----------+--------------------------------------------+----------
        21 |        33          0          1          0 |        34 
           |      0.14       0.00       0.34       0.00 |      0.14 
-----------+--------------------------------------------+----------
        22 |        23          0          0          0 |        23 
           |      0.10       0.00       0.00       0.00 |      0.09 
-----------+--------------------------------------------+----------
        23 |        32          1          1          0 |        34 
           |      0.13       0.32       0.34       0.00 |      0.14 
-----------+--------------------------------------------+----------
        24 |        21          0          0          0 |        21 
           |      0.09       0.00       0.00       0.00 |      0.08 
-----------+--------------------------------------------+----------
        25 |        27          0          0          0 |        27 
           |      0.11       0.00       0.00       0.00 |      0.11 
-----------+--------------------------------------------+----------
        26 |        29          0          0          0 |        29 
           |      0.12       0.00       0.00       0.00 |      0.12 
-----------+--------------------------------------------+----------
        27 |        29          0          0          1 |        30 
           |      0.12       0.00       0.00       0.36 |      0.12 
-----------+--------------------------------------------+----------
        28 |        22          0          0          0 |        22 
           |      0.09       0.00       0.00       0.00 |      0.09 
-----------+--------------------------------------------+----------
        29 |       893         10         14         14 |       931 
           |      3.73       3.25       4.78       5.11 |      3.76 
-----------+--------------------------------------------+----------
         . |    22,009        282        270        256 |    22,817 
           |     92.04      91.56      92.15      93.43 |     92.05 
-----------+--------------------------------------------+----------
     Total |    23,913        308        293        274 |    24,788 
           |    100.00     100.00     100.00     100.00 |    100.00 

. tab _t drug if fail_ae_all==1,m col

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

  analysis |
 time when |
    record |                    drug
      ends |   control  sotrovima   paxlovid  molnupira |     Total
-----------+--------------------------------------------+----------
       .75 |        36          0          0          0 |        36 
           |      0.16       0.00       0.00       0.00 |      0.15 
-----------+--------------------------------------------+----------
         1 |        37          2          1          0 |        40 
           |      0.16       0.67       0.36       0.00 |      0.17 
-----------+--------------------------------------------+----------
         2 |        43          1          1          0 |        45 
           |      0.19       0.34       0.36       0.00 |      0.19 
-----------+--------------------------------------------+----------
         3 |        38          2          1          0 |        41 
           |      0.17       0.67       0.36       0.00 |      0.17 
-----------+--------------------------------------------+----------
         4 |        38          0          0          0 |        38 
           |      0.17       0.00       0.00       0.00 |      0.16 
-----------+--------------------------------------------+----------
         5 |        40          0          0          1 |        41 
           |      0.17       0.00       0.00       0.38 |      0.17 
-----------+--------------------------------------------+----------
         6 |        52          1          0          0 |        53 
           |      0.23       0.34       0.00       0.00 |      0.22 
-----------+--------------------------------------------+----------
         7 |        43          1          0          0 |        44 
           |      0.19       0.34       0.00       0.00 |      0.18 
-----------+--------------------------------------------+----------
         8 |        43          1          1          0 |        45 
           |      0.19       0.34       0.36       0.00 |      0.19 
-----------+--------------------------------------------+----------
         9 |        40          1          0          1 |        42 
           |      0.17       0.34       0.00       0.38 |      0.18 
-----------+--------------------------------------------+----------
        10 |        41          0          0          1 |        42 
           |      0.18       0.00       0.00       0.38 |      0.18 
-----------+--------------------------------------------+----------
        11 |        34          1          0          0 |        35 
           |      0.15       0.34       0.00       0.00 |      0.15 
-----------+--------------------------------------------+----------
        12 |        36          0          0          0 |        36 
           |      0.16       0.00       0.00       0.00 |      0.15 
-----------+--------------------------------------------+----------
        13 |        37          1          1          0 |        39 
           |      0.16       0.34       0.36       0.00 |      0.16 
-----------+--------------------------------------------+----------
        14 |        41          0          0          0 |        41 
           |      0.18       0.00       0.00       0.00 |      0.17 
-----------+--------------------------------------------+----------
        15 |        24          1          0          0 |        25 
           |      0.10       0.34       0.00       0.00 |      0.10 
-----------+--------------------------------------------+----------
        16 |        28          0          0          0 |        28 
           |      0.12       0.00       0.00       0.00 |      0.12 
-----------+--------------------------------------------+----------
        17 |        27          0          0          0 |        27 
           |      0.12       0.00       0.00       0.00 |      0.11 
-----------+--------------------------------------------+----------
        18 |        27          1          0          0 |        28 
           |      0.12       0.34       0.00       0.00 |      0.12 
-----------+--------------------------------------------+----------
        19 |        32          1          2          0 |        35 
           |      0.14       0.34       0.71       0.00 |      0.15 
-----------+--------------------------------------------+----------
        20 |        29          1          0          0 |        30 
           |      0.13       0.34       0.00       0.00 |      0.13 
-----------+--------------------------------------------+----------
        21 |        33          0          1          0 |        34 
           |      0.14       0.00       0.36       0.00 |      0.14 
-----------+--------------------------------------------+----------
        22 |        23          0          0          0 |        23 
           |      0.10       0.00       0.00       0.00 |      0.10 
-----------+--------------------------------------------+----------
        23 |        32          1          1          0 |        34 
           |      0.14       0.34       0.36       0.00 |      0.14 
-----------+--------------------------------------------+----------
        24 |        21          0          0          0 |        21 
           |      0.09       0.00       0.00       0.00 |      0.09 
-----------+--------------------------------------------+----------
        25 |        27          0          0          0 |        27 
           |      0.12       0.00       0.00       0.00 |      0.11 
-----------+--------------------------------------------+----------
        26 |        29          0          0          0 |        29 
           |      0.13       0.00       0.00       0.00 |      0.12 
-----------+--------------------------------------------+----------
        27 |        29          0          0          1 |        30 
           |      0.13       0.00       0.00       0.38 |      0.13 
-----------+--------------------------------------------+----------
        28 |        22          0          0          0 |        22 
           |      0.10       0.00       0.00       0.00 |      0.09 
-----------+--------------------------------------------+----------
        29 |        30          0          1          0 |        31 
           |      0.13       0.00       0.36       0.00 |      0.13 
-----------+--------------------------------------------+----------
         . |    22,002        282        270        256 |    22,810 
           |     95.60      94.63      96.43      98.46 |     95.63 
-----------+--------------------------------------------+----------
     Total |    23,014        298        280        260 |    23,852 
           |    100.00     100.00     100.00     100.00 |    100.00 

. tab _t drug if fail_ae_all==1&stop_ae_all==ae_all

  analysis |
 time when |
    record |                    drug
      ends |   control  sotrovima   paxlovid  molnupira |     Total
-----------+--------------------------------------------+----------
       .75 |        36          0          0          0 |        36 
         1 |        37          2          1          0 |        40 
         2 |        43          1          1          0 |        45 
         3 |        38          2          1          0 |        41 
         4 |        38          0          0          0 |        38 
         5 |        40          0          0          1 |        41 
         6 |        52          1          0          0 |        53 
         7 |        43          1          0          0 |        44 
         8 |        43          1          1          0 |        45 
         9 |        40          1          0          1 |        42 
        10 |        41          0          0          1 |        42 
        11 |        34          1          0          0 |        35 
        12 |        36          0          0          0 |        36 
        13 |        37          1          1          0 |        39 
        14 |        41          0          0          0 |        41 
        15 |        24          1          0          0 |        25 
        16 |        28          0          0          0 |        28 
        17 |        27          0          0          0 |        27 
        18 |        27          1          0          0 |        28 
        19 |        32          1          2          0 |        35 
        20 |        29          1          0          0 |        30 
        21 |        33          0          1          0 |        34 
        22 |        23          0          0          0 |        23 
        23 |        32          1          1          0 |        34 
        24 |        21          0          0          0 |        21 
        25 |        27          0          0          0 |        27 
        26 |        29          0          0          0 |        29 
        27 |        29          0          0          1 |        30 
        28 |        22          0          0          0 |        22 
        29 |        30          0          1          0 |        31 
-----------+--------------------------------------------+----------
     Total |     1,012         16         10          4 |     1,042 

. tab fail_ae_all drug,m col

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

fail_ae_al |                    drug
         l |   control  sotrovima   paxlovid  molnupira |     Total
-----------+--------------------------------------------+----------
         0 |       899         10         13         14 |       936 
           |      3.76       3.25       4.44       5.11 |      3.78 
-----------+--------------------------------------------+----------
         1 |    23,014        298        280        260 |    23,852 
           |     96.24      96.75      95.56      94.89 |     96.22 
-----------+--------------------------------------------+----------
     Total |    23,913        308        293        274 |    24,788 
           |    100.00     100.00     100.00     100.00 |    100.00 

. *check censor reasons*
. tab _t drug if fail_ae_all==0&_t<28&stop_ae_all==ae_all,m col
no observations

. tab _t drug if fail_ae_all==0&_t<28&stop_ae_all==death_date,m col

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

  analysis |
 time when |
    record |    drug
      ends |   control |     Total
-----------+-----------+----------
         1 |         2 |         2 
           |     15.38 |     15.38 
-----------+-----------+----------
         2 |         5 |         5 
           |     38.46 |     38.46 
-----------+-----------+----------
         4 |         1 |         1 
           |      7.69 |      7.69 
-----------+-----------+----------
         5 |         2 |         2 
           |     15.38 |     15.38 
-----------+-----------+----------
         6 |         3 |         3 
           |     23.08 |     23.08 
-----------+-----------+----------
     Total |        13 |        13 
           |    100.00 |    100.00 

. tab _t drug if fail_ae_all==0&_t<28&stop_ae_all==dereg_date,m col

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

  analysis |
 time when |
    record |    drug
      ends |   control |     Total
-----------+-----------+----------
         1 |         2 |         2 
           |     12.50 |     12.50 
-----------+-----------+----------
         2 |         3 |         3 
           |     18.75 |     18.75 
-----------+-----------+----------
         3 |         3 |         3 
           |     18.75 |     18.75 
-----------+-----------+----------
         4 |         6 |         6 
           |     37.50 |     37.50 
-----------+-----------+----------
         5 |         1 |         1 
           |      6.25 |      6.25 
-----------+-----------+----------
         6 |         1 |         1 
           |      6.25 |      6.25 
-----------+-----------+----------
     Total |        16 |        16 
           |    100.00 |    100.00 

. tab _t drug if fail_ae_all==0&_t<28&stop_ae_all==min(paxlovid,molnupiravir)&d
> rug==1,m col
no observations

. tab _t drug if fail_ae_all==0&_t<28&stop_ae_all==min(sotrovimab,molnupiravir)
> &drug==2,m col
no observations

. tab _t drug if fail_ae_all==0&_t<28&stop_ae_all==min(sotrovimab,paxlovid)&dru
> g==3,m col
no observations

. tab _t drug if fail_ae_all==0&_t<28&stop_ae_all==min(sotrovimab,paxlovid,moln
> upiravir)&drug==0,m col
no observations

. 
. 
. save "$projectdir/output/data/main.dta", replace
(note: file /workspace/output/data/main.dta not found)
file /workspace/output/data/main.dta saved

. 
. log close
      name:  <unnamed>
       log:  /workspace/logs/cleaning_dataset_combine.log
  log type:  text
 closed on:  16 Aug 2023, 08:48:01
-------------------------------------------------------------------------------
