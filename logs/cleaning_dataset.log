----------------------------------------
      name:  <unnamed>
       log:  C:\Users\k1635179\OneDrive 
> - King's College London\Katie\OpenSafe
> ly\Safety mAB and antivirals\Safety-So
> trovimab-Paxlovid-Molnupiravir/logs/cl
> eaning_dataset.log
  log type:  text
 opened on:  10 Jul 2023, 17:53:25

. 
. *Set Ado file path
. adopath + "$projectdir/analysis/ado"
  [1]  (BASE)      "C:\Program Files\Sta
> ta17\ado\base/"
  [2]  (SITE)      "C:\Program Files\Sta
> ta17\ado\site/"
  [3]              "."
  [4]  (PERSONAL)  "C:\users\PUBLIC\docu
> ments/"
  [5]  (PLUS)      "C:\users\PUBLIC\docu
> ments/"
  [6]  (OLDPLACE)  "c:\ado/"
  [7]              "C:\Users\k1635179\On
> eDrive - King's College London\Katie\O
> penSafely\Safety mAB and antivirals\Se
> perate_Safety-Sotrovimab-Paxlovid-Moln
> upiravir\analysis/analysis/ado"
  [8]              "C:\Users\k1635179\On
> eDrive - King's College London\Katie\O
> penSafely\Safety mAB and antivirals\Sa
> fety-Sotrovimab-Paxlovid-Molnupiravir/
> analysis/ado"

. 
. *       Import control dataset
. import delimited "$projectdir/output/i
> nput_control.csv", clear
(encoding automatically selected: ISO-88
> 59-1)
(211 vars, 50,000 obs)

. gen control_dataset=1

. *       Convert control strings to dat
> es     * 
. foreach var of varlist   covid_test_po
> sitive_date                           
>     ///
>                                       
>            covid_test_positive_date2  
>                             ///
>                                       
>            covid_test_positive_date3  
>                             ///
>                                       
>            covid_test_positive_treat  
>                             ///
>                                       
>            prior_covid_date           
>                             ///
>                                       
>            sotrovimab                 
>                                       
>       ///
>                                       
>            molnupiravir               
>                                     //
> / 
>                                       
>            paxlovid                   
>                                       
>       ///
>                                       
>            remdesivir                 
>                                       
>       ///
>                                       
>            casirivimab                
>                                     //
> /
>                                       
>            sotrovimab_not_start       
>                             ///
>                                       
>            molnupiravir_not_start     
>                             ///
>                                       
>            paxlovid_not_start         
>                                     //
> /
>                                       
>            date_treated               
>                                     //
> /
>                                       
>            start_date                 
>                                       
>       ///
>                                       
>            drugs_paxlovid_interaction 
>                             ///
>                                       
>            drugs_nirmatrelvir_interact
> ion                 ///
>                                       
>            last_vaccination_date      
>                             ///
>                                       
>            death_date                 
>                                       
>       ///
>                                       
>            dereg_date                 
>                                     //
> /
>                                       
>            bmi_date_measured          
>                                     //
> /
>                                       
>            creatinine_ctv3_date       
>                             ///
>                                       
>            creatinine_snomed_date     
>                             ///
>                                       
>            creatinine_short_snomed_dat
> e                   ///
>                                       
>            ae_diverticulitis_icd      
>                             ///
>                                       
>            ae_diverticulitis_snomed   
>                             ///
>                                       
>            ae_diarrhoea_snomed        
>                             ///
>                                       
>            ae_taste_snomed            
>                                     //
> /
>                                       
>            ae_taste_icd               
>                                     //
> /
>                                       
>            ae_rash_snomed             
>                                     //
> /
>                                       
>            ae_anaphylaxis_icd         
>                                     //
> /
>                                       
>            ae_anaphylaxis_snomed      
>                             ///
>                                       
>            ae_anaphlaxis_ae           
>                                     //
> /
>                                       
>            ae_drugreact_ae            
>                                     //
> /
>                                       
>            ae_allergic_ae             
>                                     //
> /
>                                       
>            ae_rheumatoid_arthritis_sno
> med                 ///
>                                       
>            ae_rheumatoid_arthritis_icd
>                     ///
>                                       
>            ae_sle_ctv                 
>                                       
>       ///
>                                       
>            ae_sle_icd                 
>                                       
>       ///
>                                       
>            ae_psoriasis_snomed        
>                             ///
>                                       
>            ae_psoriatic_arthritis_snom
> ed                  ///
>                                       
>            ae_ankylosing_spondylitis_c
> tv                  ///
>                                       
>            ae_ibd_snomed              
>                                     //
> /
>                                       
>            ae_diverticulitis_ae       
>                             ///
>                                       
>            ae_rheumatoid_arthritis_ae 
>                             ///
>                                       
>            ae_sle_ae                  
>                                       
>       ///
>                                       
>            ae_psoriasis_ae            
>                                     //
> /
>                                       
>            ae_psoriatic_arthritis_ae  
>                             ///
>                                       
>            ae_ankylosing_spondylitis_a
> e                   ///
>                                       
>            ae_ibd_ae                  
>                                       
>       ///
>                                       
>            rheumatoid_arthritis_nhsd_s
> nomed               ///
>                                       
>            rheumatoid_arthritis_nhsd_i
> cd10                ///
>                                       
>            sle_nhsd_ctv               
>                                     //
> /
>                                       
>            sle_nhsd_icd10             
>                                     //
> /
>                                       
>            psoriasis_nhsd             
>                                     //
> /
>                                       
>            psoriatic_arthritis_nhsd   
>                             ///
>                                       
>            ankylosing_spondylitis_nhsd
>                     ///
>                                       
>            ibd_ctv                    
>                                       
>       ///
>                                       
>            allcause_emerg_aande       
>                             ///
>                                       
>            all_hosp_date              
>                                     //
> /
>                                       
>            all_hosp_date0             
>                                     //
> /
>                                       
>            all_hosp_date1             
>                                     //
> /
>                                       
>            all_hosp_date2             
>                                     //
> /
>                                       
>            hosp_discharge_date        
>                             ///
>                                       
>            hosp_discharge_date0       
>                             ///
>                                       
>            hosp_discharge_date1       
>                             ///
>                                       
>            hosp_discharge_date2       
>                             ///
>                                       
>            covid_hosp_date            
>                                     //
> /
>                                       
>            covid_hosp_date0           
>                                     //
> /
>                                       
>            covid_hosp_date1           
>                                     //
> /
>                                       
>            covid_hosp_date2           
>                                     //
> /                                     
>         
>                                       
>            covid_discharge_date       
>                             ///
>                                       
>            covid_discharge_date0      
>                             ///       
>                                       
>                                       
>            covid_discharge_date1      
>                             /// 
>                                       
>            covid_discharge_date2      
>                             /// 
>                                       
>            any_covid_hosp_discharge   
>                             ///       
>               
>                                       
>            covid_hosp_date_mabs       
>                             /// 
>                                       
>            covid_hosp_date_mabs_not_pr
> imary               /// 
>                                       
>            died_date_ons              
>                                     //
> /
>                                       
>            died_ons_covid             
>                                     //
> /
>                                       
>            pre_diverticulitis_icd     
>                             ///
>                                       
>            pre_diverticulitis_snomed  
>                             ///
>                                       
>            pre_diverticulitis_ae      
>                             ///
>                                       
>            pre_diarrhoea_snomed       
>                             ///
>                                       
>            pre_taste_snomed           
>                                     //
> /
>                                       
>            pre_taste_icd              
>                                     //
> /
>                                       
>            pre_rash_snomed            
>                                     //
> /
>                                       
>            pre_anaphylaxis_icd        
>                             ///
>                                       
>            pre_anaphylaxis_snomed     
>                             ///
>                                       
>            pre_anaphlaxis_ae          
>                                     //
> /
>                                       
>            pre_drugreact_ae           
>                                     //
> /
>                                       
>            pre_allergic_ae            
>                                     //
> /
>                                       
>            pre_anaphlaxis_ae          
>                                     //
> /
>                                       
>            pre_rheumatoid_arthritis_ae
>                     ///
>                                       
>            pre_rheumatoid_arthritis_sn
> omed                ///
>                                       
>            pre_rheumatoid_arthritis_ic
> d                   ///
>                                       
>            pre_ankylosing_spondylitis_
> ctv                 ///
>                                       
>            pre_ankylosing_spondylitis_
> ae                  ///
>                                       
>            pre_psoriasis_snomed       
>                             ///
>                                       
>            pre_psoriasis_ae           
>                                     //
> /
>                                       
>            pre_psoriatic_arthritis_ae 
>                             ///
>                                       
>            pre_psoriatic_arthritis_sno
> med                 ///
>                                       
>            pre_sle_ctv                
>                                     //
> /
>                                       
>            pre_sle_icd                
>                                     //
> /
>                                       
>            pre_sle_ae                 
>                                       
>       ///
>                                       
>            pre_ibd_ae                 
>                                       
>       ///
>                                       
>            pre_ibd_snomed {           
>                              
  2.         capture confirm string vari
> able `var'
  3.         if _rc==0 {
  4.         rename `var' a
  5.         gen `var' = date(a, "YMD")
  6.         drop a
  7.         format %td `var'
  8.  }
  9. }
(4,999 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(30,000 missing values generated)
(4,999 missing values generated)
(49,950 missing values generated)
(49,950 missing values generated)
(49,950 missing values generated)
(49,950 missing values generated)
(49,950 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,751 missing values generated)
(47,500 missing values generated)
(47,500 missing values generated)
(2,500 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(2,500 missing values generated)
(25,000 missing values generated)
(25,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(47,500 missing values generated)
(45,000 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(45,000 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(45,000 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(47,500 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(20,000 missing values generated)
(20,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)

. tab control_dataset

control_dat |
       aset |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          1 |     50,000      100.00    
>   100.00
------------+---------------------------
> --------
      Total |     50,000      100.00

. save "$projectdir/output/data/control.
> dta", replace 
file C:\Users\k1635179\OneDrive -
    King's College
    London\Katie\OpenSafely\Safety mAB
    and
    antivirals\Safety-Sotrovimab-Paxlo
    > vid-Molnupiravir/output/data/con
    > trol.dta saved

. 
. * import treatment dataset
. import delimited "$projectdir/output/i
> nput_treatment.csv", clear
(encoding automatically selected: ISO-88
> 59-1)
(211 vars, 50,000 obs)

. gen treatment_dataset=1

. *       Convert control strings to dat
> es     * 
. foreach var of varlist   covid_test_po
> sitive_date                           
>     ///
>                                       
>            covid_test_positive_date2  
>                             ///
>                                       
>            covid_test_positive_date3  
>                             ///
>                                       
>            covid_test_positive_treat  
>                             ///
>                                       
>            prior_covid_date           
>                             ///
>                                       
>            sotrovimab                 
>                                       
>       ///
>                                       
>            molnupiravir               
>                                     //
> / 
>                                       
>            paxlovid                   
>                                       
>       ///
>                                       
>            remdesivir                 
>                                       
>       ///
>                                       
>            casirivimab                
>                                     //
> /
>                                       
>            sotrovimab_not_start       
>                             ///
>                                       
>            molnupiravir_not_start     
>                             ///
>                                       
>            paxlovid_not_start         
>                                     //
> /
>                                       
>            date_treated               
>                                     //
> /
>                                       
>            start_date                 
>                                       
>       ///
>                                       
>            drugs_paxlovid_interaction 
>                             ///
>                                       
>            drugs_nirmatrelvir_interact
> ion                 ///
>                                       
>            last_vaccination_date      
>                             ///
>                                       
>            death_date                 
>                                       
>       ///
>                                       
>            dereg_date                 
>                                     //
> /
>                                       
>            bmi_date_measured          
>                                     //
> /
>                                       
>            creatinine_ctv3_date       
>                             ///
>                                       
>            creatinine_snomed_date     
>                             ///
>                                       
>            creatinine_short_snomed_dat
> e                   ///
>                                       
>            ae_diverticulitis_icd      
>                             ///
>                                       
>            ae_diverticulitis_snomed   
>                             ///
>                                       
>            ae_diarrhoea_snomed        
>                             ///
>                                       
>            ae_taste_snomed            
>                                     //
> /
>                                       
>            ae_taste_icd               
>                                     //
> /
>                                       
>            ae_rash_snomed             
>                                     //
> /
>                                       
>            ae_anaphylaxis_icd         
>                                     //
> /
>                                       
>            ae_anaphylaxis_snomed      
>                             ///
>                                       
>            ae_anaphlaxis_ae           
>                                     //
> /
>                                       
>            ae_drugreact_ae            
>                                     //
> /
>                                       
>            ae_allergic_ae             
>                                     //
> /
>                                       
>            ae_rheumatoid_arthritis_sno
> med                 ///
>                                       
>            ae_rheumatoid_arthritis_icd
>                     ///
>                                       
>            ae_sle_ctv                 
>                                       
>       ///
>                                       
>            ae_sle_icd                 
>                                       
>       ///
>                                       
>            ae_psoriasis_snomed        
>                             ///
>                                       
>            ae_psoriatic_arthritis_snom
> ed                  ///
>                                       
>            ae_ankylosing_spondylitis_c
> tv                  ///
>                                       
>            ae_ibd_snomed              
>                                     //
> /
>                                       
>            ae_diverticulitis_ae       
>                             ///
>                                       
>            ae_rheumatoid_arthritis_ae 
>                             ///
>                                       
>            ae_sle_ae                  
>                                       
>       ///
>                                       
>            ae_psoriasis_ae            
>                                     //
> /
>                                       
>            ae_psoriatic_arthritis_ae  
>                             ///
>                                       
>            ae_ankylosing_spondylitis_a
> e                   ///
>                                       
>            ae_ibd_ae                  
>                                       
>       ///
>                                       
>            rheumatoid_arthritis_nhsd_s
> nomed               ///
>                                       
>            rheumatoid_arthritis_nhsd_i
> cd10                ///
>                                       
>            sle_nhsd_ctv               
>                                     //
> /
>                                       
>            sle_nhsd_icd10             
>                                     //
> /
>                                       
>            psoriasis_nhsd             
>                                     //
> /
>                                       
>            psoriatic_arthritis_nhsd   
>                             ///
>                                       
>            ankylosing_spondylitis_nhsd
>                     ///
>                                       
>            ibd_ctv                    
>                                       
>       ///
>                                       
>            allcause_emerg_aande       
>                             ///
>                                       
>            all_hosp_date              
>                                     //
> /
>                                       
>            all_hosp_date0             
>                                     //
> /
>                                       
>            all_hosp_date1             
>                                     //
> /
>                                       
>            all_hosp_date2             
>                                     //
> /
>                                       
>            hosp_discharge_date        
>                             ///
>                                       
>            hosp_discharge_date0       
>                             ///
>                                       
>            hosp_discharge_date1       
>                             ///
>                                       
>            hosp_discharge_date2       
>                             ///
>                                       
>            covid_hosp_date            
>                                     //
> /
>                                       
>            covid_hosp_date0           
>                                     //
> /
>                                       
>            covid_hosp_date1           
>                                     //
> /
>                                       
>            covid_hosp_date2           
>                                     //
> /                                     
>         
>                                       
>            covid_discharge_date       
>                             ///
>                                       
>            covid_discharge_date0      
>                             ///       
>                                       
>                                       
>            covid_discharge_date1      
>                             /// 
>                                       
>            covid_discharge_date2      
>                             /// 
>                                       
>            any_covid_hosp_discharge   
>                             ///       
>               
>                                       
>            covid_hosp_date_mabs       
>                             /// 
>                                       
>            covid_hosp_date_mabs_not_pr
> imary               /// 
>                                       
>            died_date_ons              
>                                     //
> /
>                                       
>            died_ons_covid             
>                                     //
> /
>                                       
>            pre_diverticulitis_icd     
>                             ///
>                                       
>            pre_diverticulitis_snomed  
>                             ///
>                                       
>            pre_diverticulitis_ae      
>                             ///
>                                       
>            pre_diarrhoea_snomed       
>                             ///
>                                       
>            pre_taste_snomed           
>                                     //
> /
>                                       
>            pre_taste_icd              
>                                     //
> /
>                                       
>            pre_rash_snomed            
>                                     //
> /
>                                       
>            pre_anaphylaxis_icd        
>                             ///
>                                       
>            pre_anaphylaxis_snomed     
>                             ///
>                                       
>            pre_anaphlaxis_ae          
>                                     //
> /
>                                       
>            pre_drugreact_ae           
>                                     //
> /
>                                       
>            pre_allergic_ae            
>                                     //
> /
>                                       
>            pre_anaphlaxis_ae          
>                                     //
> /
>                                       
>            pre_rheumatoid_arthritis_ae
>                     ///
>                                       
>            pre_rheumatoid_arthritis_sn
> omed                ///
>                                       
>            pre_rheumatoid_arthritis_ic
> d                   ///
>                                       
>            pre_ankylosing_spondylitis_
> ctv                 ///
>                                       
>            pre_ankylosing_spondylitis_
> ae                  ///
>                                       
>            pre_psoriasis_snomed       
>                             ///
>                                       
>            pre_psoriasis_ae           
>                                     //
> /
>                                       
>            pre_psoriatic_arthritis_ae 
>                             ///
>                                       
>            pre_psoriatic_arthritis_sno
> med                 ///
>                                       
>            pre_sle_ctv                
>                                     //
> /
>                                       
>            pre_sle_icd                
>                                     //
> /
>                                       
>            pre_sle_ae                 
>                                       
>       ///
>                                       
>            pre_ibd_ae                 
>                                       
>       ///
>                                       
>            pre_ibd_snomed {           
>                              
  2.         capture confirm string vari
> able `var'
  3.         if _rc==0 {
  4.         rename `var' a
  5.         gen `var' = date(a, "YMD")
  6.         drop a
  7.         format %td `var'
  8.  }
  9. }
(4,999 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(30,000 missing values generated)
(4,999 missing values generated)
(40,000 missing values generated)
(40,000 missing values generated)
(40,000 missing values generated)
(40,000 missing values generated)
(40,000 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(25,597 missing values generated)
(25,597 missing values generated)
(47,500 missing values generated)
(47,500 missing values generated)
(2,500 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(2,500 missing values generated)
(25,000 missing values generated)
(25,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(30,000 missing values generated)
(47,500 missing values generated)
(45,000 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(45,000 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(45,000 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(49,500 missing values generated)
(47,500 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(20,000 missing values generated)
(20,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)
(45,000 missing values generated)

. tab treatment_dataset

treatment_d |
     ataset |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          1 |     50,000      100.00    
>   100.00
------------+---------------------------
> --------
      Total |     50,000      100.00

. *********************************
. *  Append control & treatment datasets
>      *
. ********************************* 
. append using "$projectdir/output/data/
> control.dta"

. duplicates tag patient_id, gen(duplica
> te_patient_id)

Duplicates in terms of patient_id

. bys patient_id (treatment_dataset dupl
> icate_patient_id): gen n=_n

. tab n

          n |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          1 |     95,007       95.01    
>    95.01
          2 |      4,993        4.99    
>   100.00
------------+---------------------------
> --------
      Total |    100,000      100.00

. drop if n>1  // drops duplicate patien
> t id and in control group
(4,993 observations deleted)

. tab control_dataset,m

control_dat |
       aset |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          1 |     45,007       47.37    
>    47.37
          . |     50,000       52.63    
>   100.00
------------+---------------------------
> --------
      Total |     95,007      100.00

. tab treatment_dataset,m

treatment_d |
     ataset |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          1 |     50,000       52.63    
>    52.63
          . |     45,007       47.37    
>   100.00
------------+---------------------------
> --------
      Total |     95,007      100.00

. count if start_date==.
  25,597

. count if start_date!=date_treated & tr
> eatment_dataset==1
  0

. count if start_date!=covid_test_positi
> ve_date & control_dataset==1
  44,953

. 
. ****************************
. *       EXPOSURE                *
. ****************************
. ** removing individuals who did not st
> art therapy
. foreach var of varlist sotrovimab moln
> upiravir paxlovid {
  2.     display "`var'"
  3.         count if `var'!=.
  4.         count if `var'==date_treate
> d & `var'!=. & date_treated!=.
  5.         count if `var'==date_treate
> d & `var'!=. & date_treated!=. & `var'
> _not_start!=.
  6.         gen `var'_start = 1 if `var
> '==date_treated & `var'!=. & date_trea
> ted!=. & `var'_not_start==.
  7.         replace `var'_start = 0 if 
> `var'==date_treated & `var'!=. & date_
> treated!=. & `var'_not_start!=.
  8.         tab `var'_start, m  //numbe
> r on treatment, first drug given, and 
> drug was started
  9. }
sotrovimab
  10,047
  8,168
  87
(86,926 missing values generated)
(87 real changes made)

sotrovimab_ |
      start |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          0 |         87        0.09    
>     0.09
          1 |      8,081        8.51    
>     8.60
          . |     86,839       91.40    
>   100.00
------------+---------------------------
> --------
      Total |     95,007      100.00
molnupiravir
  10,044
  8,256
  79
(86,830 missing values generated)
(79 real changes made)

molnupiravi |
    r_start |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          0 |         79        0.08    
>     0.08
          1 |      8,177        8.61    
>     8.69
          . |     86,751       91.31    
>   100.00
------------+---------------------------
> --------
      Total |     95,007      100.00
paxlovid
  10,048
  8,129
  91
(86,969 missing values generated)
(91 real changes made)

paxlovid_st |
        art |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          0 |         91        0.10    
>     0.10
          1 |      8,038        8.46    
>     8.56
          . |     86,878       91.44    
>   100.00
------------+---------------------------
> --------
      Total |     95,007      100.00

. gen drug=7 if remdesivir==date_treated
> &remdesivir!=.&date_treated!=.
(94,950 missing values generated)

. replace drug=8 if casirivimab==date_tr
> eated&casirivimab!=.&date_treated!=.
(57 real changes made)

. tab drug //7=116, 8=38

       drug |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          7 |         57       50.00    
>    50.00
          8 |         57       50.00    
>   100.00
------------+---------------------------
> --------
      Total |        114      100.00

. replace drug=1 if sotrovimab==date_tre
> ated & sotrovimab_start==1 
(8,081 real changes made)

. replace drug=2 if paxlovid==date_treat
> ed & paxlovid_start==1
(8,038 real changes made)

. replace drug=3 if molnupiravir==date_t
> reated & molnupiravir_start==1
(8,177 real changes made)

. replace drug=4 if sotrovimab==date_tre
> ated & sotrovimab_start==0 
(87 real changes made)

. replace drug=5 if paxlovid==date_treat
> ed & paxlovid_start==0 
(91 real changes made)

. replace drug=6 if molnupiravir==date_t
> reated & molnupiravir_start==0 
(79 real changes made)

. replace drug=0 if drug==.
(70,380 real changes made)

. label define drug 0 "control" 1 "sotro
> vimab" 2 "paxlovid" 3"molnupiravir", r
> eplace

. label values drug drug

. tab drug, m

        drug |      Freq.     Percent   
>      Cum.
-------------+--------------------------
> ---------
     control |     70,380       74.08   
>     74.08
  sotrovimab |      8,073        8.50   
>     82.58
    paxlovid |      8,034        8.46   
>     91.03
molnupiravir |      8,177        8.61   
>     99.64
           4 |         87        0.09   
>     99.73
           5 |         91        0.10   
>     99.83
           6 |         79        0.08   
>     99.91
           7 |         42        0.04   
>     99.95
           8 |         44        0.05   
>    100.00
-------------+--------------------------
> ---------
       Total |     95,007      100.00

. drop if drug>3
(343 observations deleted)

. 
. ** start date is date treatment for tr
> eatment arms and date of covid test fo
> r control arm 
. count if start_date==. //should be 0
  25,597

. count if start_date!=covid_test_positi
> ve_date & drug==0  //should be 0
  67,722

. count if start_date!=date_treated & dr
> ug>0 //should be 0
  136

. 
. ** check number of positive covid test
> s prior to drug in treatment arms
. bys drug:count if covid_test_positive_
> date==. // should be 0 in control arm

----------------------------------------
-> drug = control
  7,086
----------------------------------------
-> drug = sotrovimab
  784
----------------------------------------
-> drug = paxlovid
  782
----------------------------------------
-> drug = molnupiravir
  817

. bys drug:count if covid_test_positive_
> date!=. 

----------------------------------------
-> drug = control
  63,294
----------------------------------------
-> drug = sotrovimab
  7,289
----------------------------------------
-> drug = paxlovid
  7,252
----------------------------------------
-> drug = molnupiravir
  7,360

. bys drug:count if covid_test_positive_
> date!=.&date_treated!=.& date_treated>
> covid_test_positive_date //test prior 
> to treatment

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  3,368
----------------------------------------
-> drug = paxlovid
  3,316
----------------------------------------
-> drug = molnupiravir
  3,359

. bys drug:count if covid_test_positive_
> date!=.&date_treated!=.& (date_treated
> -covid_test_positive_date>0)&(date_tre
> ated-covid_test_positive_date<=5) //te
> st <5d

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  59
----------------------------------------
-> drug = paxlovid
  52
----------------------------------------
-> drug = molnupiravir
  55

. bys drug:count if covid_test_positive_
> date2!=.&date_treated!=.& date_treated
> <covid_test_positive_date2 //2nd covid
>  episode prior to treatment 

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  430
----------------------------------------
-> drug = paxlovid
  412
----------------------------------------
-> drug = molnupiravir
  453

. bys drug:count if covid_test_positive_
> date2!=.&date_treated!=.& (date_treate
> d-covid_test_positive_date2>0)&(date_t
> reated-covid_test_positive_date2<=5) /
> /test <5d

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  6
----------------------------------------
-> drug = paxlovid
  3
----------------------------------------
-> drug = molnupiravir
  10

. bys drug:count if covid_test_positive_
> date3!=.&date_treated!=.& date_treated
> <covid_test_positive_date3 //3rd covid
>  episode prior to treatment 

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  391
----------------------------------------
-> drug = paxlovid
  429
----------------------------------------
-> drug = molnupiravir
  471

. bys drug:count if covid_test_positive_
> date3!=.&date_treated!=.& (date_treate
> d-covid_test_positive_date3>0)&(date_t
> reated-covid_test_positive_date3<=5) /
> /test <5d

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  5
----------------------------------------
-> drug = paxlovid
  9
----------------------------------------
-> drug = molnupiravir
  8

. ** check in control group that covid p
> ositive, and not repeat covid test aft
> er an infection within 30 days prior
. tab covid_test_positive covid_positive
> _previous_30_days if drug==0

           | covid_posi
           | tive_previ
           | ous_30_day
covid_test |     s
 _positive |         0 |     Total
-----------+-----------+----------
         0 |     6,721 |     7,062 
         1 |    60,104 |    63,318 
-----------+-----------+----------
     Total |    66,825 |    70,380 


           | covid_posi
           | tive_previ
           | ous_30_day
covid_test |     s
 _positive |         1 |     Total
-----------+-----------+----------
         0 |       341 |     7,062 
         1 |     3,214 |    63,318 
-----------+-----------+----------
     Total |     3,555 |    70,380 

. drop if drug==0 & covid_test_positive=
> =1 & covid_positive_previous_30_days==
> 1
(3,214 observations deleted)

. ** gen study start and study end date
. gen campaign_start=mdy(12,16,2021)

. gen study_end_date=mdy(06,01,2023)

. gen start_date_29=start_date + 29
(24,399 missing values generated)

. format campaign_start study_end_date s
> tart_date_29 %td

. 
. ****************************
. *       INCLUSION               *
. ****************************
. ** inclusion criteria*
. keep if age>=18 & age<110
(19,328 observations deleted)

. keep if sex=="F"|sex=="M"
(0 observations deleted)

. keep if has_died==0
(3,605 observations deleted)

. ** exclusion criteria*
. count if start_date>dereg_date & start
> _date!=.
  4,930

. count if start_date>death_date & start
> _date!=.
  4,950

. drop if start_date>death_date | start_
> date>dereg_date
(12,963 observations deleted)

. 
. ** high risk cohort from blueteq thera
> peutics datafor drug arms
. tab high_risk_cohort_therapeutics drug
> ,m //should be 0 in control group

high_risk_cohort_ther |    drug
             apeutics |   control |     
> Total
----------------------+-----------+-----
> -----
       Downs syndrome |     4,142 |     
> 5,641 
          HIV or AIDS |     2,050 |     
> 2,831 
                 IMID |     4,122 |     
> 5,524 
    IMID,solid cancer |     4,024 |     
> 5,475 
                   NA |     2,059 |     
> 2,822 
haematological dise.. |     2,085 |     
> 2,823 
haematological mali.. |     2,059 |     
> 2,797 
        liver disease |     2,043 |     
> 2,758 
primary immune defi.. |     4,020 |     
> 5,496 
sickle cell disease.. |     4,104 |     
> 5,588 
         solid cancer |     4,073 |     
> 5,554 
solid organ transpl.. |     3,978 |     
> 5,432 
stem cell transplan.. |     2,085 |     
> 2,813 
----------------------+-----------+-----
> -----
                Total |    40,844 |    5
> 5,554 


high_risk_cohort_ther |    drug
             apeutics | sotrovima |     
> Total
----------------------+-----------+-----
> -----
       Downs syndrome |       471 |     
> 5,641 
          HIV or AIDS |       244 |     
> 2,831 
                 IMID |       475 |     
> 5,524 
    IMID,solid cancer |       505 |     
> 5,475 
                   NA |       265 |     
> 2,822 
haematological dise.. |       240 |     
> 2,823 
haematological mali.. |       240 |     
> 2,797 
        liver disease |       251 |     
> 2,758 
primary immune defi.. |       509 |     
> 5,496 
sickle cell disease.. |       500 |     
> 5,588 
         solid cancer |       505 |     
> 5,554 
solid organ transpl.. |       454 |     
> 5,432 
stem cell transplan.. |       231 |     
> 2,813 
----------------------+-----------+-----
> -----
                Total |     4,890 |    5
> 5,554 


high_risk_cohort_ther |    drug
             apeutics |  paxlovid |     
> Total
----------------------+-----------+-----
> -----
       Downs syndrome |       503 |     
> 5,641 
          HIV or AIDS |       262 |     
> 2,831 
                 IMID |       456 |     
> 5,524 
    IMID,solid cancer |       465 |     
> 5,475 
                   NA |       260 |     
> 2,822 
haematological dise.. |       235 |     
> 2,823 
haematological mali.. |       260 |     
> 2,797 
        liver disease |       233 |     
> 2,758 
primary immune defi.. |       485 |     
> 5,496 
sickle cell disease.. |       484 |     
> 5,588 
         solid cancer |       498 |     
> 5,554 
solid organ transpl.. |       500 |     
> 5,432 
stem cell transplan.. |       232 |     
> 2,813 
----------------------+-----------+-----
> -----
                Total |     4,873 |    5
> 5,554 


high_risk_cohort_ther |    drug
             apeutics | molnupira |     
> Total
----------------------+-----------+-----
> -----
       Downs syndrome |       525 |     
> 5,641 
          HIV or AIDS |       275 |     
> 2,831 
                 IMID |       471 |     
> 5,524 
    IMID,solid cancer |       481 |     
> 5,475 
                   NA |       238 |     
> 2,822 
haematological dise.. |       263 |     
> 2,823 
haematological mali.. |       238 |     
> 2,797 
        liver disease |       231 |     
> 2,758 
primary immune defi.. |       482 |     
> 5,496 
sickle cell disease.. |       500 |     
> 5,588 
         solid cancer |       478 |     
> 5,554 
solid organ transpl.. |       500 |     
> 5,432 
stem cell transplan.. |       265 |     
> 2,813 
----------------------+-----------+-----
> -----
                Total |     4,947 |    5
> 5,554 

. gen downs_syndrome_therap= 1 if strpos
> (high_risk_cohort_therapeutics, "Downs
>  syndrome")
(49,913 missing values generated)

. gen solid_cancer_therap=1 if strpos(hi
> gh_risk_cohort_therapeutics, "solid ca
> ncer")
(44,525 missing values generated)

. gen haem_disease_therap=1 if strpos(hi
> gh_risk_cohort_therapeutics, "haematol
> ogical malignancies")
(52,757 missing values generated)

. replace haem_disease_therap=1 if strpo
> s(high_risk_cohort_therapeutics, "sick
> le cell disease")
(5,588 real changes made)

. replace haem_disease_therap=1 if strpo
> s(high_risk_cohort_therapeutics, "haem
> atological diseases")
(2,823 real changes made)

. replace haem_disease_therap=1 if strpo
> s(high_risk_cohort_therapeutics, "stem
>  cell transplant")
(2,813 real changes made)

. gen renal_disease_therap= 1 if strpos(
> high_risk_cohort_therapeutics, "renal 
> disease")
(50,122 missing values generated)

. gen liver_disease_therap= 1 if strpos(
> high_risk_cohort_therapeutics, "liver 
> disease")
(52,796 missing values generated)

. gen imid_on_drug_therap= 1 if strpos(h
> igh_risk_cohort_therapeutics, "IMID")
(44,555 missing values generated)

. gen immunosupression_therap= 1 if strp
> os(high_risk_cohort_therapeutics, "pri
> mary immune deficiencies")
(50,058 missing values generated)

. gen hiv_aids_therap= 1 if strpos(high_
> risk_cohort_therapeutics, "HIV or AIDS
> ")
(52,723 missing values generated)

. gen organ_transplant_therap= 1 if strp
> os(high_risk_cohort_therapeutics, "sol
> id organ recipients")
(55,554 missing values generated)

. replace organ_transplant_therap= 1 if 
> strpos(high_risk_cohort_therapeutics, 
> "solid organ transplant")
(5,432 real changes made)

. gen rare_neuro_therap= 1 if strpos(hig
> h_risk_cohort_therapeutics, "rare neur
> ological conditions")
(49,966 missing values generated)

. bys drug: count if high_risk_cohort_th
> erapeutics!=""&high_risk_cohort_therap
> eutics!="other"& min(downs_syndrome_th
> erap,solid_cancer_therap,haem_disease_
> therap,renal_disease_therap,liver_dise
> ase_therap,imid_on_drug_therap,immunos
> upression_therap,hiv_aids_therap,organ
> _transplant_therap,rare_neuro_therap)=
> =. //check if all diseases have been c
> aptured

----------------------------------------
-> drug = control
  2,059
----------------------------------------
-> drug = sotrovimab
  265
----------------------------------------
-> drug = paxlovid
  260
----------------------------------------
-> drug = molnupiravir
  238

. tab high_risk_cohort_therapeutics if h
> igh_risk_cohort_therapeutics!=""&high_
> risk_cohort_therapeutics!="other"& min
> (downs_syndrome_therap,solid_cancer_th
> erap,haem_disease_therap,renal_disease
> _therap,liver_disease_therap,imid_on_d
> rug_therap,immunosupression_therap,hiv
> _aids_therap,organ_transplant_therap,r
> are_neuro_therap)==.

          high_risk_cohort_therapeutics 
> |      Freq.     Percent        Cum.
----------------------------------------
> +-----------------------------------
                                     NA 
> |      2,822      100.00      100.00
----------------------------------------
> +-----------------------------------
                                  Total 
> |      2,822      100.00

. foreach var of varlist downs_syndrome_
> therap solid_cancer_therap haem_diseas
> e_therap renal_disease_therap liver_di
> sease_therap imid_on_drug_therap immun
> osupression_therap hiv_aids_therap org
> an_transplant_therap rare_neuro_therap
> {
  2.         replace `var'=0 if `var'==.
>  
  3. }
(49,913 real changes made)
(44,525 real changes made)
(41,533 real changes made)
(50,122 real changes made)
(52,796 real changes made)
(44,555 real changes made)
(50,058 real changes made)
(52,723 real changes made)
(50,122 real changes made)
(49,966 real changes made)

. 
. ** high risk cohort from open codelist
>  from control group
. tab high_risk_cohort_nhsd drug,m 

high_risk_ |
cohort_nhs |    drug
         d |   control |     Total
-----------+-----------+----------
         0 |       921 |     1,241 
         1 |    39,923 |    54,313 
-----------+-----------+----------
     Total |    40,844 |    55,554 


high_risk_ |
cohort_nhs |    drug
         d | sotrovima |     Total
-----------+-----------+----------
         0 |        93 |     1,241 
         1 |     4,797 |    54,313 
-----------+-----------+----------
     Total |     4,890 |    55,554 


high_risk_ |
cohort_nhs |    drug
         d |  paxlovid |     Total
-----------+-----------+----------
         0 |       113 |     1,241 
         1 |     4,760 |    54,313 
-----------+-----------+----------
     Total |     4,873 |    55,554 


high_risk_ |
cohort_nhs |    drug
         d | molnupira |     Total
-----------+-----------+----------
         0 |       114 |     1,241 
         1 |     4,833 |    54,313 
-----------+-----------+----------
     Total |     4,947 |    55,554 

. count if imid_on_drug==1 & imid_nhsd==
> 1 & imid_drug==0 //should be 0
  14,953

. count if imid_on_drug==1 & imid_nhsd==
> 1 & imid_drug==0 & downs_syndrome==0 &
> solid_cancer==0 &haem_disease==0 &rena
> l_disease==0 &liver_disease==0 &immuno
> supression==0 &hiv_aids==0 &organ_tran
> splant==0 &rare_neuro==0
  660

. count if imid_on_drug==1 & imid_nhsd==
> 0 & imid_drug==1 //should be 0
  566

. count if imid_on_drug==1 & imid_nhsd==
> 0 & imid_drug==1 & downs_syndrome==0 &
> solid_cancer==0 &haem_disease==0 &rena
> l_disease==0 &liver_disease==0 &immuno
> supression==0 &hiv_aids==0 &organ_tran
> splant==0 &rare_neuro==0
  33

. count if oral_steroid_drug_nhsd_6m_cou
> nt<4 &oral_steroid_drugs_nhsd==1
  552

. count if oral_steroid_drug_nhsd_6m_cou
> nt<4 &oral_steroid_drugs_nhsd==1 &immu
> nosuppresant==0 &methotrexate==0 &cicl
> osporin==0 &mycophenolate==0 
  528

. count if oral_steroid_drug_nhsd_6m_cou
> nt<4 &oral_steroid_drugs_nhsd==1 &immu
> nosuppresant==0 &methotrexate==0 &cicl
> osporin==0 &mycophenolate==0 &imid_on_
> drug==1
  258

. count if oral_steroid_drug_nhsd_6m_cou
> nt<4 &oral_steroid_drugs_nhsd==1 &immu
> nosuppresant==0 &methotrexate==0 &cicl
> osporin==0 &mycophenolate==0 &imid_on_
> drug==1 &downs_syndrome==0 &solid_canc
> er==0 &haem_disease==0 &renal_disease=
> =0 &liver_disease==0 &immunosupression
> ==0 &hiv_aids==0 &organ_transplant==0 
> &rare_neuro==0
  15

. replace imid_on_drug=0 if oral_steroid
> _drug_nhsd_6m_count<4 &oral_steroid_dr
> ugs_nhsd==1 &immunosuppresant==0 &meth
> otrexate==0 &ciclosporin==0 &mycopheno
> late==0 &imid_on_drug==1 //ignore if s
> teriods<4 scripts in 6m & not coded ot
> her imid drug 
(258 real changes made)

. replace oral_steroid_drugs_nhsd=0 if o
> ral_steroid_drug_nhsd_6m_count<4 &oral
> _steroid_drugs_nhsd==1 //ignore if ste
> riods<4 scripts in 6m
(552 real changes made)

. count if imid_on_drug==1 & imid_nhsd==
> 1 & imid_drug==0 //should be same numb
> er as those dropped above 
  14,953

. replace imid_on_drug=0 if imid_nhsd==1
>  & imid_drug==0 
(14,953 real changes made)

. replace imid_on_drug=0 if imid_nhsd==0
>  & imid_drug==1 
(460 real changes made)

. gen high_risk_cohort_codelist=((downs_
> syndrome + solid_cancer + haem_disease
>  + renal_disease + liver_disease + imi
> d_on_drug + immunosupression + hiv_aid
> s + organ_transplant + rare_neuro )>0)

. tab high_risk_cohort_nhsd high_risk_co
> hort_codelist

           | high_risk_
high_risk_ | cohort_cod
cohort_nhs |   elist
         d |         0 |     Total
-----------+-----------+----------
         0 |     1,241 |     1,241 
         1 |       703 |    54,313 
-----------+-----------+----------
     Total |     1,944 |    55,554 


           | high_risk_
high_risk_ | cohort_cod
cohort_nhs |   elist
         d |         1 |     Total
-----------+-----------+----------
         0 |         0 |     1,241 
         1 |    53,610 |    54,313 
-----------+-----------+----------
     Total |    53,610 |    55,554 

. 
. ** combine two high risk cohorts into 
> one 
. foreach var of varlist downs_syndrome 
> solid_cancer haem_disease renal_diseas
> e liver_disease imid_on_drug immunosup
> ression hiv_aids organ_transplant rare
> _neuro {
  2.         gen `var'_comb = `var'
  3.         replace `var'_comb = 1 if `
> var'_therap==1 
  4.         tab `var' `var'_therap 
  5.         tab `var'_comb
  6. }
(4,570 real changes made)

           | downs_synd
           | rome_thera
downs_synd |     p
      rome |         0 |     Total
-----------+-----------+----------
         0 |    40,483 |    45,053 
         1 |     9,430 |    10,501 
-----------+-----------+----------
     Total |    49,913 |    55,554 


           | downs_synd
           | rome_thera
downs_synd |     p
      rome |         1 |     Total
-----------+-----------+----------
         0 |     4,570 |    45,053 
         1 |     1,071 |    10,501 
-----------+-----------+----------
     Total |     5,641 |    55,554 

downs_syndr |
   ome_comb |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          0 |     40,483       72.87    
>    72.87
          1 |     15,071       27.13    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00
(9,867 real changes made)

           | solid_canc
solid_canc | er_therap
        er |         0 |     Total
-----------+-----------+----------
         0 |    40,090 |    49,957 
         1 |     4,435 |     5,597 
-----------+-----------+----------
     Total |    44,525 |    55,554 


           | solid_canc
solid_canc | er_therap
        er |         1 |     Total
-----------+-----------+----------
         0 |     9,867 |    49,957 
         1 |     1,162 |     5,597 
-----------+-----------+----------
     Total |    11,029 |    55,554 

solid_cance |
     r_comb |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          0 |     40,090       72.16    
>    72.16
          1 |     15,464       27.84    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00
(7,339 real changes made)

           | haem_disea
haem_disea | se_therap
        se |         0 |     Total
-----------+-----------+----------
         0 |    21,872 |    29,211 
         1 |    19,661 |    26,343 
-----------+-----------+----------
     Total |    41,533 |    55,554 


           | haem_disea
haem_disea | se_therap
        se |         1 |     Total
-----------+-----------+----------
         0 |     7,339 |    29,211 
         1 |     6,682 |    26,343 
-----------+-----------+----------
     Total |    14,021 |    55,554 

haem_diseas |
     e_comb |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          0 |     21,872       39.37    
>    39.37
          1 |     33,682       60.63    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00
(3,544 real changes made)

           | renal_dise
renal_dise | ase_therap
       ase |         0 |     Total
-----------+-----------+----------
         0 |    32,883 |    36,427 
         1 |    17,239 |    19,127 
-----------+-----------+----------
     Total |    50,122 |    55,554 


           | renal_dise
renal_dise | ase_therap
       ase |         1 |     Total
-----------+-----------+----------
         0 |     3,544 |    36,427 
         1 |     1,888 |    19,127 
-----------+-----------+----------
     Total |     5,432 |    55,554 

renal_disea |
    se_comb |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          0 |     32,883       59.19    
>    59.19
          1 |     22,671       40.81    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00
(2,230 real changes made)

           | liver_dise
liver_dise | ase_therap
       ase |         0 |     Total
-----------+-----------+----------
         0 |    42,856 |    45,086 
         1 |     9,940 |    10,468 
-----------+-----------+----------
     Total |    52,796 |    55,554 


           | liver_dise
liver_dise | ase_therap
       ase |         1 |     Total
-----------+-----------+----------
         0 |     2,230 |    45,086 
         1 |       528 |    10,468 
-----------+-----------+----------
     Total |     2,758 |    55,554 

liver_disea |
    se_comb |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          0 |     42,856       77.14    
>    77.14
          1 |     12,698       22.86    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00
(8,578 real changes made)

           | imid_on_dr
imid_on_dr | ug_therap
        ug |         0 |     Total
-----------+-----------+----------
         0 |    34,869 |    43,447 
         1 |     9,686 |    12,107 
-----------+-----------+----------
     Total |    44,555 |    55,554 


           | imid_on_dr
imid_on_dr | ug_therap
        ug |         1 |     Total
-----------+-----------+----------
         0 |     8,578 |    43,447 
         1 |     2,421 |    12,107 
-----------+-----------+----------
     Total |    10,999 |    55,554 

imid_on_dru |
     g_comb |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          0 |     34,869       62.77    
>    62.77
          1 |     20,685       37.23    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00
(4,948 real changes made)

           | immunosupr
           | ession_the
immunosupr |    rap
    ession |         0 |     Total
-----------+-----------+----------
         0 |    45,051 |    49,999 
         1 |     5,007 |     5,555 
-----------+-----------+----------
     Total |    50,058 |    55,554 


           | immunosupr
           | ession_the
immunosupr |    rap
    ession |         1 |     Total
-----------+-----------+----------
         0 |     4,948 |    49,999 
         1 |       548 |     5,555 
-----------+-----------+----------
     Total |     5,496 |    55,554 

immunosupre |
 ssion_comb |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          0 |     45,051       81.09    
>    81.09
          1 |     10,503       18.91    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00
(2,300 real changes made)

           | hiv_aids_t
           |   herap
  hiv_aids |         0 |     Total
-----------+-----------+----------
         0 |    42,648 |    44,948 
         1 |    10,075 |    10,606 
-----------+-----------+----------
     Total |    52,723 |    55,554 


           | hiv_aids_t
           |   herap
  hiv_aids |         1 |     Total
-----------+-----------+----------
         0 |     2,300 |    44,948 
         1 |       531 |    10,606 
-----------+-----------+----------
     Total |     2,831 |    55,554 

hiv_aids_co |
         mb |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          0 |     42,648       76.77    
>    76.77
          1 |     12,906       23.23    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00
(3,750 real changes made)

           | organ_tran
           | splant_the
organ_tran |    rap
    splant |         0 |     Total
-----------+-----------+----------
         0 |    34,590 |    38,340 
         1 |    15,532 |    17,214 
-----------+-----------+----------
     Total |    50,122 |    55,554 


           | organ_tran
           | splant_the
organ_tran |    rap
    splant |         1 |     Total
-----------+-----------+----------
         0 |     3,750 |    38,340 
         1 |     1,682 |    17,214 
-----------+-----------+----------
     Total |     5,432 |    55,554 

organ_trans |
 plant_comb |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          0 |     34,590       62.26    
>    62.26
          1 |     20,964       37.74    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00
(2,438 real changes made)

           | rare_neuro
           |  _therap
rare_neuro |         0 |     Total
-----------+-----------+----------
         0 |    21,484 |    23,922 
         1 |    28,482 |    31,632 
-----------+-----------+----------
     Total |    49,966 |    55,554 


           | rare_neuro
           |  _therap
rare_neuro |         1 |     Total
-----------+-----------+----------
         0 |     2,438 |    23,922 
         1 |     3,150 |    31,632 
-----------+-----------+----------
     Total |     5,588 |    55,554 

rare_neuro_ |
       comb |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          0 |     21,484       38.67    
>    38.67
          1 |     34,070       61.33    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00

. 
. ****************************
. *       OUTCOME         *
. ****************************
. *** AESI, IMAE and some Drug reaction 
> (need to add further IMAE and DRESS, S
> JS, TEN) 
. gen new_ae_ra_icd = ae_rheumatoid_arth
> ritis_icd if rheumatoid_arthritis_nhsd
> _snomed==0 & rheumatoid_arthritis_nhsd
> _icd10==0  
(37,551 missing values generated)

. gen new_ae_ra_snomed = ae_rheumatoid_a
> rthritis_snomed if rheumatoid_arthriti
> s_nhsd_snomed==0 & rheumatoid_arthriti
> s_nhsd_icd10==0
(37,443 missing values generated)

. gen new_ae_ra_ae = ae_rheumatoid_arthr
> itis_ae if rheumatoid_arthritis_nhsd_s
> nomed==0 & rheumatoid_arthritis_nhsd_i
> cd10==0  
(37,426 missing values generated)

. gen new_ae_sle_icd = ae_sle_icd if sle
> _nhsd_ctv==0 & sle_nhsd_icd10==0
(37,670 missing values generated)

. gen new_ae_sle_ctv = ae_sle_ctv if sle
> _nhsd_ctv==0 & sle_nhsd_icd10==0
(37,436 missing values generated)

. gen new_ae_sle_ae = ae_sle_ae if sle_n
> hsd_ctv==0 & sle_nhsd_icd10==0
(37,628 missing values generated)

. gen new_ae_psoriasis_snomed = ae_psori
> asis_snomed if psoriasis_nhsd==0
(35,542 missing values generated)

. gen new_ae_psoriasis_ae = ae_psoriasis
> _ae if psoriasis_nhsd==0
(35,597 missing values generated)

. gen new_ae_psa_snomed = ae_psoriatic_a
> rthritis_snomed if psoriatic_arthritis
> _nhsd==0
(35,537 missing values generated)

. gen new_ae_psa_ae = ae_psoriatic_arthr
> itis_ae if psoriatic_arthritis_nhsd==0
(35,586 missing values generated)

. gen new_ae_ankspon_ctv = ae_ankylosing
> _spondylitis_ctv if ankylosing_spondyl
> itis_nhsd==0
(35,464 missing values generated)

. gen new_ae_ankspon_ae = ae_ankylosing_
> spondylitis_ae if ankylosing_spondylit
> is_nhsd==0
(35,614 missing values generated)

. gen new_ae_ibd_snomed = ae_ibd_snomed 
> if ibd_ctv==0
(35,536 missing values generated)

. gen new_ae_ibd_ae = ae_ibd_ae if ibd_c
> tv==0
(35,493 missing values generated)

. 
. global ae_spc                   ae_div
> erticulitis_snomed                ///
>                                       
>           ae_diarrhoea_snomed         
>                     ///
>                                       
>           ae_taste_snomed             
>                             

. global ae_spc_icd               ae_div
> erticulitis_icd                   ///
>                                       
>           ae_taste_icd                
>                     

. global ae_spc_emerg             ae_div
> erticulitis_ae                        
>                                       
>       

. global ae_drug                  ae_ana
> phylaxis_snomed                   /// 
>     
>                                       
>           ae_rash_snomed  

. global ae_drug_emerg    ae_anaphlaxis_
> ae                                ///
>                                       
>           ae_drugreact_ae             
>                     ///
>                                       
>           ae_allergic_ae              
>                                       
>                                   

. global ae_drug_icd              ae_ana
> phylaxis_icd

. global ae_imae                  new_ae
> _ra_snomed                            
>     ///
>                                       
>           new_ae_sle_ctv              
>                     ///
>                                       
>           new_ae_psoriasis_snomed     
>             ///
>                                       
>           new_ae_psa_snomed           
>                     ///
>                                       
>           new_ae_ankspon_ctv          
>                     ///
>                                       
>           new_ae_ibd_snomed       

. global ae_imae_icd              new_ae
> _ra_icd                               
>     ///
>                                       
>           new_ae_sle_icd          

. global ae_imae_emerg    new_ae_ra_ae  
>                                   ///
>                                       
>           new_ae_sle_ae               
>                     ///
>                                       
>           new_ae_psoriasis_ae         
>                     ///
>                                       
>           new_ae_psa_ae               
>                     ///
>                                       
>           new_ae_ankspon_ae           
>                     ///
>                                       
>           new_ae_ibd_ae               
>             

.                                       
>                                   
. *remove event if occurred before start
. foreach x in $ae_spc $ae_spc_icd $ae_s
> pc_emerg $ae_drug $ae_drug_icd $ae_dru
> g_emerg $ae_imae $ae_imae_icd $ae_drug
> _emerg{
  2.                                 dis
> play "`x'"
  3.                                 cou
> nt if (`x' > start_date | `x' < start_
> date + 28) & `x'!=. 
  4.                                 cou
> nt if (`x' < start_date | `x' > start_
> date + 28) & `x'!=. & drug==0
  5.                                 cou
> nt if (`x' < start_date | `x' > start_
> date + 28) & `x'!=. & drug>0
  6.                                 //r
> eplace `x'=. if (`x' < start_date | `x
> ' > start_date + 28) & `x'!=.
. }
ae_diverticulitis_snomed
  22,343
  15,974
  5,572
ae_diarrhoea_snomed
  22,194
  15,824
  5,606
ae_taste_snomed
  22,129
  15,664
  5,654
ae_diverticulitis_icd
  22,294
  15,897
  5,633
ae_taste_icd
  22,189
  15,753
  5,588
ae_diverticulitis_ae
  22,275
  15,945
  5,561
ae_anaphylaxis_snomed
  22,268
  15,807
  5,654
ae_rash_snomed
  22,152
  15,706
  5,641
ae_anaphylaxis_icd
  22,245
  15,815
  5,589
ae_anaphlaxis_ae
  22,281
  15,946
  5,565
ae_drugreact_ae
  22,303
  15,913
  5,603
ae_allergic_ae
  22,195
  15,898
  5,492
new_ae_ra_snomed
  18,111
  12,883
  4,563
new_ae_sle_ctv
  18,118
  12,954
  4,497
new_ae_psoriasis_snomed
  20,012
  14,244
  5,032
new_ae_psa_snomed
  20,017
  14,211
  5,063
new_ae_ankspon_ctv
  20,090
  14,313
  5,032
new_ae_ibd_snomed
  20,018
  14,174
  5,119
new_ae_ra_icd
  18,003
  12,809
  4,518
new_ae_sle_icd
  17,884
  12,724
  4,510
ae_anaphlaxis_ae
  22,281
  15,946
  5,565
ae_drugreact_ae
  22,303
  15,913
  5,603
ae_allergic_ae
  22,195
  15,898
  5,492

. egen ae_spc_gp = rmin($ae_spc)
(12,012 missing values generated)

. egen ae_spc_serious = rmin($ae_spc_icd
> )
(20,068 missing values generated)

. egen ae_spc_emerg = rmin($ae_spc_emerg
> )
(33,279 missing values generated)

. egen ae_spc_all = rmin($ae_spc $ae_spc
> _icd $ae_spc_emerg)
(2,644 missing values generated)

. egen ae_drug_gp = rmin($ae_drug)
(20,134 missing values generated)

. egen ae_drug_serious = rmin($ae_drug_i
> cd)
(33,309 missing values generated)

. egen ae_drug_emerg = rmin($ae_drug_eme
> rg)
(11,838 missing values generated)

. egen ae_drug_all = rmin($ae_drug $ae_d
> rug_icd $ae_drug_emerg)
(2,556 missing values generated)

. egen ae_imae_gp = rmin($ae_imae)
(4,220 missing values generated)

. egen ae_imae_serious = rmin($ae_imae_i
> cd)
(25,452 missing values generated)

. egen ae_imae_emerg = rmin($ae_imae_eme
> rg)
(4,286 missing values generated)

. egen ae_imae_all = rmin($ae_imae $ae_i
> mae_icd $ae_imae_emerg)   
(253 missing values generated)

. egen ae_all = rmin($ae_spc $ae_spc_icd
>  $ae_spc_emerg $ae_drug $ae_drug_icd $
> ae_drug_emerg $ae_imae $ae_imae_icd $a
> e_imae_emerg)
(1 missing value generated)

. egen ae_all_serious = rmin($ae_spc_icd
>  $ae_spc_emerg $ae_drug_icd $ae_drug_e
> merg $ae_imae_icd $ae_imae_emerg)
(47 missing values generated)

. by drug, sort: count if ae_spc_all!=.

----------------------------------------
-> drug = control
  38,894
----------------------------------------
-> drug = sotrovimab
  4,662
----------------------------------------
-> drug = paxlovid
  4,634
----------------------------------------
-> drug = molnupiravir
  4,720

. by drug, sort: count if ae_drug_all!=.

----------------------------------------
-> drug = control
  38,940
----------------------------------------
-> drug = sotrovimab
  4,666
----------------------------------------
-> drug = paxlovid
  4,674
----------------------------------------
-> drug = molnupiravir
  4,718

. by drug, sort: count if ae_imae_all!=.

----------------------------------------
-> drug = control
  40,657
----------------------------------------
-> drug = sotrovimab
  4,865
----------------------------------------
-> drug = paxlovid
  4,852
----------------------------------------
-> drug = molnupiravir
  4,927

. by drug, sort: count if ae_all!=.

----------------------------------------
-> drug = control
  40,843
----------------------------------------
-> drug = sotrovimab
  4,890
----------------------------------------
-> drug = paxlovid
  4,873
----------------------------------------
-> drug = molnupiravir
  4,947

. 
. *** Secondary outcome - SAEs hospitali
> sation or death including COVID-19 
. * a&e all admission
. bys drug: count if allcause_emerg_aand
> e!=.

----------------------------------------
-> drug = control
  2,037
----------------------------------------
-> drug = sotrovimab
  238
----------------------------------------
-> drug = paxlovid
  233
----------------------------------------
-> drug = molnupiravir
  251

. *correcting COVID hosp events: admitte
> d on day 0 or day 1 after treatment - 
> to ignore sotro initiators with mab pr
> ocedure codes*
. bys drug: count if covid_hosp_date!=. 
> // all covid hospitalisation

----------------------------------------
-> drug = control
  4,108
----------------------------------------
-> drug = sotrovimab
  466
----------------------------------------
-> drug = paxlovid
  461
----------------------------------------
-> drug = molnupiravir
  515

. bys drug: count if covid_hosp_date0!=.
>  // hospitalisation after treatment da
> te (control group will not have covid_
> hosp_date0)

----------------------------------------
-> drug = control
  414
----------------------------------------
-> drug = sotrovimab
  48
----------------------------------------
-> drug = paxlovid
  50
----------------------------------------
-> drug = molnupiravir
  43

. // covid admission is the same date as
>  date treated 
. bys drug: count if covid_hosp_date0!=d
> ate_treated&covid_hosp_date0!=.&date_t
> reated!=.

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  48
----------------------------------------
-> drug = paxlovid
  50
----------------------------------------
-> drug = molnupiravir
  43

. bys drug: count if covid_hosp_date1!=(
> date_treated+1) &covid_hosp_date1!=.&d
> ate_treated!=.

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  48
----------------------------------------
-> drug = paxlovid
  40
----------------------------------------
-> drug = molnupiravir
  42

. // covid admission is the same date as
>  date treated and is a daycase
. bys drug: count if covid_hosp_date0==c
> ovid_discharge_date0&covid_hosp_date0!
> =.

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  0
----------------------------------------
-> drug = paxlovid
  0
----------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if covid_hosp_date1==c
> ovid_discharge_date1&covid_hosp_date1!
> =.

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  0
----------------------------------------
-> drug = paxlovid
  0
----------------------------------------
-> drug = molnupiravir
  0

. // covid admission is the same date as
>  mab
. bys drug: count if covid_hosp_date0==c
> ovid_hosp_date_mabs&covid_hosp_date_ma
> bs!=.

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  0
----------------------------------------
-> drug = paxlovid
  0
----------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if covid_hosp_date1==c
> ovid_hosp_date_mabs&covid_hosp_date_ma
> bs!=.

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  0
----------------------------------------
-> drug = paxlovid
  0
----------------------------------------
-> drug = molnupiravir
  0

. // covid admission is the same date as
>  mab and is a daycase or 24 hour admis
> sion
. bys drug: count if covid_hosp_date0==c
> ovid_hosp_date_mabs&covid_hosp_date0!=
> .&covid_hosp_date0==covid_discharge_da
> te0

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  0
----------------------------------------
-> drug = paxlovid
  0
----------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if covid_hosp_date1==c
> ovid_hosp_date_mabs&covid_hosp_date1!=
> .&covid_hosp_date1==covid_discharge_da
> te1

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  0
----------------------------------------
-> drug = paxlovid
  0
----------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if covid_hosp_date0==c
> ovid_hosp_date_mabs&covid_hosp_date0!=
> .&(covid_discharge_date0 - covid_hosp_
> date0)==1

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  0
----------------------------------------
-> drug = paxlovid
  0
----------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if covid_hosp_date1==c
> ovid_hosp_date_mabs&covid_hosp_date1!=
> .&(covid_discharge_date1 - covid_hosp_
> date1)==1

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  0
----------------------------------------
-> drug = paxlovid
  0
----------------------------------------
-> drug = molnupiravir
  0

. // checking admission and discharge da
> te; missing admission, missing dischag
> re, or dischagre preceed admission 
. count if covid_hosp_date!=.&covid_disc
> harge_date==.
  5,480

. count if covid_hosp_date==.&covid_disc
> harge_date!=.
  474

. count if covid_hosp_date!=.&covid_disc
> harge_date!=.&covid_hosp_date==covid_d
> ischarge_date
  0

. count if covid_hosp_date!=.&covid_disc
> harge_date!=.&covid_hosp_date<covid_di
> scharge_date
  32

. count if covid_hosp_date!=.&covid_disc
> harge_date!=.&covid_hosp_date>covid_di
> scharge_date
  38

. // REPLACE - ignore covid admission if
>  admission is the day 0 or day 1 after
>  treatment date treated AND a day case
. replace covid_hosp_date=. if covid_hos
> p_date0==covid_discharge_date0&covid_h
> osp_date0!=.
(0 real changes made)

. replace covid_hosp_date=. if covid_hos
> p_date1==covid_discharge_date1&covid_h
> osp_date1!=.  
(0 real changes made)

. // REPLACE - ignore covid admission if
>  admission is the day 0 or day 1 after
>  treatment date AND a mab procedures f
> or sotro 
. replace covid_hosp_date=. if covid_hos
> p_date0==covid_hosp_date_mabs&covid_ho
> sp_date_mabs!=.&drug==1
(0 real changes made)

. replace covid_hosp_date=. if covid_hos
> p_date1==covid_hosp_date_mabs&covid_ho
> sp_date_mabs!=.&drug==1 
(0 real changes made)

. 
. *correcting ALL hosp events: admitted 
> on day 0 or day 1 after treatment - to
>  ignore sotro initiators with mab proc
> edure codes*
. bys drug: count if all_hosp_date!=. //
>  all hospitalisation

----------------------------------------
-> drug = control
  4,029
----------------------------------------
-> drug = sotrovimab
  485
----------------------------------------
-> drug = paxlovid
  462
----------------------------------------
-> drug = molnupiravir
  514

. bys drug: count if all_hosp_date0!=. /
> / hospitalisation after treatment date
>  (control group will not have all_hosp
> _date0)

----------------------------------------
-> drug = control
  419
----------------------------------------
-> drug = sotrovimab
  56
----------------------------------------
-> drug = paxlovid
  36
----------------------------------------
-> drug = molnupiravir
  40

. // admission is the same date as date 
> treated 
. bys drug: count if all_hosp_date0!=dat
> e_treated&all_hosp_date0!=.&date_treat
> ed!=.

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  56
----------------------------------------
-> drug = paxlovid
  36
----------------------------------------
-> drug = molnupiravir
  40

. bys drug: count if all_hosp_date1!=(da
> te_treated+1) &all_hosp_date1!=.&date_
> treated!=.

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  57
----------------------------------------
-> drug = paxlovid
  44
----------------------------------------
-> drug = molnupiravir
  41

. // admission is the same date as date 
> treated and is a daycase
. bys drug: count if all_hosp_date0==hos
> p_discharge_date0&all_hosp_date0!=.

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  0
----------------------------------------
-> drug = paxlovid
  0
----------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if all_hosp_date1==hos
> p_discharge_date1&all_hosp_date1!=.

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  0
----------------------------------------
-> drug = paxlovid
  0
----------------------------------------
-> drug = molnupiravir
  0

. //  admission is the same date as mab
. bys drug: count if all_hosp_date0==cov
> id_hosp_date_mabs&covid_hosp_date_mabs
> !=.

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  0
----------------------------------------
-> drug = paxlovid
  0
----------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if all_hosp_date1==cov
> id_hosp_date_mabs&covid_hosp_date_mabs
> !=.

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  0
----------------------------------------
-> drug = paxlovid
  0
----------------------------------------
-> drug = molnupiravir
  0

. //  admission is the same date as mab 
> and is a daycase, 1 day admission
. bys drug: count if all_hosp_date0==cov
> id_hosp_date_mabs&all_hosp_date0!=.&al
> l_hosp_date0==hosp_discharge_date0

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  0
----------------------------------------
-> drug = paxlovid
  0
----------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if all_hosp_date1==cov
> id_hosp_date_mabs&all_hosp_date1!=.&al
> l_hosp_date1==hosp_discharge_date1

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  0
----------------------------------------
-> drug = paxlovid
  0
----------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if all_hosp_date0==cov
> id_hosp_date_mabs&all_hosp_date0!=.&(h
> osp_discharge_date0-all_hosp_date0)==1

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  0
----------------------------------------
-> drug = paxlovid
  0
----------------------------------------
-> drug = molnupiravir
  0

. bys drug: count if all_hosp_date1==cov
> id_hosp_date_mabs&all_hosp_date1!=.&(h
> osp_discharge_date1-all_hosp_date1)==1

----------------------------------------
-> drug = control
  0
----------------------------------------
-> drug = sotrovimab
  0
----------------------------------------
-> drug = paxlovid
  0
----------------------------------------
-> drug = molnupiravir
  0

. // checking admission and discharge da
> te; missing admission, missing dischag
> re, or dischagre preceed admission 
. count if all_hosp_date!=.&hosp_dischar
> ge_date==.
  4,962

. count if all_hosp_date==.&hosp_dischar
> ge_date!=.
  4,937

. count if all_hosp_date!=.&hosp_dischar
> ge_date!=.&all_hosp_date==hosp_dischar
> ge_date
  2

. count if all_hosp_date!=.&hosp_dischar
> ge_date!=.&all_hosp_date<hosp_discharg
> e_date
  258

. count if all_hosp_date!=.&hosp_dischar
> ge_date!=.&all_hosp_date>hosp_discharg
> e_date
  268

. // REPLACE - ignore covid admission if
>  admission is for covid AND day 0 or d
> ay 1 after treatment AND daycase
. replace all_hosp_date=. if all_hosp_da
> te0==covid_hosp_date0 & all_hosp_date0
> ==hosp_discharge_date0&all_hosp_date0!
> =.
(0 real changes made)

. replace all_hosp_date=. if all_hosp_da
> te1==covid_hosp_date1 & all_hosp_date1
> ==hosp_discharge_date1&all_hosp_date1!
> =.
(0 real changes made)

. // REPLACE - ignore admission if admis
> sion is for covid AND day 0 or day 1 a
> fter treatment AND a mab procedures fo
> r sotro 
. replace all_hosp_date=. if all_hosp_da
> te0==covid_hosp_date0 & all_hosp_date0
> ==covid_hosp_date_mabs & covid_hosp_da
> te_mabs!=.&drug==1
(0 real changes made)

. replace all_hosp_date=. if all_hosp_da
> te1==covid_hosp_date1 & all_hosp_date1
> ==covid_hosp_date_mabs & covid_hosp_da
> te_mabs!=.&drug==1 
(0 real changes made)

. 
. foreach var of varlist allcause_emerg_
> aande covid_hosp_date all_hosp_date di
> ed_date_ons{
  2.                                 dis
> play "`var'"
  3.                                 bys
>  drug: count if (`var' > start_date & 
> `var' < start_date + 28) & `var'!=.   
>                          
  4.                                 bys
>  drug: count if (`var' < start_date | 
> `var' > start_date + 28) & `var'!=.   
>                          
  5.                                 //r
> eplace `var'=. if (`var' < start_date 
> | `var' > start_date + 28) & `var'!=.
. }
allcause_emerg_aande

----------------------------------------
-> drug = control
  66
----------------------------------------
-> drug = sotrovimab
  13
----------------------------------------
-> drug = paxlovid
  10
----------------------------------------
-> drug = molnupiravir
  12

----------------------------------------
-> drug = control
  1,969
----------------------------------------
-> drug = sotrovimab
  225
----------------------------------------
-> drug = paxlovid
  222
----------------------------------------
-> drug = molnupiravir
  235
covid_hosp_date

----------------------------------------
-> drug = control
  125
----------------------------------------
-> drug = sotrovimab
  33
----------------------------------------
-> drug = paxlovid
  15
----------------------------------------
-> drug = molnupiravir
  27

----------------------------------------
-> drug = control
  3,972
----------------------------------------
-> drug = sotrovimab
  433
----------------------------------------
-> drug = paxlovid
  444
----------------------------------------
-> drug = molnupiravir
  486
all_hosp_date

----------------------------------------
-> drug = control
  120
----------------------------------------
-> drug = sotrovimab
  18
----------------------------------------
-> drug = paxlovid
  20
----------------------------------------
-> drug = molnupiravir
  36

----------------------------------------
-> drug = control
  3,904
----------------------------------------
-> drug = sotrovimab
  466
----------------------------------------
-> drug = paxlovid
  441
----------------------------------------
-> drug = molnupiravir
  475
died_date_ons

----------------------------------------
-> drug = control
  430
----------------------------------------
-> drug = sotrovimab
  93
----------------------------------------
-> drug = paxlovid
  90
----------------------------------------
-> drug = molnupiravir
  84

----------------------------------------
-> drug = control
  24,173
----------------------------------------
-> drug = sotrovimab
  2,866
----------------------------------------
-> drug = paxlovid
  2,814
----------------------------------------
-> drug = molnupiravir
  2,906

. 
. ****************************
. *       COVARIATES              *
. ****************************
. *Time between 1st positive covid test 
> and treatment*
. gen pre_drug_test=3 if drug>0 & covid_
> test_positive_date!=. &(date_treated-c
> ovid_test_positive_date>0)&(date_treat
> ed-covid_test_positive_date<21)
(55,121 missing values generated)

. replace pre_drug_test=2 if drug>0 & co
> vid_test_positive_date!=. &(date_treat
> ed-covid_test_positive_date>0)&(date_t
> reated-covid_test_positive_date<=7)
(133 real changes made)

. replace pre_drug_test=1 if drug>0 & co
> vid_test_positive_date!=. &(date_treat
> ed-covid_test_positive_date>0)&(date_t
> reated-covid_test_positive_date<=5)
(102 real changes made)

. replace pre_drug_test=0 if drug>0 & co
> vid_test_positive_date!=. &(date_treat
> ed-covid_test_positive_date>=0)&(date_
> treated-covid_test_positive_date<=3)
(69 real changes made)

. replace pre_drug_test=4 if drug>0 & (d
> ate_treated-covid_test_positive_date<0
> ) & (date_treated-covid_test_positive_
> date>-7)
(122 real changes made)

. replace pre_drug_test=5 if drug>0 & (c
> ovid_test_positive_date==. | (date_tre
> ated-covid_test_positive_date<=-7) | (
> date_treated-covid_test_positive_date>
> =21)) 
(14,136 real changes made)

. label define pre_drug_test 0 "<3 days"
>  1 "3-5 days"  2 "5-7 days" 3 ">7 days
>  & <21 days" 4 "treatment proceeds tes
> t <7 days" 5 "no test", replace 

. label values pre_drug_test pre_drug_te
> st

. tab pre_drug_test drug,m

                      |    drug
        pre_drug_test |   control |     
> Total
----------------------+-----------+-----
> -----
              <3 days |         0 |     
>    69 
             3-5 days |         0 |     
>    52 
             5-7 days |         0 |     
>    31 
   >7 days & <21 days |         0 |     
>   300 
treatment proceeds te |         0 |     
>   122 
              no test |         0 |    1
> 4,136 
                    . |    40,844 |    4
> 0,844 
----------------------+-----------+-----
> -----
                Total |    40,844 |    5
> 5,554 


                      |    drug
        pre_drug_test | sotrovima |     
> Total
----------------------+-----------+-----
> -----
              <3 days |        21 |     
>    69 
             3-5 days |        18 |     
>    52 
             5-7 days |         9 |     
>    31 
   >7 days & <21 days |        93 |     
>   300 
treatment proceeds te |        34 |     
>   122 
              no test |     4,715 |    1
> 4,136 
                    . |         0 |    4
> 0,844 
----------------------+-----------+-----
> -----
                Total |     4,890 |    5
> 5,554 


                      |    drug
        pre_drug_test |  paxlovid |     
> Total
----------------------+-----------+-----
> -----
              <3 days |        24 |     
>    69 
             3-5 days |        16 |     
>    52 
             5-7 days |        11 |     
>    31 
   >7 days & <21 days |        96 |     
>   300 
treatment proceeds te |        43 |     
>   122 
              no test |     4,683 |    1
> 4,136 
                    . |         0 |    4
> 0,844 
----------------------+-----------+-----
> -----
                Total |     4,873 |    5
> 5,554 


                      |    drug
        pre_drug_test | molnupira |     
> Total
----------------------+-----------+-----
> -----
              <3 days |        24 |     
>    69 
             3-5 days |        18 |     
>    52 
             5-7 days |        11 |     
>    31 
   >7 days & <21 days |       111 |     
>   300 
treatment proceeds te |        45 |     
>   122 
              no test |     4,738 |    1
> 4,136 
                    . |         0 |    4
> 0,844 
----------------------+-----------+-----
> -----
                Total |     4,947 |    5
> 5,554 

. 
. * Demographics*
. * Age
. sum age

    Variable |        Obs        Mean   
>  Std. dev.       Min        Max
-------------+--------------------------
> -------------------------------
         age |     55,554    48.90127   
>   18.9421         18        109

. gen age_group=(age>=40)+(age>=60)

. label define age_group 0 "18-39" 1 "40
> -59" 2 ">=60" 

. label values age_group age_group

. egen age_5y_band=cut(age), at(18,25,30
> ,35,40,45,50,55,60,65,70,75,80,85,110)
>  label

. tab age_group,m

  age_group |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
      18-39 |     20,176       36.32    
>    36.32
      40-59 |     18,531       33.36    
>    69.67
       >=60 |     16,847       30.33    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00

. tab age_5y_band,m

age_5y_band |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
        18- |      5,946       10.70    
>    10.70
        25- |      4,777        8.60    
>    19.30
        30- |      4,858        8.74    
>    28.05
        35- |      4,595        8.27    
>    36.32
        40- |      4,096        7.37    
>    43.69
        45- |      4,809        8.66    
>    52.35
        50- |      4,975        8.96    
>    61.30
        55- |      4,651        8.37    
>    69.67
        60- |      3,925        7.07    
>    76.74
        65- |      3,600        6.48    
>    83.22
        70- |      3,456        6.22    
>    89.44
        75- |      2,412        4.34    
>    93.78
        80- |      1,779        3.20    
>    96.98
        85- |      1,675        3.02    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00

. * Sex
. gen male = 1 if sex == "M"
(28,457 missing values generated)

. replace male = 0 if sex == "F"
(28,457 real changes made)

. rename sex sex_str

. gen sex=0 if sex_str=="M"
(28,457 missing values generated)

. replace sex=1 if sex_str=="F"
(28,457 real changes made)

. label define sex 0 "Male" 1 "Female"

. label values sex sex

. * Ethnicity
. tab ethnicity,m

  ethnicity |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
            |     33,231       59.82    
>    59.82
      Black |      2,193        3.95    
>    63.76
      Mixed |      2,179        3.92    
>    67.69
      Other |      2,232        4.02    
>    71.71
South Asian |      2,185        3.93    
>    75.64
      White |     13,534       24.36    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00

. rename ethnicity ethnicity_str

. encode  ethnicity_str, gen(ethnicity)

. label list ethnicity                  
>           
ethnicity:
           1 Black
           2 Mixed
           3 Other
           4 South Asian
           5 White

. gen ethnicity_with_missing=ethnicity
(33,231 missing values generated)

. replace ethnicity_with_missing=9 if et
> hnicity_with_missing==.
(33,231 real changes made)

. gen White=1 if ethnicity==5
(42,020 missing values generated)

. replace White=0 if ethnicity!=5&ethnic
> ity!=.
(8,789 real changes made)

. gen White_with_missing=White
(33,231 missing values generated)

. replace White_with_missing=9 if White=
> =.
(33,231 real changes made)

. * IMD
. tab imdq5,m

             imdQ5 |      Freq.     Perc
> ent        Cum.
-------------------+--------------------
> ---------------
 1 (most deprived) |     11,153       20
> .08       20.08
                 2 |     11,047       19
> .89       39.96
                 3 |     11,000       19
> .80       59.76
                 4 |     11,211       20
> .18       79.94
5 (least deprived) |     10,560       19
> .01       98.95
           Unknown |        583        1
> .05      100.00
-------------------+--------------------
> ---------------
             Total |     55,554      100
> .00

. replace imdq5="." if imdq5=="Unknown" 
(583 real changes made)

. replace imdq5="1" if imdq5=="1 (most d
> eprived)" 
(11,153 real changes made)

. replace imdq5="5" if imdq5=="5 (least 
> deprived)" 
(10,560 real changes made)

. destring imdq5, replace
imdq5: all characters numeric; replaced 
> as byte
(583 missing values generated)

. recode imdq5 5 = 1 4 = 2 3 = 3 2 = 4 1
>  = 5 // Reverse the order (so 5 is mor
> e deprived)
(43971 changes made to imdq5)

. label define imdq5 1 "1 least deprived
> " 2 "2" 3 "3" 4 "4" 5 "5 most deprived
> ", replace

. label values imdq5 imdq5

. gen imd_with_missing=imdq5
(583 missing values generated)

. replace imd_with_missing=9 if imdq5==.
(583 real changes made)

. tab imdq5,m

           imdQ5 |      Freq.     Percen
> t        Cum.
-----------------+----------------------
> -------------
1 least deprived |     10,560       19.0
> 1       19.01
               2 |     11,211       20.1
> 8       39.19
               3 |     11,000       19.8
> 0       58.99
               4 |     11,047       19.8
> 9       78.87
 5 most deprived |     11,153       20.0
> 8       98.95
               . |        583        1.0
> 5      100.00
-----------------+----------------------
> -------------
           Total |     55,554      100.0
> 0

. * Region
. tab region_nhs,m

              region_nhs |      Freq.   
>   Percent        Cum.
-------------------------+--------------
> ---------------------
                    East |      5,588   
>     10.06       10.06
           East Midlands |      5,524   
>      9.94       20.00
                  London |     11,074   
>     19.93       39.94
              North East |      5,612   
>     10.10       50.04
              North West |      5,562   
>     10.01       60.05
              South East |      5,568   
>     10.02       70.07
              South West |      5,503   
>      9.91       79.98
           West Midlands |      5,602   
>     10.08       90.06
Yorkshire and The Humber |      5,521   
>      9.94      100.00
-------------------------+--------------
> ---------------------
                   Total |     55,554   
>    100.00

. tab drug region_nhs

             | region_nhs
        drug |      East |     Total
-------------+-----------+----------
     control |     4,096 |    40,844 
  sotrovimab |       479 |     4,890 
    paxlovid |       504 |     4,873 
molnupiravir |       509 |     4,947 
-------------+-----------+----------
       Total |     5,588 |    55,554 


             | region_nhs
        drug | East Mi.. |     Total
-------------+-----------+----------
     control |     4,090 |    40,844 
  sotrovimab |       516 |     4,890 
    paxlovid |       466 |     4,873 
molnupiravir |       452 |     4,947 
-------------+-----------+----------
       Total |     5,524 |    55,554 


             | region_nhs
        drug |    London |     Total
-------------+-----------+----------
     control |     8,096 |    40,844 
  sotrovimab |       997 |     4,890 
    paxlovid |       990 |     4,873 
molnupiravir |       991 |     4,947 
-------------+-----------+----------
       Total |    11,074 |    55,554 


             | region_nhs
        drug | North E.. |     Total
-------------+-----------+----------
     control |     4,144 |    40,844 
  sotrovimab |       478 |     4,890 
    paxlovid |       517 |     4,873 
molnupiravir |       473 |     4,947 
-------------+-----------+----------
       Total |     5,612 |    55,554 


             | region_nhs
        drug | North W.. |     Total
-------------+-----------+----------
     control |     4,101 |    40,844 
  sotrovimab |       480 |     4,890 
    paxlovid |       481 |     4,873 
molnupiravir |       500 |     4,947 
-------------+-----------+----------
       Total |     5,562 |    55,554 


             | region_nhs
        drug | South E.. |     Total
-------------+-----------+----------
     control |     4,103 |    40,844 
  sotrovimab |       482 |     4,890 
    paxlovid |       486 |     4,873 
molnupiravir |       497 |     4,947 
-------------+-----------+----------
       Total |     5,568 |    55,554 


             | region_nhs
        drug | South W.. |     Total
-------------+-----------+----------
     control |     4,042 |    40,844 
  sotrovimab |       479 |     4,890 
    paxlovid |       450 |     4,873 
molnupiravir |       532 |     4,947 
-------------+-----------+----------
       Total |     5,503 |    55,554 


             | region_nhs
        drug | West Mi.. |     Total
-------------+-----------+----------
     control |     4,104 |    40,844 
  sotrovimab |       500 |     4,890 
    paxlovid |       483 |     4,873 
molnupiravir |       515 |     4,947 
-------------+-----------+----------
       Total |     5,602 |    55,554 


             | region_nhs
        drug | Yorkshi.. |     Total
-------------+-----------+----------
     control |     4,068 |    40,844 
  sotrovimab |       479 |     4,890 
    paxlovid |       496 |     4,873 
molnupiravir |       478 |     4,947 
-------------+-----------+----------
       Total |     5,521 |    55,554 

. rename region_nhs region_nhs_str 

. encode  region_nhs_str, gen(region_nhs
> )

. label list region_nhs
region_nhs:
           1 East
           2 East Midlands
           3 London
           4 North East
           5 North West
           6 South East
           7 South West
           8 West Midlands
           9 Yorkshire and The Humber

. tab region_covid_therapeutics,m

region_covid_therapeutic |
                       s |      Freq.   
>   Percent        Cum.
-------------------------+--------------
> ---------------------
                    East |      5,593   
>     10.07       10.07
           East Midlands |      5,538   
>      9.97       20.04
                  London |     10,999   
>     19.80       39.84
              North East |      5,468   
>      9.84       49.68
              North West |      5,671   
>     10.21       59.89
              South East |      5,705   
>     10.27       70.16
              South West |      5,492   
>      9.89       80.04
           West Midlands |      5,553   
>     10.00       90.04
Yorkshire and The Humber |      5,535   
>      9.96      100.00
-------------------------+--------------
> ---------------------
                   Total |     55,554   
>    100.00

. rename region_covid_therapeutics regio
> n_covid_therapeutics_str

. encode region_covid_therapeutics_str, 
> gen(region_covid_therapeutics)

. label list region_covid_therapeutics
region_covid_therapeutics:
           1 East
           2 East Midlands
           3 London
           4 North East
           5 North West
           6 South East
           7 South West
           8 West Midlands
           9 Yorkshire and The Humber

. tab stp,m

        stp |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
       STP1 |      5,549        9.99    
>     9.99
      STP10 |      5,554       10.00    
>    19.99
       STP2 |      5,500        9.90    
>    29.89
       STP3 |      5,461        9.83    
>    39.72
       STP4 |      5,551        9.99    
>    49.71
       STP5 |      5,584       10.05    
>    59.76
       STP6 |      5,681       10.23    
>    69.99
       STP7 |      5,571       10.03    
>    80.01
       STP8 |      5,498        9.90    
>    89.91
       STP9 |      5,605       10.09    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00

. rename stp stp_str

. encode  stp_str,gen(stp)

. label list stp
stp:
           1 STP1
           2 STP10
           3 STP2
           4 STP3
           5 STP4
           6 STP5
           7 STP6
           8 STP7
           9 STP8
          10 STP9

. label values stp stp

. by stp, sort: gen stp_N=_N if stp!=. /
> /combine stps with low N (<100) as "Ot
> her"

. replace stp=99 if stp_N<100
(0 real changes made)

. tab stp,m

        stp |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
       STP1 |      5,549        9.99    
>     9.99
      STP10 |      5,554       10.00    
>    19.99
       STP2 |      5,500        9.90    
>    29.89
       STP3 |      5,461        9.83    
>    39.72
       STP4 |      5,551        9.99    
>    49.71
       STP5 |      5,584       10.05    
>    59.76
       STP6 |      5,681       10.23    
>    69.99
       STP7 |      5,571       10.03    
>    80.01
       STP8 |      5,498        9.90    
>    89.91
       STP9 |      5,605       10.09    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00

. * BMI
. tabstat bmi, stat(mean p25 p50 p75 min
>  max) 

    Variable |      Mean       p25
-------------+--------------------
         bmi |  26.59041  21.55441
----------------------------------

    Variable |       p50       p75
-------------+--------------------
         bmi |  27.50232  33.02563
----------------------------------

    Variable |       Min       Max
-------------+--------------------
         bmi | -3.472008  63.68106
----------------------------------

. replace bmi=. if bmi<10|bmi>60
(3,442 real changes made, 3,442 to missi
> ng)

. gen bmi_10y=bmi if bmi_date_measured!=
> . & bmi_date_measured>=start_date-365*
> 10 & (age+((bmi_date_measured-start_da
> te)/365)>=18)
(55,554 missing values generated)

. gen bmi_5y=bmi if bmi_date_measured!=.
>  & bmi_date_measured>=start_date-365*5
>  & (age+((bmi_date_measured-start_date
> )/365)>=18)
(55,554 missing values generated)

. gen bmi_2y=bmi if bmi_date_measured!=.
>  & bmi_date_measured>=start_date-365*2
>  & (age+((bmi_date_measured-start_date
> )/365)>=18)
(55,554 missing values generated)

. gen bmi_group=(bmi>=18.5)+(bmi>=25.0)+
> (bmi>=30.0) if bmi!=.
(3,442 missing values generated)

. label define bmi_group 0 "underweight"
>  1 "normal" 2 "overweight" 3 "obese"

. label values bmi_group bmi_group

. gen bmi_group_with_missing=bmi_group
(3,442 missing values generated)

. replace bmi_group_with_missing=9 if bm
> i_group==.
(3,442 real changes made)

. gen bmi_25=(bmi>=25) if bmi!=.
(3,442 missing values generated)

. gen bmi_30=(bmi>=30) if bmi!=.
(3,442 missing values generated)

. * Comorbidities
. tab diabetes,m

   diabetes |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          0 |     49,980       89.97    
>    89.97
          1 |      5,574       10.03    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00

. tab chronic_cardiac_disease,m

chronic_car |
diac_diseas |
          e |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          0 |     49,946       89.91    
>    89.91
          1 |      5,608       10.09    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00

. tab hypertension,m

hypertensio |
          n |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          0 |     50,029       90.05    
>    90.05
          1 |      5,525        9.95    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00

. tab chronic_respiratory_disease,m

chronic_res |
piratory_di |
      sease |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          0 |     50,049       90.09    
>    90.09
          1 |      5,505        9.91    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00

. * Vaccination 
. tab vaccination_status,m

       vaccination_status |      Freq.  
>    Percent        Cum.
--------------------------+-------------
> ----------------------
Four or more vaccinations |      5,636  
>      10.15       10.15
          One vaccination |      5,607  
>      10.09       20.24
       Three vaccinations |     27,495  
>      49.49       69.73
         Two vaccinations |      5,596  
>      10.07       79.80
            Un-vaccinated |      5,681  
>      10.23       90.03
 Un-vaccinated (declined) |      5,539  
>       9.97      100.00
--------------------------+-------------
> ----------------------
                    Total |     55,554  
>     100.00

. rename vaccination_status vaccination_
> status_group

. gen vaccination_status=0 if vaccinatio
> n_status_g=="Un-vaccinated"|vaccinatio
> n_status_g=="Un-vaccinated (declined)"
(44,334 missing values generated)

. replace vaccination_status=1 if vaccin
> ation_status_g=="One vaccination"
(5,607 real changes made)

. replace vaccination_status=2 if vaccin
> ation_status_g=="Two vaccinations"
(5,596 real changes made)

. replace vaccination_status=3 if vaccin
> ation_status_g=="Three vaccinations"
(27,495 real changes made)

. replace vaccination_status=4 if vaccin
> ation_status_g=="Four or more vaccinat
> ions"
(5,636 real changes made)

. label define vaccination_status 0 "Un-
> vaccinated" 1 "One vaccination" 2 "Two
>  vaccinations" 3 "Three vaccinations" 
> 4 "Four or more vaccinations"

. label values vaccination_status vaccin
> ation_status

. gen vaccination_3_plus=1 if vaccinatio
> n_status==3|vaccination_status==4
(22,423 missing values generated)

. replace vaccination_3_plus=0 if vaccin
> ation_status<3
(22,423 real changes made)

. * time between vaccine and covid posit
> ive test or treatment
. gen days_vacc_covid=covid_test_positiv
> e_date - last_vaccination_date
(8,009 missing values generated)

. sum days_vacc_covid,de

                       days_vacc_covid
----------------------------------------
> ---------------------
      Percentiles      Smallest
 1%         -459           -574
 5%         -316           -567
10%         -214           -565       Ob
> s              47,545
25%           -5           -562       Su
> m of wgt.      47,545

50%          271                      Me
> an           274.5967
                        Largest       St
> d. dev.      364.0802
75%          556           1116
90%          766           1120       Va
> riance       132554.4
95%          876           1120       Sk
> ewness       .0201796
99%         1013           1121       Ku
> rtosis       2.199834

. gen days_vacc_treat=date_treated - las
> t_vaccination_date
(41,538 missing values generated)

. sum days_vacc_treat,de

                       days_vacc_treat
----------------------------------------
> ---------------------
      Percentiles      Smallest
 1%         -471           -566
 5%         -342           -565
10%         -246           -563       Ob
> s              14,016
25%          -33           -561       Su
> m of wgt.      14,016

50%          254                      Me
> an           253.9351
                        Largest       St
> d. dev.      368.4092
75%          539           1108
90%          755           1110       Va
> riance       135725.4
95%          856           1119       Sk
> ewness       .0175676
99%         1000           1123       Ku
> rtosis       2.166201

. gen days_vacc_treat_test = days_vacc_t
> reat
(41,538 missing values generated)

. replace days_vacc_treat_test = days_va
> cc_covid if days_vacc_treat_test==.
(34,912 real changes made)

. sum days_vacc_treat_test,de

                    days_vacc_treat_test
----------------------------------------
> ---------------------
      Percentiles      Smallest
 1%         -463           -574
 5%         -324           -567
10%         -223           -566       Ob
> s              48,928
25%          -14           -565       Su
> m of wgt.      48,928

50%          265                      Me
> an           267.5146
                        Largest       St
> d. dev.      365.0961
75%          550           1119
90%          760           1120       Va
> riance       133295.2
95%          867           1121       Sk
> ewness       .0203035
99%         1007           1123       Ku
> rtosis       2.187752

. gen month_vacc_covid=ceil(days_vacc_co
> vid/30)
(8,009 missing values generated)

. tab month_vacc_covid,m

month_vacc_ |
      covid |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
        -19 |          1        0.00    
>     0.00
        -18 |         50        0.09    
>     0.09
        -17 |        106        0.19    
>     0.28
        -16 |        170        0.31    
>     0.59
        -15 |        226        0.41    
>     1.00
        -14 |        294        0.53    
>     1.52
        -13 |        351        0.63    
>     2.16
        -12 |        422        0.76    
>     2.92
        -11 |        506        0.91    
>     3.83
        -10 |        554        1.00    
>     4.82
         -9 |        630        1.13    
>     5.96
         -8 |        729        1.31    
>     7.27
         -7 |        847        1.52    
>     8.80
         -6 |        808        1.45    
>    10.25
         -5 |        871        1.57    
>    11.82
         -4 |        923        1.66    
>    13.48
         -3 |      1,099        1.98    
>    15.46
         -2 |      1,072        1.93    
>    17.39
         -1 |      1,204        2.17    
>    19.55
          0 |      1,277        2.30    
>    21.85
          1 |      1,326        2.39    
>    24.24
          2 |      1,288        2.32    
>    26.56
          3 |      1,317        2.37    
>    28.93
          4 |      1,239        2.23    
>    31.16
          5 |      1,292        2.33    
>    33.48
          6 |      1,321        2.38    
>    35.86
          7 |      1,329        2.39    
>    38.25
          8 |      1,259        2.27    
>    40.52
          9 |      1,241        2.23    
>    42.75
         10 |      1,347        2.42    
>    45.18
         11 |      1,232        2.22    
>    47.40
         12 |      1,209        2.18    
>    49.57
         13 |      1,253        2.26    
>    51.83
         14 |      1,223        2.20    
>    54.03
         15 |      1,247        2.24    
>    56.27
         16 |      1,292        2.33    
>    58.60
         17 |      1,197        2.15    
>    60.76
         18 |      1,212        2.18    
>    62.94
         19 |      1,286        2.31    
>    65.25
         20 |      1,201        2.16    
>    67.41
         21 |      1,162        2.09    
>    69.51
         22 |      1,050        1.89    
>    71.40
         23 |        986        1.77    
>    73.17
         24 |        919        1.65    
>    74.82
         25 |        812        1.46    
>    76.29
         26 |        768        1.38    
>    77.67
         27 |        716        1.29    
>    78.96
         28 |        620        1.12    
>    80.07
         29 |        607        1.09    
>    81.17
         30 |        507        0.91    
>    82.08
         31 |        506        0.91    
>    82.99
         32 |        393        0.71    
>    83.70
         33 |        361        0.65    
>    84.35
         34 |        274        0.49    
>    84.84
         35 |        208        0.37    
>    85.21
         36 |        128        0.23    
>    85.44
         37 |         69        0.12    
>    85.57
         38 |          8        0.01    
>    85.58
          . |      8,009       14.42    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00

. *Calendar time*
. gen day_after_campaign=start_date-mdy(
> 12,15,2021)
(14,775 missing values generated)

. sum day_after_campaign,de

                     day_after_campaign
----------------------------------------
> ---------------------
      Percentiles      Smallest
 1%            3             -3
 5%           24             -3
10%           51             -3       Ob
> s              40,779
25%          133             -3       Su
> m of wgt.      40,779

50%          273                      Me
> an           276.8212
                        Largest       St
> d. dev.      165.6209
75%          419            572
90%          510            572       Va
> riance       27430.28
95%          541            572       Sk
> ewness       .0617544
99%          566            572       Ku
> rtosis       1.809775

. gen month_after_campaign=ceil((start_d
> ate-mdy(12,15,2021))/30)
(14,775 missing values generated)

. tab month_after_campaign,m

month_after |
  _campaign |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          0 |        223        0.40    
>     0.40
          1 |      2,299        4.14    
>     4.54
          2 |      2,276        4.10    
>     8.64
          3 |      2,213        3.98    
>    12.62
          4 |      2,244        4.04    
>    16.66
          5 |      2,226        4.01    
>    20.67
          6 |      2,202        3.96    
>    24.63
          7 |      2,260        4.07    
>    28.70
          8 |      2,174        3.91    
>    32.61
          9 |      2,127        3.83    
>    36.44
         10 |      2,162        3.89    
>    40.33
         11 |      2,143        3.86    
>    44.19
         12 |      2,035        3.66    
>    47.85
         13 |      2,074        3.73    
>    51.59
         14 |      1,996        3.59    
>    55.18
         15 |      2,044        3.68    
>    58.86
         16 |      2,026        3.65    
>    62.50
         17 |      1,993        3.59    
>    66.09
         18 |      1,976        3.56    
>    69.65
         19 |      1,957        3.52    
>    73.17
         20 |        129        0.23    
>    73.40
          . |     14,775       26.60    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00

. * Variant
. label define sgtf_new 0 "S gene detect
> ed" 1 "confirmed SGTF" 9 "NA"

. label values sgtf_new sgtf_new

. * Prior infection
. tab prior_covid, m

prior_covid |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          0 |     38,849       69.93    
>    69.93
          1 |     16,705       30.07    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00

. gen prior_covid_index=1 if prior_covid
> ==1 & prior_covid_date<campaign_start
(55,446 missing values generated)

. tab prior_covid_index,m

prior_covid |
     _index |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          1 |        108        0.19    
>     0.19
          . |     55,446       99.81    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00

. replace prior_covid_index=0 if prior_c
> ovid_index==.
(55,446 real changes made)

. *Contraindications for Pax*
. tab drug if organ_transplant==1

        drug |      Freq.     Percent   
>      Cum.
-------------+--------------------------
> ---------
     control |     12,601       73.20   
>     73.20
  sotrovimab |      1,501        8.72   
>     81.92
    paxlovid |      1,548        8.99   
>     90.91
molnupiravir |      1,564        9.09   
>    100.00
-------------+--------------------------
> ---------
       Total |     17,214      100.00

. tab drug if liver_disease_nhsd_icd10==
> 1

        drug |      Freq.     Percent   
>      Cum.
-------------+--------------------------
> ---------
     control |      4,024       72.50   
>     72.50
  sotrovimab |        498        8.97   
>     81.48
    paxlovid |        511        9.21   
>     90.68
molnupiravir |        517        9.32   
>    100.00
-------------+--------------------------
> ---------
       Total |      5,550      100.00

. tab drug if renal_disease==1

        drug |      Freq.     Percent   
>      Cum.
-------------+--------------------------
> ---------
     control |     14,029       73.35   
>     73.35
  sotrovimab |      1,693        8.85   
>     82.20
    paxlovid |      1,725        9.02   
>     91.22
molnupiravir |      1,680        8.78   
>    100.00
-------------+--------------------------
> ---------
       Total |     19,127      100.00

. * Calculating egfr: adapted from https
> ://github.com/opensafely/COVID-19-vacc
> ine-breakthrough/blob/updates-feb/anal
> ysis/data_process.R*
. tabstat creatinine_ctv3, stat(mean p25
>  p50 p75 min max) 

    Variable |      Mean       p25
-------------+--------------------
creat~e_ctv3 |   56.9576  47.80243
----------------------------------

    Variable |       p50       p75
-------------+--------------------
creat~e_ctv3 |  58.97814  69.56153
----------------------------------

    Variable |       Min       Max
-------------+--------------------
creat~e_ctv3 | -3.071242  127.5633
----------------------------------

. replace creatinine_ctv3=. if !inrange(
> creatinine_ctv3, 20, 3000)|creatinine_
> ctv3_date>start_date
(21,454 real changes made, 21,454 to mis
> sing)

. tabstat creatinine_ctv3, stat(mean p25
>  p50 p75 min max) 

    Variable |      Mean       p25
-------------+--------------------
creat~e_ctv3 |  60.17125  49.99005
----------------------------------

    Variable |       p50       p75
-------------+--------------------
creat~e_ctv3 |   60.0829   70.2657
----------------------------------

    Variable |       Min       Max
-------------+--------------------
creat~e_ctv3 |  20.00721  127.5633
----------------------------------

. replace creatinine_ctv3 = creatinine_c
> tv3/88.4
(34,100 real changes made)

. gen min_creatinine_ctv3=.
(55,554 missing values generated)

. replace min_creatinine_ctv3 = (creatin
> ine_ctv3/0.7)^-0.329 if sex==1
(17,528 real changes made)

. replace min_creatinine_ctv3 = (creatin
> ine_ctv3/0.9)^-0.411 if sex==0
(16,572 real changes made)

. replace min_creatinine_ctv3 = 1 if min
> _creatinine_ctv3<1
(9,537 real changes made)

. gen max_creatinine_ctv3=.
(55,554 missing values generated)

. replace max_creatinine_ctv3 = (creatin
> ine_ctv3/0.7)^-1.209 if sex==1
(17,528 real changes made)

. replace max_creatinine_ctv3 = (creatin
> ine_ctv3/0.9)^-1.209 if sex==0
(16,572 real changes made)

. replace max_creatinine_ctv3 = 1 if max
> _creatinine_ctv3>1
(46,017 real changes made)

. gen egfr_creatinine_ctv3 = min_creatin
> ine_ctv3*max_creatinine_ctv3*141*(0.99
> 3^age_creatinine_ctv3) if age_creatini
> ne_ctv3>0&age_creatinine_ctv3<=120
(21,864 missing values generated)

. replace egfr_creatinine_ctv3 = egfr_cr
> eatinine_ctv3*1.018 if sex==1
(17,322 real changes made)

. tabstat creatinine_snomed, stat(mean p
> 25 p50 p75 min max) 

    Variable |      Mean       p25
-------------+--------------------
cre~e_snomed |  22.51694         0
----------------------------------

    Variable |       p50       p75
-------------+--------------------
cre~e_snomed |         0  45.01706
----------------------------------

    Variable |       Min       Max
-------------+--------------------
cre~e_snomed | -48.40438  128.4268
----------------------------------

. replace creatinine_snomed = . if !inra
> nge(creatinine_snomed, 20, 3000)| crea
> tinine_snomed_date>start_date
(39,443 real changes made, 39,443 to mis
> sing)

. replace creatinine_snomed_date = creat
> inine_short_snomed_date if missing(cre
> atinine_snomed)
(25,484 real changes made, 5,837 to miss
> ing)

. replace creatinine_operator_snomed = c
> reatinine_operator_short_snomed if mis
> sing(creatinine_snomed)
(21,983 real changes made)

. replace age_creatinine_snomed = age_cr
> eatinine_short_snomed if missing(creat
> inine_snomed)
(38,972 real changes made)

. replace creatinine_snomed = creatinine
> _short_snomed if missing(creatinine_sn
> omed)
(39,443 real changes made)

. replace creatinine_snomed = . if !inra
> nge(creatinine_snomed, 20, 3000)| crea
> tinine_snomed_date>start_date
(29,146 real changes made, 29,146 to mis
> sing)

. replace creatinine_snomed = creatinine
> _snomed/88.4
(26,408 real changes made)

. gen min_creatinine_snomed=.
(55,554 missing values generated)

. replace min_creatinine_snomed = (creat
> inine_snomed/0.7)^-0.329 if sex==1
(13,506 real changes made)

. replace min_creatinine_snomed = (creat
> inine_snomed/0.9)^-0.411 if sex==0
(12,902 real changes made)

. replace min_creatinine_snomed = 1 if m
> in_creatinine_snomed<1
(3,575 real changes made)

. gen max_creatinine_snomed=.
(55,554 missing values generated)

. replace max_creatinine_snomed = (creat
> inine_snomed/0.7)^-1.209 if sex==1
(13,506 real changes made)

. replace max_creatinine_snomed = (creat
> inine_snomed/0.9)^-1.209 if sex==0
(12,902 real changes made)

. replace max_creatinine_snomed = 1 if m
> ax_creatinine_snomed>1
(51,979 real changes made)

. gen egfr_creatinine_snomed = min_creat
> inine_snomed*max_creatinine_snomed*141
> *(0.993^age_creatinine_snomed) if age_
> creatinine_snomed>0&age_creatinine_sno
> med<=120
(29,458 missing values generated)

. replace egfr_creatinine_snomed = egfr_
> creatinine_snomed*1.018 if sex==1
(13,344 real changes made)

. gen egfr_60 = 1 if (egfr_creatinine_ct
> v3<60&creatinine_operator_ctv3!="<")|(
> egfr_creatinine_snomed<60&creatinine_o
> perator_snomed!="<")|(egfr_record<60&e
> gfr_record>0&egfr_operator!=">"&egfr_o
> perator!=">=")|(egfr_short_record<60&e
> gfr_short_record>0&egfr_short_operator
> !=">"&egfr_short_operator!=">=")
(48,173 missing values generated)

. gen egfr_30 = 1 if (egfr_creatinine_ct
> v3<30&creatinine_operator_ctv3!="<")|(
> egfr_creatinine_snomed<30&creatinine_o
> perator_snomed!="<")|(egfr_record<30&e
> gfr_record>0&egfr_operator!=">"&egfr_o
> perator!=">=")|(egfr_short_record<30&e
> gfr_short_record>0&egfr_short_operator
> !=">"&egfr_short_operator!=">=")
(53,901 missing values generated)

. tab drug if egfr_60==1

        drug |      Freq.     Percent   
>      Cum.
-------------+--------------------------
> ---------
     control |      5,470       74.11   
>     74.11
  sotrovimab |        656        8.89   
>     83.00
    paxlovid |        594        8.05   
>     91.04
molnupiravir |        661        8.96   
>    100.00
-------------+--------------------------
> ---------
       Total |      7,381      100.00

. tab drug if egfr_30==1

        drug |      Freq.     Percent   
>      Cum.
-------------+--------------------------
> ---------
     control |      1,234       74.65   
>     74.65
  sotrovimab |        136        8.23   
>     82.88
    paxlovid |        126        7.62   
>     90.50
molnupiravir |        157        9.50   
>    100.00
-------------+--------------------------
> ---------
       Total |      1,653      100.00

. *drug interactions*
. tab drug if drugs_paxlovid_interaction
> <=start_date

        drug |      Freq.     Percent   
>      Cum.
-------------+--------------------------
> ---------
     control |     15,481       97.92   
>     97.92
  sotrovimab |        103        0.65   
>     98.57
    paxlovid |        109        0.69   
>     99.26
molnupiravir |        117        0.74   
>    100.00
-------------+--------------------------
> ---------
       Total |     15,810      100.00

. tab drug if drugs_paxlovid_interaction
> <=start_date&drugs_paxlovid_interactio
> n>=(start_date-3*365.25)

        drug |      Freq.     Percent   
>      Cum.
-------------+--------------------------
> ---------
     control |     14,729       97.82   
>     97.82
  sotrovimab |        103        0.68   
>     98.50
    paxlovid |        109        0.72   
>     99.22
molnupiravir |        117        0.78   
>    100.00
-------------+--------------------------
> ---------
       Total |     15,058      100.00

. tab drug if drugs_paxlovid_interaction
> <=start_date&drugs_paxlovid_interactio
> n>=(start_date-365.25)

        drug |      Freq.     Percent   
>      Cum.
-------------+--------------------------
> ---------
     control |     14,604       98.16   
>     98.16
  sotrovimab |         81        0.54   
>     98.70
    paxlovid |         89        0.60   
>     99.30
molnupiravir |        104        0.70   
>    100.00
-------------+--------------------------
> ---------
       Total |     14,878      100.00

. tab drug if drugs_paxlovid_interaction
> <=start_date&drugs_paxlovid_interactio
> n>=(start_date-180)

        drug |      Freq.     Percent   
>      Cum.
-------------+--------------------------
> ---------
     control |     14,373       98.81   
>     98.81
  sotrovimab |         54        0.37   
>     99.18
    paxlovid |         58        0.40   
>     99.58
molnupiravir |         61        0.42   
>    100.00
-------------+--------------------------
> ---------
       Total |     14,546      100.00

. tab drug if drugs_nirmatrelvir_interac
> tion<=start_date

        drug |      Freq.     Percent   
>      Cum.
-------------+--------------------------
> ---------
     control |     15,446       97.75   
>     97.75
  sotrovimab |        108        0.68   
>     98.43
    paxlovid |        132        0.84   
>     99.27
molnupiravir |        116        0.73   
>    100.00
-------------+--------------------------
> ---------
       Total |     15,802      100.00

. tab drug if drugs_nirmatrelvir_interac
> tion<=start_date&drugs_nirmatrelvir_in
> teraction>=(start_date-3*365.25)

        drug |      Freq.     Percent   
>      Cum.
-------------+--------------------------
> ---------
     control |     14,694       97.63   
>     97.63
  sotrovimab |        108        0.72   
>     98.35
    paxlovid |        132        0.88   
>     99.23
molnupiravir |        116        0.77   
>    100.00
-------------+--------------------------
> ---------
       Total |     15,050      100.00

. tab drug if drugs_nirmatrelvir_interac
> tion<=start_date&drugs_nirmatrelvir_in
> teraction>=(start_date-365.25)

        drug |      Freq.     Percent   
>      Cum.
-------------+--------------------------
> ---------
     control |     14,599       98.01   
>     98.01
  sotrovimab |         94        0.63   
>     98.64
    paxlovid |        109        0.73   
>     99.37
molnupiravir |         94        0.63   
>    100.00
-------------+--------------------------
> ---------
       Total |     14,896      100.00

. tab drug if drugs_nirmatrelvir_interac
> tion<=start_date&drugs_nirmatrelvir_in
> teraction>=(start_date-180)

        drug |      Freq.     Percent   
>      Cum.
-------------+--------------------------
> ---------
     control |     14,367       98.82   
>     98.82
  sotrovimab |         51        0.35   
>     99.17
    paxlovid |         61        0.42   
>     99.59
molnupiravir |         59        0.41   
>    100.00
-------------+--------------------------
> ---------
       Total |     14,538      100.00

. gen paxlovid_interaction=(drugs_paxlov
> id_interaction<=start_date&drugs_paxlo
> vid_interaction>=(start_date-180))  

. gen nirmatrelvir_interaction=(drugs_ni
> rmatrelvir_interaction<=start_date&dru
> gs_nirmatrelvir_interaction>=(start_da
> te-180))

. * Drug contraindicated 
. gen paxlovid_contraindicated = 1 if eg
> fr_30==1 | dialysis==1
(48,459 missing values generated)

. replace paxlovid_contraindicated = 1 i
> f liver_disease==1 
(9,127 real changes made)

. replace paxlovid_contraindicated = 1 i
> f organ_transplant==1 
(12,221 real changes made)

. replace paxlovid_contraindicated = 1 i
> f drugs_paxlovid_interaction<=start_da
> te&drugs_paxlovid_interaction>=(start_
> date-180)
(7,109 real changes made)

. recode paxlovid_contraindicated . = 0
(20002 changes made to paxlovid_contrain
> dicated)

. by drug, sort: count if paxlovid_contr
> aindicated==1

----------------------------------------
-> drug = control
  27,904
----------------------------------------
-> drug = sotrovimab
  2,484
----------------------------------------
-> drug = paxlovid
  2,547
----------------------------------------
-> drug = molnupiravir
  2,617

. 
. ****************************
. *       COX MODEL               *
. ****************************
. global ae               ae_spc_all    
>                           ///
>                                 ae_dru
> g_all                             /// 
>             
>                                 ae_ima
> e_all                     ///         
>                     
>                                 ae_all
>                                   ///
>                                 allcau
> se_emerg_aande    ///
>                                 covid_
> hosp_date                 ///
>                                 all_ho
> sp_date                   ///
>                                 died_d
> ate_ons

. * Generate failure 
. foreach x in    $ae $ae_spc $ae_spc_ic
> d $ae_spc_emerg ///
>                                 $ae_dr
> ug $ae_drug_icd $ae_drug_emerg ///
>                                 $ae_im
> ae $ae_imae_icd $ae_imae_emerg ///
>                                 {
  2.         display "`x'"
  3.         by drug, sort: count if `x'
> !=.
  4.         by drug, sort: count if `x'
> >start_date & `x'!=.
  5.         by drug, sort: count if `x'
> >=start_date & `x'<start_date_29 &`x'!
> =.
  6.         gen fail_`x'=(`x'!=.&`x'<= 
> min(study_end_date, start_date_29, pax
> lovid, molnupiravir)) if drug==1
  7.         replace fail_`x'=(`x'!=.&`x
> '<= min(study_end_date, start_date_29,
>  sotrovimab, molnupiravir)) if drug==2
  8.         replace fail_`x'=(`x'!=.&`x
> '<= min(study_end_date, start_date_29,
>  sotrovimab, paxlovid)) if drug==3
  9.         replace fail_`x'=(`x'!=.&`x
> '<= min(study_end_date, start_date_29,
>  sotrovimab, paxlovid, molnupiravir)) 
> if drug==0
 10.         tab drug fail_`x', m
 11.         tab drug fail_`x' if `x'>st
> art_date
 12. }
ae_spc_all

----------------------------------------
-> drug = control
  38,894
----------------------------------------
-> drug = sotrovimab
  4,662
----------------------------------------
-> drug = paxlovid
  4,634
----------------------------------------
-> drug = molnupiravir
  4,720

----------------------------------------
-> drug = control
  7,942
----------------------------------------
-> drug = sotrovimab
  1,696
----------------------------------------
-> drug = paxlovid
  1,611
----------------------------------------
-> drug = molnupiravir
  1,702

----------------------------------------
-> drug = control
  1,162
----------------------------------------
-> drug = sotrovimab
  216
----------------------------------------
-> drug = paxlovid
  263
----------------------------------------
-> drug = molnupiravir
  251
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_ae_sp
             |   c_all
        drug |         0 |     Total
-------------+-----------+----------
     control |     8,944 |    40,844 
  sotrovimab |     1,721 |     4,890 
    paxlovid |     1,597 |     4,873 
molnupiravir |     1,685 |     4,947 
-------------+-----------+----------
       Total |    13,947 |    55,554 


             | fail_ae_sp
             |   c_all
        drug |         1 |     Total
-------------+-----------+----------
     control |    31,900 |    40,844 
  sotrovimab |     3,169 |     4,890 
    paxlovid |     3,276 |     4,873 
molnupiravir |     3,262 |     4,947 
-------------+-----------+----------
       Total |    41,607 |    55,554 

             | fail_ae_sp
             |   c_all
        drug |         0 |     Total
-------------+-----------+----------
     control |     8,055 |     9,211 
  sotrovimab |     1,721 |     1,924 
    paxlovid |     1,596 |     1,850 
molnupiravir |     1,683 |     1,929 
-------------+-----------+----------
       Total |    13,055 |    14,914 


             | fail_ae_sp
             |   c_all
        drug |         1 |     Total
-------------+-----------+----------
     control |     1,156 |     9,211 
  sotrovimab |       203 |     1,924 
    paxlovid |       254 |     1,850 
molnupiravir |       246 |     1,929 
-------------+-----------+----------
       Total |     1,859 |    14,914 
ae_drug_all

----------------------------------------
-> drug = control
  38,940
----------------------------------------
-> drug = sotrovimab
  4,666
----------------------------------------
-> drug = paxlovid
  4,674
----------------------------------------
-> drug = molnupiravir
  4,718

----------------------------------------
-> drug = control
  7,946
----------------------------------------
-> drug = sotrovimab
  1,691
----------------------------------------
-> drug = paxlovid
  1,623
----------------------------------------
-> drug = molnupiravir
  1,693

----------------------------------------
-> drug = control
  1,163
----------------------------------------
-> drug = sotrovimab
  254
----------------------------------------
-> drug = paxlovid
  258
----------------------------------------
-> drug = molnupiravir
  260
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_ae_dr
             |   ug_all
        drug |         0 |     Total
-------------+-----------+----------
     control |     8,959 |    40,844 
  sotrovimab |     1,669 |     4,890 
    paxlovid |     1,579 |     4,873 
molnupiravir |     1,677 |     4,947 
-------------+-----------+----------
       Total |    13,884 |    55,554 


             | fail_ae_dr
             |   ug_all
        drug |         1 |     Total
-------------+-----------+----------
     control |    31,885 |    40,844 
  sotrovimab |     3,221 |     4,890 
    paxlovid |     3,294 |     4,873 
molnupiravir |     3,270 |     4,947 
-------------+-----------+----------
       Total |    41,670 |    55,554 

             | fail_ae_dr
             |   ug_all
        drug |         0 |     Total
-------------+-----------+----------
     control |     8,006 |     9,144 
  sotrovimab |     1,668 |     1,915 
    paxlovid |     1,575 |     1,822 
molnupiravir |     1,675 |     1,922 
-------------+-----------+----------
       Total |    12,924 |    14,803 


             | fail_ae_dr
             |   ug_all
        drug |         1 |     Total
-------------+-----------+----------
     control |     1,138 |     9,144 
  sotrovimab |       247 |     1,915 
    paxlovid |       247 |     1,822 
molnupiravir |       247 |     1,922 
-------------+-----------+----------
       Total |     1,879 |    14,803 
ae_imae_all

----------------------------------------
-> drug = control
  40,657
----------------------------------------
-> drug = sotrovimab
  4,865
----------------------------------------
-> drug = paxlovid
  4,852
----------------------------------------
-> drug = molnupiravir
  4,927

----------------------------------------
-> drug = control
  5,170
----------------------------------------
-> drug = sotrovimab
  1,136
----------------------------------------
-> drug = paxlovid
  1,089
----------------------------------------
-> drug = molnupiravir
  1,081

----------------------------------------
-> drug = control
  1,196
----------------------------------------
-> drug = sotrovimab
  236
----------------------------------------
-> drug = paxlovid
  232
----------------------------------------
-> drug = molnupiravir
  244
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_ae_im
             |   ae_all
        drug |         0 |     Total
-------------+-----------+----------
     control |     4,212 |    40,844 
  sotrovimab |       925 |     4,890 
    paxlovid |       885 |     4,873 
molnupiravir |       874 |     4,947 
-------------+-----------+----------
       Total |     6,896 |    55,554 


             | fail_ae_im
             |   ae_all
        drug |         1 |     Total
-------------+-----------+----------
     control |    36,632 |    40,844 
  sotrovimab |     3,965 |     4,890 
    paxlovid |     3,988 |     4,873 
molnupiravir |     4,073 |     4,947 
-------------+-----------+----------
       Total |    48,658 |    55,554 

             | fail_ae_im
             |   ae_all
        drug |         0 |     Total
-------------+-----------+----------
     control |     4,125 |     5,302 
  sotrovimab |       925 |     1,161 
    paxlovid |       885 |     1,110 
molnupiravir |       873 |     1,101 
-------------+-----------+----------
       Total |     6,808 |     8,674 


             | fail_ae_im
             |   ae_all
        drug |         1 |     Total
-------------+-----------+----------
     control |     1,177 |     5,302 
  sotrovimab |       236 |     1,161 
    paxlovid |       225 |     1,110 
molnupiravir |       228 |     1,101 
-------------+-----------+----------
       Total |     1,866 |     8,674 
ae_all

----------------------------------------
-> drug = control
  40,843
----------------------------------------
-> drug = sotrovimab
  4,890
----------------------------------------
-> drug = paxlovid
  4,873
----------------------------------------
-> drug = molnupiravir
  4,947

----------------------------------------
-> drug = control
  2,812
----------------------------------------
-> drug = sotrovimab
  636
----------------------------------------
-> drug = paxlovid
  574
----------------------------------------
-> drug = molnupiravir
  590

----------------------------------------
-> drug = control
  1,104
----------------------------------------
-> drug = sotrovimab
  268
----------------------------------------
-> drug = paxlovid
  245
----------------------------------------
-> drug = molnupiravir
  244
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_ae_al
             |     l
        drug |         0 |     Total
-------------+-----------+----------
     control |     1,706 |    40,844 
  sotrovimab |       379 |     4,890 
    paxlovid |       336 |     4,873 
molnupiravir |       355 |     4,947 
-------------+-----------+----------
       Total |     2,776 |    55,554 


             | fail_ae_al
             |     l
        drug |         1 |     Total
-------------+-----------+----------
     control |    39,138 |    40,844 
  sotrovimab |     4,511 |     4,890 
    paxlovid |     4,537 |     4,873 
molnupiravir |     4,592 |     4,947 
-------------+-----------+----------
       Total |    52,778 |    55,554 

             | fail_ae_al
             |     l
        drug |         0 |     Total
-------------+-----------+----------
     control |     1,706 |     2,813 
  sotrovimab |       379 |       636 
    paxlovid |       336 |       574 
molnupiravir |       355 |       590 
-------------+-----------+----------
       Total |     2,776 |     4,613 


             | fail_ae_al
             |     l
        drug |         1 |     Total
-------------+-----------+----------
     control |     1,107 |     2,813 
  sotrovimab |       257 |       636 
    paxlovid |       238 |       574 
molnupiravir |       235 |       590 
-------------+-----------+----------
       Total |     1,837 |     4,613 
allcause_emerg_aande

----------------------------------------
-> drug = control
  2,037
----------------------------------------
-> drug = sotrovimab
  238
----------------------------------------
-> drug = paxlovid
  233
----------------------------------------
-> drug = molnupiravir
  251

----------------------------------------
-> drug = control
  763
----------------------------------------
-> drug = sotrovimab
  141
----------------------------------------
-> drug = paxlovid
  136
----------------------------------------
-> drug = molnupiravir
  162

----------------------------------------
-> drug = control
  68
----------------------------------------
-> drug = sotrovimab
  13
----------------------------------------
-> drug = paxlovid
  11
----------------------------------------
-> drug = molnupiravir
  16
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_allca
             | use_emerg_
             |   aande
        drug |         0 |     Total
-------------+-----------+----------
     control |    39,572 |    40,844 
  sotrovimab |     4,781 |     4,890 
    paxlovid |     4,766 |     4,873 
molnupiravir |     4,845 |     4,947 
-------------+-----------+----------
       Total |    53,964 |    55,554 


             | fail_allca
             | use_emerg_
             |   aande
        drug |         1 |     Total
-------------+-----------+----------
     control |     1,272 |    40,844 
  sotrovimab |       109 |     4,890 
    paxlovid |       107 |     4,873 
molnupiravir |       102 |     4,947 
-------------+-----------+----------
       Total |     1,590 |    55,554 

             | fail_allca
             | use_emerg_
             |   aande
        drug |         0 |     Total
-------------+-----------+----------
     control |    25,473 |    25,537 
  sotrovimab |     4,781 |     4,793 
    paxlovid |     4,766 |     4,776 
molnupiravir |     4,845 |     4,858 
-------------+-----------+----------
       Total |    39,865 |    39,964 


             | fail_allca
             | use_emerg_
             |   aande
        drug |         1 |     Total
-------------+-----------+----------
     control |        64 |    25,537 
  sotrovimab |        12 |     4,793 
    paxlovid |        10 |     4,776 
molnupiravir |        13 |     4,858 
-------------+-----------+----------
       Total |        99 |    39,964 
covid_hosp_date

----------------------------------------
-> drug = control
  4,108
----------------------------------------
-> drug = sotrovimab
  466
----------------------------------------
-> drug = paxlovid
  461
----------------------------------------
-> drug = molnupiravir
  515

----------------------------------------
-> drug = control
  1,450
----------------------------------------
-> drug = sotrovimab
  281
----------------------------------------
-> drug = paxlovid
  272
----------------------------------------
-> drug = molnupiravir
  300

----------------------------------------
-> drug = control
  136
----------------------------------------
-> drug = sotrovimab
  33
----------------------------------------
-> drug = paxlovid
  17
----------------------------------------
-> drug = molnupiravir
  29
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_covid
             | _hosp_date
        drug |         0 |     Total
-------------+-----------+----------
     control |    38,186 |    40,844 
  sotrovimab |     4,674 |     4,890 
    paxlovid |     4,670 |     4,873 
molnupiravir |     4,701 |     4,947 
-------------+-----------+----------
       Total |    52,231 |    55,554 


             | fail_covid
             | _hosp_date
        drug |         1 |     Total
-------------+-----------+----------
     control |     2,658 |    40,844 
  sotrovimab |       216 |     4,890 
    paxlovid |       203 |     4,873 
molnupiravir |       246 |     4,947 
-------------+-----------+----------
       Total |     3,323 |    55,554 

             | fail_covid
             | _hosp_date
        drug |         0 |     Total
-------------+-----------+----------
     control |    24,786 |    24,914 
  sotrovimab |     4,673 |     4,705 
    paxlovid |     4,669 |     4,684 
molnupiravir |     4,701 |     4,732 
-------------+-----------+----------
       Total |    38,829 |    39,035 


             | fail_covid
             | _hosp_date
        drug |         1 |     Total
-------------+-----------+----------
     control |       128 |    24,914 
  sotrovimab |        32 |     4,705 
    paxlovid |        15 |     4,684 
molnupiravir |        31 |     4,732 
-------------+-----------+----------
       Total |       206 |    39,035 
all_hosp_date

----------------------------------------
-> drug = control
  4,029
----------------------------------------
-> drug = sotrovimab
  485
----------------------------------------
-> drug = paxlovid
  462
----------------------------------------
-> drug = molnupiravir
  514

----------------------------------------
-> drug = control
  1,451
----------------------------------------
-> drug = sotrovimab
  282
----------------------------------------
-> drug = paxlovid
  275
----------------------------------------
-> drug = molnupiravir
  307

----------------------------------------
-> drug = control
  125
----------------------------------------
-> drug = sotrovimab
  19
----------------------------------------
-> drug = paxlovid
  21
----------------------------------------
-> drug = molnupiravir
  39
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_all_h
             |  osp_date
        drug |         0 |     Total
-------------+-----------+----------
     control |    38,279 |    40,844 
  sotrovimab |     4,671 |     4,890 
    paxlovid |     4,667 |     4,873 
molnupiravir |     4,707 |     4,947 
-------------+-----------+----------
       Total |    52,324 |    55,554 


             | fail_all_h
             |  osp_date
        drug |         1 |     Total
-------------+-----------+----------
     control |     2,565 |    40,844 
  sotrovimab |       219 |     4,890 
    paxlovid |       206 |     4,873 
molnupiravir |       240 |     4,947 
-------------+-----------+----------
       Total |     3,230 |    55,554 

             | fail_all_h
             |  osp_date
        drug |         0 |     Total
-------------+-----------+----------
     control |    24,830 |    24,942 
  sotrovimab |     4,671 |     4,687 
    paxlovid |     4,666 |     4,686 
molnupiravir |     4,704 |     4,740 
-------------+-----------+----------
       Total |    38,871 |    39,055 


             | fail_all_h
             |  osp_date
        drug |         1 |     Total
-------------+-----------+----------
     control |       112 |    24,942 
  sotrovimab |        16 |     4,687 
    paxlovid |        20 |     4,686 
molnupiravir |        36 |     4,740 
-------------+-----------+----------
       Total |       184 |    39,055 
died_date_ons

----------------------------------------
-> drug = control
  24,635
----------------------------------------
-> drug = sotrovimab
  2,963
----------------------------------------
-> drug = paxlovid
  2,911
----------------------------------------
-> drug = molnupiravir
  2,992

----------------------------------------
-> drug = control
  4,971
----------------------------------------
-> drug = sotrovimab
  980
----------------------------------------
-> drug = paxlovid
  991
----------------------------------------
-> drug = molnupiravir
  983

----------------------------------------
-> drug = control
  462
----------------------------------------
-> drug = sotrovimab
  97
----------------------------------------
-> drug = paxlovid
  97
----------------------------------------
-> drug = molnupiravir
  86
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_died_
             |  date_ons
        drug |         0 |     Total
-------------+-----------+----------
     control |    21,141 |    40,844 
  sotrovimab |     2,815 |     4,890 
    paxlovid |     2,868 |     4,873 
molnupiravir |     2,859 |     4,947 
-------------+-----------+----------
       Total |    29,683 |    55,554 


             | fail_died_
             |  date_ons
        drug |         1 |     Total
-------------+-----------+----------
     control |    19,703 |    40,844 
  sotrovimab |     2,075 |     4,890 
    paxlovid |     2,005 |     4,873 
molnupiravir |     2,088 |     4,947 
-------------+-----------+----------
       Total |    25,871 |    55,554 

             | fail_died_
             |  date_ons
        drug |         0 |     Total
-------------+-----------+----------
     control |    14,849 |    15,288 
  sotrovimab |     2,812 |     2,907 
    paxlovid |     2,864 |     2,953 
molnupiravir |     2,856 |     2,938 
-------------+-----------+----------
       Total |    23,381 |    24,086 


             | fail_died_
             |  date_ons
        drug |         1 |     Total
-------------+-----------+----------
     control |       439 |    15,288 
  sotrovimab |        95 |     2,907 
    paxlovid |        89 |     2,953 
molnupiravir |        82 |     2,938 
-------------+-----------+----------
       Total |       705 |    24,086 
ae_diverticulitis_snomed

----------------------------------------
-> drug = control
  16,485
----------------------------------------
-> drug = sotrovimab
  1,966
----------------------------------------
-> drug = paxlovid
  1,926
----------------------------------------
-> drug = molnupiravir
  1,966

----------------------------------------
-> drug = control
  5,330
----------------------------------------
-> drug = sotrovimab
  1,085
----------------------------------------
-> drug = paxlovid
  1,060
----------------------------------------
-> drug = molnupiravir
  1,081

----------------------------------------
-> drug = control
  511
----------------------------------------
-> drug = sotrovimab
  96
----------------------------------------
-> drug = paxlovid
  96
----------------------------------------
-> drug = molnupiravir
  94
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_ae_di
             | verticulit
             | is_snomed
        drug |         0 |     Total
-------------+-----------+----------
     control |    29,598 |    40,844 
  sotrovimab |     3,930 |     4,890 
    paxlovid |     3,917 |     4,873 
molnupiravir |     3,978 |     4,947 
-------------+-----------+----------
       Total |    41,423 |    55,554 


             | fail_ae_di
             | verticulit
             | is_snomed
        drug |         1 |     Total
-------------+-----------+----------
     control |    11,246 |    40,844 
  sotrovimab |       960 |     4,890 
    paxlovid |       956 |     4,873 
molnupiravir |       969 |     4,947 
-------------+-----------+----------
       Total |    14,131 |    55,554 

             | fail_ae_di
             | verticulit
             | is_snomed
        drug |         0 |     Total
-------------+-----------+----------
     control |    20,402 |    20,893 
  sotrovimab |     3,926 |     4,009 
    paxlovid |     3,914 |     4,007 
molnupiravir |     3,972 |     4,062 
-------------+-----------+----------
       Total |    32,214 |    32,971 


             | fail_ae_di
             | verticulit
             | is_snomed
        drug |         1 |     Total
-------------+-----------+----------
     control |       491 |    20,893 
  sotrovimab |        83 |     4,009 
    paxlovid |        93 |     4,007 
molnupiravir |        90 |     4,062 
-------------+-----------+----------
       Total |       757 |    32,971 
ae_diarrhoea_snomed

----------------------------------------
-> drug = control
  16,315
----------------------------------------
-> drug = sotrovimab
  1,941
----------------------------------------
-> drug = paxlovid
  1,956
----------------------------------------
-> drug = molnupiravir
  1,982

----------------------------------------
-> drug = control
  5,264
----------------------------------------
-> drug = sotrovimab
  1,022
----------------------------------------
-> drug = paxlovid
  1,028
----------------------------------------
-> drug = molnupiravir
  1,063

----------------------------------------
-> drug = control
  491
----------------------------------------
-> drug = sotrovimab
  92
----------------------------------------
-> drug = paxlovid
  100
----------------------------------------
-> drug = molnupiravir
  81
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_ae_di
             | arrhoea_sn
             |    omed
        drug |         0 |     Total
-------------+-----------+----------
     control |    29,801 |    40,844 
  sotrovimab |     3,882 |     4,890 
    paxlovid |     3,857 |     4,873 
molnupiravir |     3,957 |     4,947 
-------------+-----------+----------
       Total |    41,497 |    55,554 


             | fail_ae_di
             | arrhoea_sn
             |    omed
        drug |         1 |     Total
-------------+-----------+----------
     control |    11,043 |    40,844 
  sotrovimab |     1,008 |     4,890 
    paxlovid |     1,016 |     4,873 
molnupiravir |       990 |     4,947 
-------------+-----------+----------
       Total |    14,057 |    55,554 

             | fail_ae_di
             | arrhoea_sn
             |    omed
        drug |         0 |     Total
-------------+-----------+----------
     control |    20,471 |    20,929 
  sotrovimab |     3,881 |     3,971 
    paxlovid |     3,855 |     3,945 
molnupiravir |     3,952 |     4,028 
-------------+-----------+----------
       Total |    32,159 |    32,873 


             | fail_ae_di
             | arrhoea_sn
             |    omed
        drug |         1 |     Total
-------------+-----------+----------
     control |       458 |    20,929 
  sotrovimab |        90 |     3,971 
    paxlovid |        90 |     3,945 
molnupiravir |        76 |     4,028 
-------------+-----------+----------
       Total |       714 |    32,873 
ae_taste_snomed

----------------------------------------
-> drug = control
  16,178
----------------------------------------
-> drug = sotrovimab
  1,969
----------------------------------------
-> drug = paxlovid
  1,994
----------------------------------------
-> drug = molnupiravir
  1,988

----------------------------------------
-> drug = control
  5,190
----------------------------------------
-> drug = sotrovimab
  1,078
----------------------------------------
-> drug = paxlovid
  1,080
----------------------------------------
-> drug = molnupiravir
  1,108

----------------------------------------
-> drug = control
  514
----------------------------------------
-> drug = sotrovimab
  83
----------------------------------------
-> drug = paxlovid
  107
----------------------------------------
-> drug = molnupiravir
  107
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_ae_ta
             | ste_snomed
        drug |         0 |     Total
-------------+-----------+----------
     control |    29,778 |    40,844 
  sotrovimab |     3,926 |     4,890 
    paxlovid |     3,861 |     4,873 
molnupiravir |     3,963 |     4,947 
-------------+-----------+----------
       Total |    41,528 |    55,554 


             | fail_ae_ta
             | ste_snomed
        drug |         1 |     Total
-------------+-----------+----------
     control |    11,066 |    40,844 
  sotrovimab |       964 |     4,890 
    paxlovid |     1,012 |     4,873 
molnupiravir |       984 |     4,947 
-------------+-----------+----------
       Total |    14,026 |    55,554 

             | fail_ae_ta
             | ste_snomed
        drug |         0 |     Total
-------------+-----------+----------
     control |    20,490 |    20,973 
  sotrovimab |     3,923 |     3,999 
    paxlovid |     3,856 |     3,959 
molnupiravir |     3,959 |     4,067 
-------------+-----------+----------
       Total |    32,228 |    32,998 


             | fail_ae_ta
             | ste_snomed
        drug |         1 |     Total
-------------+-----------+----------
     control |       483 |    20,973 
  sotrovimab |        76 |     3,999 
    paxlovid |       103 |     3,959 
molnupiravir |       108 |     4,067 
-------------+-----------+----------
       Total |       770 |    32,998 
ae_diverticulitis_icd

----------------------------------------
-> drug = control
  16,387
----------------------------------------
-> drug = sotrovimab
  1,957
----------------------------------------
-> drug = paxlovid
  1,971
----------------------------------------
-> drug = molnupiravir
  1,979

----------------------------------------
-> drug = control
  5,093
----------------------------------------
-> drug = sotrovimab
  1,048
----------------------------------------
-> drug = paxlovid
  1,080
----------------------------------------
-> drug = molnupiravir
  1,045

----------------------------------------
-> drug = control
  490
----------------------------------------
-> drug = sotrovimab
  83
----------------------------------------
-> drug = paxlovid
  94
----------------------------------------
-> drug = molnupiravir
  97
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_ae_di
             | verticulit
             |   is_icd
        drug |         0 |     Total
-------------+-----------+----------
     control |    29,548 |    40,844 
  sotrovimab |     3,910 |     4,890 
    paxlovid |     3,892 |     4,873 
molnupiravir |     3,929 |     4,947 
-------------+-----------+----------
       Total |    41,279 |    55,554 


             | fail_ae_di
             | verticulit
             |   is_icd
        drug |         1 |     Total
-------------+-----------+----------
     control |    11,296 |    40,844 
  sotrovimab |       980 |     4,890 
    paxlovid |       981 |     4,873 
molnupiravir |     1,018 |     4,947 
-------------+-----------+----------
       Total |    14,275 |    55,554 

             | fail_ae_di
             | verticulit
             |   is_icd
        drug |         0 |     Total
-------------+-----------+----------
     control |    20,256 |    20,704 
  sotrovimab |     3,905 |     3,981 
    paxlovid |     3,889 |     3,982 
molnupiravir |     3,926 |     4,013 
-------------+-----------+----------
       Total |    31,976 |    32,680 


             | fail_ae_di
             | verticulit
             |   is_icd
        drug |         1 |     Total
-------------+-----------+----------
     control |       448 |    20,704 
  sotrovimab |        76 |     3,981 
    paxlovid |        93 |     3,982 
molnupiravir |        87 |     4,013 
-------------+-----------+----------
       Total |       704 |    32,680 
ae_taste_icd

----------------------------------------
-> drug = control
  16,287
----------------------------------------
-> drug = sotrovimab
  1,988
----------------------------------------
-> drug = paxlovid
  1,964
----------------------------------------
-> drug = molnupiravir
  1,950

----------------------------------------
-> drug = control
  5,194
----------------------------------------
-> drug = sotrovimab
  1,127
----------------------------------------
-> drug = paxlovid
  1,056
----------------------------------------
-> drug = molnupiravir
  1,068

----------------------------------------
-> drug = control
  534
----------------------------------------
-> drug = sotrovimab
  91
----------------------------------------
-> drug = paxlovid
  110
----------------------------------------
-> drug = molnupiravir
  113
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_ae_ta
             |  ste_icd
        drug |         0 |     Total
-------------+-----------+----------
     control |    29,673 |    40,844 
  sotrovimab |     3,946 |     4,890 
    paxlovid |     3,873 |     4,873 
molnupiravir |     3,960 |     4,947 
-------------+-----------+----------
       Total |    41,452 |    55,554 


             | fail_ae_ta
             |  ste_icd
        drug |         1 |     Total
-------------+-----------+----------
     control |    11,171 |    40,844 
  sotrovimab |       944 |     4,890 
    paxlovid |     1,000 |     4,873 
molnupiravir |       987 |     4,947 
-------------+-----------+----------
       Total |    14,102 |    55,554 

             | fail_ae_ta
             |  ste_icd
        drug |         0 |     Total
-------------+-----------+----------
     control |    20,368 |    20,859 
  sotrovimab |     3,943 |     4,029 
    paxlovid |     3,871 |     3,965 
molnupiravir |     3,954 |     4,065 
-------------+-----------+----------
       Total |    32,136 |    32,918 


             | fail_ae_ta
             |  ste_icd
        drug |         1 |     Total
-------------+-----------+----------
     control |       491 |    20,859 
  sotrovimab |        86 |     4,029 
    paxlovid |        94 |     3,965 
molnupiravir |       111 |     4,065 
-------------+-----------+----------
       Total |       782 |    32,918 
ae_diverticulitis_ae

----------------------------------------
-> drug = control
  16,445
----------------------------------------
-> drug = sotrovimab
  1,890
----------------------------------------
-> drug = paxlovid
  1,970
----------------------------------------
-> drug = molnupiravir
  1,970

----------------------------------------
-> drug = control
  5,300
----------------------------------------
-> drug = sotrovimab
  1,017
----------------------------------------
-> drug = paxlovid
  1,056
----------------------------------------
-> drug = molnupiravir
  1,103

----------------------------------------
-> drug = control
  500
----------------------------------------
-> drug = sotrovimab
  79
----------------------------------------
-> drug = paxlovid
  104
----------------------------------------
-> drug = molnupiravir
  86
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_ae_di
             | verticulit
             |   is_ae
        drug |         0 |     Total
-------------+-----------+----------
     control |    29,658 |    40,844 
  sotrovimab |     3,951 |     4,890 
    paxlovid |     3,863 |     4,873 
molnupiravir |     4,005 |     4,947 
-------------+-----------+----------
       Total |    41,477 |    55,554 


             | fail_ae_di
             | verticulit
             |   is_ae
        drug |         1 |     Total
-------------+-----------+----------
     control |    11,186 |    40,844 
  sotrovimab |       939 |     4,890 
    paxlovid |     1,010 |     4,873 
molnupiravir |       942 |     4,947 
-------------+-----------+----------
       Total |    14,077 |    55,554 

             | fail_ae_di
             | verticulit
             |   is_ae
        drug |         0 |     Total
-------------+-----------+----------
     control |    20,449 |    20,918 
  sotrovimab |     3,946 |     4,017 
    paxlovid |     3,859 |     3,959 
molnupiravir |     3,996 |     4,080 
-------------+-----------+----------
       Total |    32,250 |    32,974 


             | fail_ae_di
             | verticulit
             |   is_ae
        drug |         1 |     Total
-------------+-----------+----------
     control |       469 |    20,918 
  sotrovimab |        71 |     4,017 
    paxlovid |       100 |     3,959 
molnupiravir |        84 |     4,080 
-------------+-----------+----------
       Total |       724 |    32,974 
ae_anaphylaxis_snomed

----------------------------------------
-> drug = control
  16,309
----------------------------------------
-> drug = sotrovimab
  1,968
----------------------------------------
-> drug = paxlovid
  1,978
----------------------------------------
-> drug = molnupiravir
  2,013

----------------------------------------
-> drug = control
  5,347
----------------------------------------
-> drug = sotrovimab
  1,048
----------------------------------------
-> drug = paxlovid
  1,078
----------------------------------------
-> drug = molnupiravir
  1,100

----------------------------------------
-> drug = control
  502
----------------------------------------
-> drug = sotrovimab
  93
----------------------------------------
-> drug = paxlovid
  106
----------------------------------------
-> drug = molnupiravir
  106
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_ae_an
             | aphylaxis_
             |   snomed
        drug |         0 |     Total
-------------+-----------+----------
     control |    29,850 |    40,844 
  sotrovimab |     3,884 |     4,890 
    paxlovid |     3,882 |     4,873 
molnupiravir |     3,935 |     4,947 
-------------+-----------+----------
       Total |    41,551 |    55,554 


             | fail_ae_an
             | aphylaxis_
             |   snomed
        drug |         1 |     Total
-------------+-----------+----------
     control |    10,994 |    40,844 
  sotrovimab |     1,006 |     4,890 
    paxlovid |       991 |     4,873 
molnupiravir |     1,012 |     4,947 
-------------+-----------+----------
       Total |    14,003 |    55,554 

             | fail_ae_an
             | aphylaxis_
             |   snomed
        drug |         0 |     Total
-------------+-----------+----------
     control |    20,506 |    20,974 
  sotrovimab |     3,884 |     3,970 
    paxlovid |     3,880 |     3,973 
molnupiravir |     3,930 |     4,034 
-------------+-----------+----------
       Total |    32,200 |    32,951 


             | fail_ae_an
             | aphylaxis_
             |   snomed
        drug |         1 |     Total
-------------+-----------+----------
     control |       468 |    20,974 
  sotrovimab |        86 |     3,970 
    paxlovid |        93 |     3,973 
molnupiravir |       104 |     4,034 
-------------+-----------+----------
       Total |       751 |    32,951 
ae_rash_snomed

----------------------------------------
-> drug = control
  16,210
----------------------------------------
-> drug = sotrovimab
  1,963
----------------------------------------
-> drug = paxlovid
  1,977
----------------------------------------
-> drug = molnupiravir
  2,002

----------------------------------------
-> drug = control
  5,178
----------------------------------------
-> drug = sotrovimab
  1,070
----------------------------------------
-> drug = paxlovid
  1,050
----------------------------------------
-> drug = molnupiravir
  1,084

----------------------------------------
-> drug = control
  504
----------------------------------------
-> drug = sotrovimab
  102
----------------------------------------
-> drug = paxlovid
  104
----------------------------------------
-> drug = molnupiravir
  95
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_ae_ra
             | sh_snomed
        drug |         0 |     Total
-------------+-----------+----------
     control |    29,774 |    40,844 
  sotrovimab |     3,907 |     4,890 
    paxlovid |     3,857 |     4,873 
molnupiravir |     3,944 |     4,947 
-------------+-----------+----------
       Total |    41,482 |    55,554 


             | fail_ae_ra
             | sh_snomed
        drug |         1 |     Total
-------------+-----------+----------
     control |    11,070 |    40,844 
  sotrovimab |       983 |     4,890 
    paxlovid |     1,016 |     4,873 
molnupiravir |     1,003 |     4,947 
-------------+-----------+----------
       Total |    14,072 |    55,554 

             | fail_ae_ra
             | sh_snomed
        drug |         0 |     Total
-------------+-----------+----------
     control |    20,422 |    20,880 
  sotrovimab |     3,902 |     3,997 
    paxlovid |     3,852 |     3,946 
molnupiravir |     3,938 |     4,029 
-------------+-----------+----------
       Total |    32,114 |    32,852 


             | fail_ae_ra
             | sh_snomed
        drug |         1 |     Total
-------------+-----------+----------
     control |       458 |    20,880 
  sotrovimab |        95 |     3,997 
    paxlovid |        94 |     3,946 
molnupiravir |        91 |     4,029 
-------------+-----------+----------
       Total |       738 |    32,852 
ae_anaphylaxis_icd

----------------------------------------
-> drug = control
  16,356
----------------------------------------
-> drug = sotrovimab
  1,998
----------------------------------------
-> drug = paxlovid
  1,923
----------------------------------------
-> drug = molnupiravir
  1,968

----------------------------------------
-> drug = control
  5,203
----------------------------------------
-> drug = sotrovimab
  1,059
----------------------------------------
-> drug = paxlovid
  998
----------------------------------------
-> drug = molnupiravir
  1,076

----------------------------------------
-> drug = control
  541
----------------------------------------
-> drug = sotrovimab
  97
----------------------------------------
-> drug = paxlovid
  98
----------------------------------------
-> drug = molnupiravir
  105
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_ae_an
             | aphylaxis_
             |    icd
        drug |         0 |     Total
-------------+-----------+----------
     control |    29,622 |    40,844 
  sotrovimab |     3,868 |     4,890 
    paxlovid |     3,861 |     4,873 
molnupiravir |     3,959 |     4,947 
-------------+-----------+----------
       Total |    41,310 |    55,554 


             | fail_ae_an
             | aphylaxis_
             |    icd
        drug |         1 |     Total
-------------+-----------+----------
     control |    11,222 |    40,844 
  sotrovimab |     1,022 |     4,890 
    paxlovid |     1,012 |     4,873 
molnupiravir |       988 |     4,947 
-------------+-----------+----------
       Total |    14,244 |    55,554 

             | fail_ae_an
             | aphylaxis_
             |    icd
        drug |         0 |     Total
-------------+-----------+----------
     control |    20,339 |    20,833 
  sotrovimab |     3,862 |     3,951 
    paxlovid |     3,854 |     3,948 
molnupiravir |     3,957 |     4,055 
-------------+-----------+----------
       Total |    32,012 |    32,787 


             | fail_ae_an
             | aphylaxis_
             |    icd
        drug |         1 |     Total
-------------+-----------+----------
     control |       494 |    20,833 
  sotrovimab |        89 |     3,951 
    paxlovid |        94 |     3,948 
molnupiravir |        98 |     4,055 
-------------+-----------+----------
       Total |       775 |    32,787 
ae_anaphlaxis_ae

----------------------------------------
-> drug = control
  16,429
----------------------------------------
-> drug = sotrovimab
  1,926
----------------------------------------
-> drug = paxlovid
  1,948
----------------------------------------
-> drug = molnupiravir
  1,978

----------------------------------------
-> drug = control
  5,389
----------------------------------------
-> drug = sotrovimab
  1,069
----------------------------------------
-> drug = paxlovid
  1,041
----------------------------------------
-> drug = molnupiravir
  1,032

----------------------------------------
-> drug = control
  483
----------------------------------------
-> drug = sotrovimab
  87
----------------------------------------
-> drug = paxlovid
  107
----------------------------------------
-> drug = molnupiravir
  93
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_ae_an
             | aphlaxis_a
             |     e
        drug |         0 |     Total
-------------+-----------+----------
     control |    29,827 |    40,844 
  sotrovimab |     3,953 |     4,890 
    paxlovid |     3,872 |     4,873 
molnupiravir |     3,921 |     4,947 
-------------+-----------+----------
       Total |    41,573 |    55,554 


             | fail_ae_an
             | aphlaxis_a
             |     e
        drug |         1 |     Total
-------------+-----------+----------
     control |    11,017 |    40,844 
  sotrovimab |       937 |     4,890 
    paxlovid |     1,001 |     4,873 
molnupiravir |     1,026 |     4,947 
-------------+-----------+----------
       Total |    13,981 |    55,554 

             | fail_ae_an
             | aphlaxis_a
             |     e
        drug |         0 |     Total
-------------+-----------+----------
     control |    20,495 |    20,940 
  sotrovimab |     3,951 |     4,033 
    paxlovid |     3,868 |     3,966 
molnupiravir |     3,916 |     4,001 
-------------+-----------+----------
       Total |    32,230 |    32,940 


             | fail_ae_an
             | aphlaxis_a
             |     e
        drug |         1 |     Total
-------------+-----------+----------
     control |       445 |    20,940 
  sotrovimab |        82 |     4,033 
    paxlovid |        98 |     3,966 
molnupiravir |        85 |     4,001 
-------------+-----------+----------
       Total |       710 |    32,940 
ae_drugreact_ae

----------------------------------------
-> drug = control
  16,389
----------------------------------------
-> drug = sotrovimab
  1,958
----------------------------------------
-> drug = paxlovid
  1,966
----------------------------------------
-> drug = molnupiravir
  1,990

----------------------------------------
-> drug = control
  5,285
----------------------------------------
-> drug = sotrovimab
  1,077
----------------------------------------
-> drug = paxlovid
  1,035
----------------------------------------
-> drug = molnupiravir
  1,082

----------------------------------------
-> drug = control
  476
----------------------------------------
-> drug = sotrovimab
  107
----------------------------------------
-> drug = paxlovid
  105
----------------------------------------
-> drug = molnupiravir
  99
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_ae_dr
             | ugreact_ae
        drug |         0 |     Total
-------------+-----------+----------
     control |    29,753 |    40,844 
  sotrovimab |     3,912 |     4,890 
    paxlovid |     3,854 |     4,873 
molnupiravir |     3,947 |     4,947 
-------------+-----------+----------
       Total |    41,466 |    55,554 


             | fail_ae_dr
             | ugreact_ae
        drug |         1 |     Total
-------------+-----------+----------
     control |    11,091 |    40,844 
  sotrovimab |       978 |     4,890 
    paxlovid |     1,019 |     4,873 
molnupiravir |     1,000 |     4,947 
-------------+-----------+----------
       Total |    14,088 |    55,554 

             | fail_ae_dr
             | ugreact_ae
        drug |         0 |     Total
-------------+-----------+----------
     control |    20,375 |    20,810 
  sotrovimab |     3,908 |     4,009 
    paxlovid |     3,849 |     3,942 
molnupiravir |     3,942 |     4,039 
-------------+-----------+----------
       Total |    32,074 |    32,800 


             | fail_ae_dr
             | ugreact_ae
        drug |         1 |     Total
-------------+-----------+----------
     control |       435 |    20,810 
  sotrovimab |       101 |     4,009 
    paxlovid |        93 |     3,942 
molnupiravir |        97 |     4,039 
-------------+-----------+----------
       Total |       726 |    32,800 
ae_allergic_ae

----------------------------------------
-> drug = control
  16,415
----------------------------------------
-> drug = sotrovimab
  1,882
----------------------------------------
-> drug = paxlovid
  1,941
----------------------------------------
-> drug = molnupiravir
  1,957

----------------------------------------
-> drug = control
  5,267
----------------------------------------
-> drug = sotrovimab
  1,034
----------------------------------------
-> drug = paxlovid
  1,021
----------------------------------------
-> drug = molnupiravir
  1,063

----------------------------------------
-> drug = control
  517
----------------------------------------
-> drug = sotrovimab
  95
----------------------------------------
-> drug = paxlovid
  89
----------------------------------------
-> drug = molnupiravir
  104
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_ae_al
             | lergic_ae
        drug |         0 |     Total
-------------+-----------+----------
     control |    29,653 |    40,844 
  sotrovimab |     3,959 |     4,890 
    paxlovid |     3,872 |     4,873 
molnupiravir |     3,959 |     4,947 
-------------+-----------+----------
       Total |    41,443 |    55,554 


             | fail_ae_al
             | lergic_ae
        drug |         1 |     Total
-------------+-----------+----------
     control |    11,191 |    40,844 
  sotrovimab |       931 |     4,890 
    paxlovid |     1,001 |     4,873 
molnupiravir |       988 |     4,947 
-------------+-----------+----------
       Total |    14,111 |    55,554 

             | fail_ae_al
             | lergic_ae
        drug |         0 |     Total
-------------+-----------+----------
     control |    20,368 |    20,860 
  sotrovimab |     3,951 |     4,042 
    paxlovid |     3,869 |     3,953 
molnupiravir |     3,957 |     4,053 
-------------+-----------+----------
       Total |    32,145 |    32,908 


             | fail_ae_al
             | lergic_ae
        drug |         1 |     Total
-------------+-----------+----------
     control |       492 |    20,860 
  sotrovimab |        91 |     4,042 
    paxlovid |        84 |     3,953 
molnupiravir |        96 |     4,053 
-------------+-----------+----------
       Total |       763 |    32,908 
new_ae_ra_snomed

----------------------------------------
-> drug = control
  13,305
----------------------------------------
-> drug = sotrovimab
  1,577
----------------------------------------
-> drug = paxlovid
  1,579
----------------------------------------
-> drug = molnupiravir
  1,650

----------------------------------------
-> drug = control
  4,320
----------------------------------------
-> drug = sotrovimab
  842
----------------------------------------
-> drug = paxlovid
  867
----------------------------------------
-> drug = molnupiravir
  890

----------------------------------------
-> drug = control
  422
----------------------------------------
-> drug = sotrovimab
  80
----------------------------------------
-> drug = paxlovid
  82
----------------------------------------
-> drug = molnupiravir
  81
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_new_a
             | e_ra_snome
             |     d
        drug |         0 |     Total
-------------+-----------+----------
     control |    31,815 |    40,844 
  sotrovimab |     4,087 |     4,890 
    paxlovid |     4,083 |     4,873 
molnupiravir |     4,121 |     4,947 
-------------+-----------+----------
       Total |    44,106 |    55,554 


             | fail_new_a
             | e_ra_snome
             |     d
        drug |         1 |     Total
-------------+-----------+----------
     control |     9,029 |    40,844 
  sotrovimab |       803 |     4,890 
    paxlovid |       790 |     4,873 
molnupiravir |       826 |     4,947 
-------------+-----------+----------
       Total |    11,448 |    55,554 

             | fail_new_a
             | e_ra_snome
             |     d
        drug |         0 |     Total
-------------+-----------+----------
     control |    21,553 |    21,938 
  sotrovimab |     4,085 |     4,155 
    paxlovid |     4,081 |     4,161 
molnupiravir |     4,117 |     4,187 
-------------+-----------+----------
       Total |    33,836 |    34,441 


             | fail_new_a
             | e_ra_snome
             |     d
        drug |         1 |     Total
-------------+-----------+----------
     control |       385 |    21,938 
  sotrovimab |        70 |     4,155 
    paxlovid |        80 |     4,161 
molnupiravir |        70 |     4,187 
-------------+-----------+----------
       Total |       605 |    34,441 
new_ae_sle_ctv

----------------------------------------
-> drug = control
  13,373
----------------------------------------
-> drug = sotrovimab
  1,551
----------------------------------------
-> drug = paxlovid
  1,550
----------------------------------------
-> drug = molnupiravir
  1,644

----------------------------------------
-> drug = control
  4,357
----------------------------------------
-> drug = sotrovimab
  849
----------------------------------------
-> drug = paxlovid
  826
----------------------------------------
-> drug = molnupiravir
  866

----------------------------------------
-> drug = control
  419
----------------------------------------
-> drug = sotrovimab
  90
----------------------------------------
-> drug = paxlovid
  81
----------------------------------------
-> drug = molnupiravir
  77
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_new_a
             | e_sle_ctv
        drug |         0 |     Total
-------------+-----------+----------
     control |    31,764 |    40,844 
  sotrovimab |     4,106 |     4,890 
    paxlovid |     4,075 |     4,873 
molnupiravir |     4,103 |     4,947 
-------------+-----------+----------
       Total |    44,048 |    55,554 


             | fail_new_a
             | e_sle_ctv
        drug |         1 |     Total
-------------+-----------+----------
     control |     9,080 |    40,844 
  sotrovimab |       784 |     4,890 
    paxlovid |       798 |     4,873 
molnupiravir |       844 |     4,947 
-------------+-----------+----------
       Total |    11,506 |    55,554 

             | fail_new_a
             | e_sle_ctv
        drug |         0 |     Total
-------------+-----------+----------
     control |    21,481 |    21,879 
  sotrovimab |     4,103 |     4,188 
    paxlovid |     4,071 |     4,149 
molnupiravir |     4,097 |     4,169 
-------------+-----------+----------
       Total |    33,752 |    34,385 


             | fail_new_a
             | e_sle_ctv
        drug |         1 |     Total
-------------+-----------+----------
     control |       398 |    21,879 
  sotrovimab |        85 |     4,188 
    paxlovid |        78 |     4,149 
molnupiravir |        72 |     4,169 
-------------+-----------+----------
       Total |       633 |    34,385 
new_ae_psoriasis_snomed

----------------------------------------
-> drug = control
  14,699
----------------------------------------
-> drug = sotrovimab
  1,792
----------------------------------------
-> drug = paxlovid
  1,754
----------------------------------------
-> drug = molnupiravir
  1,767

----------------------------------------
-> drug = control
  4,752
----------------------------------------
-> drug = sotrovimab
  966
----------------------------------------
-> drug = paxlovid
  958
----------------------------------------
-> drug = molnupiravir
  932

----------------------------------------
-> drug = control
  455
----------------------------------------
-> drug = sotrovimab
  102
----------------------------------------
-> drug = paxlovid
  89
----------------------------------------
-> drug = molnupiravir
  90
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_new_a
             | e_psoriasi
             |  s_snomed
        drug |         0 |     Total
-------------+-----------+----------
     control |    30,832 |    40,844 
  sotrovimab |     3,973 |     4,890 
    paxlovid |     3,997 |     4,873 
molnupiravir |     4,029 |     4,947 
-------------+-----------+----------
       Total |    42,831 |    55,554 


             | fail_new_a
             | e_psoriasi
             |  s_snomed
        drug |         1 |     Total
-------------+-----------+----------
     control |    10,012 |    40,844 
  sotrovimab |       917 |     4,890 
    paxlovid |       876 |     4,873 
molnupiravir |       918 |     4,947 
-------------+-----------+----------
       Total |    12,723 |    55,554 

             | fail_new_a
             | e_psoriasi
             |  s_snomed
        drug |         0 |     Total
-------------+-----------+----------
     control |    21,060 |    21,505 
  sotrovimab |     3,968 |     4,064 
    paxlovid |     3,995 |     4,077 
molnupiravir |     4,026 |     4,112 
-------------+-----------+----------
       Total |    33,049 |    33,758 


             | fail_new_a
             | e_psoriasi
             |  s_snomed
        drug |         1 |     Total
-------------+-----------+----------
     control |       445 |    21,505 
  sotrovimab |        96 |     4,064 
    paxlovid |        82 |     4,077 
molnupiravir |        86 |     4,112 
-------------+-----------+----------
       Total |       709 |    33,758 
new_ae_psa_snomed

----------------------------------------
-> drug = control
  14,695
----------------------------------------
-> drug = sotrovimab
  1,718
----------------------------------------
-> drug = paxlovid
  1,751
----------------------------------------
-> drug = molnupiravir
  1,853

----------------------------------------
-> drug = control
  4,736
----------------------------------------
-> drug = sotrovimab
  902
----------------------------------------
-> drug = paxlovid
  953
----------------------------------------
-> drug = molnupiravir
  1,027

----------------------------------------
-> drug = control
  484
----------------------------------------
-> drug = sotrovimab
  61
----------------------------------------
-> drug = paxlovid
  97
----------------------------------------
-> drug = molnupiravir
  101
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_new_a
             | e_psa_snom
             |     ed
        drug |         0 |     Total
-------------+-----------+----------
     control |    30,854 |    40,844 
  sotrovimab |     4,023 |     4,890 
    paxlovid |     3,987 |     4,873 
molnupiravir |     4,026 |     4,947 
-------------+-----------+----------
       Total |    42,890 |    55,554 


             | fail_new_a
             | e_psa_snom
             |     ed
        drug |         1 |     Total
-------------+-----------+----------
     control |     9,990 |    40,844 
  sotrovimab |       867 |     4,890 
    paxlovid |       886 |     4,873 
molnupiravir |       921 |     4,947 
-------------+-----------+----------
       Total |    12,664 |    55,554 

             | fail_new_a
             | e_psa_snom
             |     ed
        drug |         0 |     Total
-------------+-----------+----------
     control |    20,942 |    21,387 
  sotrovimab |     4,018 |     4,074 
    paxlovid |     3,985 |     4,075 
molnupiravir |     4,022 |     4,121 
-------------+-----------+----------
       Total |    32,967 |    33,657 


             | fail_new_a
             | e_psa_snom
             |     ed
        drug |         1 |     Total
-------------+-----------+----------
     control |       445 |    21,387 
  sotrovimab |        56 |     4,074 
    paxlovid |        90 |     4,075 
molnupiravir |        99 |     4,121 
-------------+-----------+----------
       Total |       690 |    33,657 
new_ae_ankspon_ctv

----------------------------------------
-> drug = control
  14,783
----------------------------------------
-> drug = sotrovimab
  1,776
----------------------------------------
-> drug = paxlovid
  1,750
----------------------------------------
-> drug = molnupiravir
  1,781

----------------------------------------
-> drug = control
  4,808
----------------------------------------
-> drug = sotrovimab
  960
----------------------------------------
-> drug = paxlovid
  953
----------------------------------------
-> drug = molnupiravir
  967

----------------------------------------
-> drug = control
  470
----------------------------------------
-> drug = sotrovimab
  101
----------------------------------------
-> drug = paxlovid
  84
----------------------------------------
-> drug = molnupiravir
  90
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_new_a
             | e_ankspon_
             |    ctv
        drug |         0 |     Total
-------------+-----------+----------
     control |    30,832 |    40,844 
  sotrovimab |     3,987 |     4,890 
    paxlovid |     4,002 |     4,873 
molnupiravir |     4,057 |     4,947 
-------------+-----------+----------
       Total |    42,878 |    55,554 


             | fail_new_a
             | e_ankspon_
             |    ctv
        drug |         1 |     Total
-------------+-----------+----------
     control |    10,012 |    40,844 
  sotrovimab |       903 |     4,890 
    paxlovid |       871 |     4,873 
molnupiravir |       890 |     4,947 
-------------+-----------+----------
       Total |    12,676 |    55,554 

             | fail_new_a
             | e_ankspon_
             |    ctv
        drug |         0 |     Total
-------------+-----------+----------
     control |    20,971 |    21,407 
  sotrovimab |     3,983 |     4,074 
    paxlovid |     4,001 |     4,076 
molnupiravir |     4,053 |     4,133 
-------------+-----------+----------
       Total |    33,008 |    33,690 


             | fail_new_a
             | e_ankspon_
             |    ctv
        drug |         1 |     Total
-------------+-----------+----------
     control |       436 |    21,407 
  sotrovimab |        91 |     4,074 
    paxlovid |        75 |     4,076 
molnupiravir |        80 |     4,133 
-------------+-----------+----------
       Total |       682 |    33,690 
new_ae_ibd_snomed

----------------------------------------
-> drug = control
  14,631
----------------------------------------
-> drug = sotrovimab
  1,809
----------------------------------------
-> drug = paxlovid
  1,761
----------------------------------------
-> drug = molnupiravir
  1,817

----------------------------------------
-> drug = control
  4,717
----------------------------------------
-> drug = sotrovimab
  984
----------------------------------------
-> drug = paxlovid
  926
----------------------------------------
-> drug = molnupiravir
  995

----------------------------------------
-> drug = control
  457
----------------------------------------
-> drug = sotrovimab
  88
----------------------------------------
-> drug = paxlovid
  81
----------------------------------------
-> drug = molnupiravir
  99
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_new_a
             | e_ibd_snom
             |     ed
        drug |         0 |     Total
-------------+-----------+----------
     control |    30,931 |    40,844 
  sotrovimab |     3,980 |     4,890 
    paxlovid |     3,963 |     4,873 
molnupiravir |     4,044 |     4,947 
-------------+-----------+----------
       Total |    42,918 |    55,554 


             | fail_new_a
             | e_ibd_snom
             |     ed
        drug |         1 |     Total
-------------+-----------+----------
     control |     9,913 |    40,844 
  sotrovimab |       910 |     4,890 
    paxlovid |       910 |     4,873 
molnupiravir |       903 |     4,947 
-------------+-----------+----------
       Total |    12,636 |    55,554 

             | fail_new_a
             | e_ibd_snom
             |     ed
        drug |         0 |     Total
-------------+-----------+----------
     control |    21,051 |    21,460 
  sotrovimab |     3,977 |     4,065 
    paxlovid |     3,959 |     4,038 
molnupiravir |     4,039 |     4,125 
-------------+-----------+----------
       Total |    33,026 |    33,688 


             | fail_new_a
             | e_ibd_snom
             |     ed
        drug |         1 |     Total
-------------+-----------+----------
     control |       409 |    21,460 
  sotrovimab |        88 |     4,065 
    paxlovid |        79 |     4,038 
molnupiravir |        86 |     4,125 
-------------+-----------+----------
       Total |       662 |    33,688 
new_ae_ra_icd

----------------------------------------
-> drug = control
  13,243
----------------------------------------
-> drug = sotrovimab
  1,603
----------------------------------------
-> drug = paxlovid
  1,555
----------------------------------------
-> drug = molnupiravir
  1,602

----------------------------------------
-> drug = control
  4,316
----------------------------------------
-> drug = sotrovimab
  846
----------------------------------------
-> drug = paxlovid
  828
----------------------------------------
-> drug = molnupiravir
  853

----------------------------------------
-> drug = control
  434
----------------------------------------
-> drug = sotrovimab
  84
----------------------------------------
-> drug = paxlovid
  88
----------------------------------------
-> drug = molnupiravir
  70
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_new_a
             |  e_ra_icd
        drug |         0 |     Total
-------------+-----------+----------
     control |    31,868 |    40,844 
  sotrovimab |     4,055 |     4,890 
    paxlovid |     4,078 |     4,873 
molnupiravir |     4,135 |     4,947 
-------------+-----------+----------
       Total |    44,136 |    55,554 


             | fail_new_a
             |  e_ra_icd
        drug |         1 |     Total
-------------+-----------+----------
     control |     8,976 |    40,844 
  sotrovimab |       835 |     4,890 
    paxlovid |       795 |     4,873 
molnupiravir |       812 |     4,947 
-------------+-----------+----------
       Total |    11,418 |    55,554 

             | fail_new_a
             |  e_ra_icd
        drug |         0 |     Total
-------------+-----------+----------
     control |    21,575 |    21,961 
  sotrovimab |     4,052 |     4,133 
    paxlovid |     4,077 |     4,146 
molnupiravir |     4,134 |     4,198 
-------------+-----------+----------
       Total |    33,838 |    34,438 


             | fail_new_a
             |  e_ra_icd
        drug |         1 |     Total
-------------+-----------+----------
     control |       386 |    21,961 
  sotrovimab |        81 |     4,133 
    paxlovid |        69 |     4,146 
molnupiravir |        64 |     4,198 
-------------+-----------+----------
       Total |       600 |    34,438 
new_ae_sle_icd

----------------------------------------
-> drug = control
  13,144
----------------------------------------
-> drug = sotrovimab
  1,584
----------------------------------------
-> drug = paxlovid
  1,560
----------------------------------------
-> drug = molnupiravir
  1,596

----------------------------------------
-> drug = control
  4,194
----------------------------------------
-> drug = sotrovimab
  891
----------------------------------------
-> drug = paxlovid
  823
----------------------------------------
-> drug = molnupiravir
  875

----------------------------------------
-> drug = control
  420
----------------------------------------
-> drug = sotrovimab
  74
----------------------------------------
-> drug = paxlovid
  78
----------------------------------------
-> drug = molnupiravir
  78
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_new_a
             | e_sle_icd
        drug |         0 |     Total
-------------+-----------+----------
     control |    31,874 |    40,844 
  sotrovimab |     4,129 |     4,890 
    paxlovid |     4,069 |     4,873 
molnupiravir |     4,153 |     4,947 
-------------+-----------+----------
       Total |    44,225 |    55,554 


             | fail_new_a
             | e_sle_icd
        drug |         1 |     Total
-------------+-----------+----------
     control |     8,970 |    40,844 
  sotrovimab |       761 |     4,890 
    paxlovid |       804 |     4,873 
molnupiravir |       794 |     4,947 
-------------+-----------+----------
       Total |    11,329 |    55,554 

             | fail_new_a
             | e_sle_icd
        drug |         0 |     Total
-------------+-----------+----------
     control |    21,464 |    21,848 
  sotrovimab |     4,125 |     4,197 
    paxlovid |     4,066 |     4,136 
molnupiravir |     4,151 |     4,226 
-------------+-----------+----------
       Total |    33,806 |    34,407 


             | fail_new_a
             | e_sle_icd
        drug |         1 |     Total
-------------+-----------+----------
     control |       384 |    21,848 
  sotrovimab |        72 |     4,197 
    paxlovid |        70 |     4,136 
molnupiravir |        75 |     4,226 
-------------+-----------+----------
       Total |       601 |    34,407 
new_ae_ra_ae

----------------------------------------
-> drug = control
  13,387
----------------------------------------
-> drug = sotrovimab
  1,578
----------------------------------------
-> drug = paxlovid
  1,569
----------------------------------------
-> drug = molnupiravir
  1,594

----------------------------------------
-> drug = control
  4,259
----------------------------------------
-> drug = sotrovimab
  850
----------------------------------------
-> drug = paxlovid
  791
----------------------------------------
-> drug = molnupiravir
  886

----------------------------------------
-> drug = control
  403
----------------------------------------
-> drug = sotrovimab
  75
----------------------------------------
-> drug = paxlovid
  76
----------------------------------------
-> drug = molnupiravir
  85
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_new_a
             |  e_ra_ae
        drug |         0 |     Total
-------------+-----------+----------
     control |    31,697 |    40,844 
  sotrovimab |     4,094 |     4,890 
    paxlovid |     4,034 |     4,873 
molnupiravir |     4,169 |     4,947 
-------------+-----------+----------
       Total |    43,994 |    55,554 


             | fail_new_a
             |  e_ra_ae
        drug |         1 |     Total
-------------+-----------+----------
     control |     9,147 |    40,844 
  sotrovimab |       796 |     4,890 
    paxlovid |       839 |     4,873 
molnupiravir |       778 |     4,947 
-------------+-----------+----------
       Total |    11,560 |    55,554 

             | fail_new_a
             |  e_ra_ae
        drug |         0 |     Total
-------------+-----------+----------
     control |    21,451 |    21,832 
  sotrovimab |     4,094 |     4,162 
    paxlovid |     4,029 |     4,095 
molnupiravir |     4,166 |     4,239 
-------------+-----------+----------
       Total |    33,740 |    34,328 


             | fail_new_a
             |  e_ra_ae
        drug |         1 |     Total
-------------+-----------+----------
     control |       381 |    21,832 
  sotrovimab |        68 |     4,162 
    paxlovid |        66 |     4,095 
molnupiravir |        73 |     4,239 
-------------+-----------+----------
       Total |       588 |    34,328 
new_ae_sle_ae

----------------------------------------
-> drug = control
  13,222
----------------------------------------
-> drug = sotrovimab
  1,530
----------------------------------------
-> drug = paxlovid
  1,601
----------------------------------------
-> drug = molnupiravir
  1,573

----------------------------------------
-> drug = control
  4,289
----------------------------------------
-> drug = sotrovimab
  855
----------------------------------------
-> drug = paxlovid
  819
----------------------------------------
-> drug = molnupiravir
  873

----------------------------------------
-> drug = control
  452
----------------------------------------
-> drug = sotrovimab
  66
----------------------------------------
-> drug = paxlovid
  71
----------------------------------------
-> drug = molnupiravir
  81
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_new_a
             |  e_sle_ae
        drug |         0 |     Total
-------------+-----------+----------
     control |    31,840 |    40,844 
  sotrovimab |     4,159 |     4,890 
    paxlovid |     4,030 |     4,873 
molnupiravir |     4,176 |     4,947 
-------------+-----------+----------
       Total |    44,205 |    55,554 


             | fail_new_a
             |  e_sle_ae
        drug |         1 |     Total
-------------+-----------+----------
     control |     9,004 |    40,844 
  sotrovimab |       731 |     4,890 
    paxlovid |       843 |     4,873 
molnupiravir |       771 |     4,947 
-------------+-----------+----------
       Total |    11,349 |    55,554 

             | fail_new_a
             |  e_sle_ae
        drug |         0 |     Total
-------------+-----------+----------
     control |    21,452 |    21,866 
  sotrovimab |     4,154 |     4,215 
    paxlovid |     4,029 |     4,091 
molnupiravir |     4,172 |     4,247 
-------------+-----------+----------
       Total |    33,807 |    34,419 


             | fail_new_a
             |  e_sle_ae
        drug |         1 |     Total
-------------+-----------+----------
     control |       414 |    21,866 
  sotrovimab |        61 |     4,215 
    paxlovid |        62 |     4,091 
molnupiravir |        75 |     4,247 
-------------+-----------+----------
       Total |       612 |    34,419 
new_ae_psoriasis_ae

----------------------------------------
-> drug = control
  14,580
----------------------------------------
-> drug = sotrovimab
  1,735
----------------------------------------
-> drug = paxlovid
  1,791
----------------------------------------
-> drug = molnupiravir
  1,851

----------------------------------------
-> drug = control
  4,711
----------------------------------------
-> drug = sotrovimab
  932
----------------------------------------
-> drug = paxlovid
  970
----------------------------------------
-> drug = molnupiravir
  984

----------------------------------------
-> drug = control
  466
----------------------------------------
-> drug = sotrovimab
  96
----------------------------------------
-> drug = paxlovid
  88
----------------------------------------
-> drug = molnupiravir
  99
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_new_a
             | e_psoriasi
             |    s_ae
        drug |         0 |     Total
-------------+-----------+----------
     control |    30,969 |    40,844 
  sotrovimab |     4,005 |     4,890 
    paxlovid |     3,972 |     4,873 
molnupiravir |     3,994 |     4,947 
-------------+-----------+----------
       Total |    42,940 |    55,554 


             | fail_new_a
             | e_psoriasi
             |    s_ae
        drug |         1 |     Total
-------------+-----------+----------
     control |     9,875 |    40,844 
  sotrovimab |       885 |     4,890 
    paxlovid |       901 |     4,873 
molnupiravir |       953 |     4,947 
-------------+-----------+----------
       Total |    12,614 |    55,554 

             | fail_new_a
             | e_psoriasi
             |    s_ae
        drug |         0 |     Total
-------------+-----------+----------
     control |    21,019 |    21,442 
  sotrovimab |     4,004 |     4,087 
    paxlovid |     3,969 |     4,052 
molnupiravir |     3,991 |     4,080 
-------------+-----------+----------
       Total |    32,983 |    33,661 


             | fail_new_a
             | e_psoriasi
             |    s_ae
        drug |         1 |     Total
-------------+-----------+----------
     control |       423 |    21,442 
  sotrovimab |        83 |     4,087 
    paxlovid |        83 |     4,052 
molnupiravir |        89 |     4,080 
-------------+-----------+----------
       Total |       678 |    33,661 
new_ae_psa_ae

----------------------------------------
-> drug = control
  14,644
----------------------------------------
-> drug = sotrovimab
  1,761
----------------------------------------
-> drug = paxlovid
  1,802
----------------------------------------
-> drug = molnupiravir
  1,761

----------------------------------------
-> drug = control
  4,608
----------------------------------------
-> drug = sotrovimab
  957
----------------------------------------
-> drug = paxlovid
  955
----------------------------------------
-> drug = molnupiravir
  958

----------------------------------------
-> drug = control
  466
----------------------------------------
-> drug = sotrovimab
  94
----------------------------------------
-> drug = paxlovid
  80
----------------------------------------
-> drug = molnupiravir
  82
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_new_a
             |  e_psa_ae
        drug |         0 |     Total
-------------+-----------+----------
     control |    30,732 |    40,844 
  sotrovimab |     4,001 |     4,890 
    paxlovid |     3,953 |     4,873 
molnupiravir |     4,077 |     4,947 
-------------+-----------+----------
       Total |    42,763 |    55,554 


             | fail_new_a
             |  e_psa_ae
        drug |         1 |     Total
-------------+-----------+----------
     control |    10,112 |    40,844 
  sotrovimab |       889 |     4,890 
    paxlovid |       920 |     4,873 
molnupiravir |       870 |     4,947 
-------------+-----------+----------
       Total |    12,791 |    55,554 

             | fail_new_a
             |  e_psa_ae
        drug |         0 |     Total
-------------+-----------+----------
     control |    20,907 |    21,350 
  sotrovimab |     3,996 |     4,086 
    paxlovid |     3,950 |     4,026 
molnupiravir |     4,072 |     4,144 
-------------+-----------+----------
       Total |    32,925 |    33,606 


             | fail_new_a
             |  e_psa_ae
        drug |         1 |     Total
-------------+-----------+----------
     control |       443 |    21,350 
  sotrovimab |        90 |     4,086 
    paxlovid |        76 |     4,026 
molnupiravir |        72 |     4,144 
-------------+-----------+----------
       Total |       681 |    33,606 
new_ae_ankspon_ae

----------------------------------------
-> drug = control
  14,609
----------------------------------------
-> drug = sotrovimab
  1,782
----------------------------------------
-> drug = paxlovid
  1,781
----------------------------------------
-> drug = molnupiravir
  1,768

----------------------------------------
-> drug = control
  4,625
----------------------------------------
-> drug = sotrovimab
  936
----------------------------------------
-> drug = paxlovid
  926
----------------------------------------
-> drug = molnupiravir
  964

----------------------------------------
-> drug = control
  440
----------------------------------------
-> drug = sotrovimab
  60
----------------------------------------
-> drug = paxlovid
  82
----------------------------------------
-> drug = molnupiravir
  72
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_new_a
             | e_ankspon_
             |     ae
        drug |         0 |     Total
-------------+-----------+----------
     control |    30,848 |    40,844 
  sotrovimab |     3,990 |     4,890 
    paxlovid |     3,947 |     4,873 
molnupiravir |     4,078 |     4,947 
-------------+-----------+----------
       Total |    42,863 |    55,554 


             | fail_new_a
             | e_ankspon_
             |     ae
        drug |         1 |     Total
-------------+-----------+----------
     control |     9,996 |    40,844 
  sotrovimab |       900 |     4,890 
    paxlovid |       926 |     4,873 
molnupiravir |       869 |     4,947 
-------------+-----------+----------
       Total |    12,691 |    55,554 

             | fail_new_a
             | e_ankspon_
             |     ae
        drug |         0 |     Total
-------------+-----------+----------
     control |    20,977 |    21,393 
  sotrovimab |     3,987 |     4,044 
    paxlovid |     3,944 |     4,018 
molnupiravir |     4,075 |     4,143 
-------------+-----------+----------
       Total |    32,983 |    33,598 


             | fail_new_a
             | e_ankspon_
             |     ae
        drug |         1 |     Total
-------------+-----------+----------
     control |       416 |    21,393 
  sotrovimab |        57 |     4,044 
    paxlovid |        74 |     4,018 
molnupiravir |        68 |     4,143 
-------------+-----------+----------
       Total |       615 |    33,598 
new_ae_ibd_ae

----------------------------------------
-> drug = control
  14,794
----------------------------------------
-> drug = sotrovimab
  1,697
----------------------------------------
-> drug = paxlovid
  1,774
----------------------------------------
-> drug = molnupiravir
  1,796

----------------------------------------
-> drug = control
  4,753
----------------------------------------
-> drug = sotrovimab
  947
----------------------------------------
-> drug = paxlovid
  948
----------------------------------------
-> drug = molnupiravir
  988

----------------------------------------
-> drug = control
  466
----------------------------------------
-> drug = sotrovimab
  86
----------------------------------------
-> drug = paxlovid
  81
----------------------------------------
-> drug = molnupiravir
  81
(50,664 missing values generated)
(4,873 real changes made)
(4,947 real changes made)
(40,844 real changes made)

             | fail_new_a
             |  e_ibd_ae
        drug |         0 |     Total
-------------+-----------+----------
     control |    30,778 |    40,844 
  sotrovimab |     4,064 |     4,890 
    paxlovid |     3,970 |     4,873 
molnupiravir |     4,072 |     4,947 
-------------+-----------+----------
       Total |    42,884 |    55,554 


             | fail_new_a
             |  e_ibd_ae
        drug |         1 |     Total
-------------+-----------+----------
     control |    10,066 |    40,844 
  sotrovimab |       826 |     4,890 
    paxlovid |       903 |     4,873 
molnupiravir |       875 |     4,947 
-------------+-----------+----------
       Total |    12,670 |    55,554 

             | fail_new_a
             |  e_ibd_ae
        drug |         0 |     Total
-------------+-----------+----------
     control |    20,963 |    21,403 
  sotrovimab |     4,062 |     4,140 
    paxlovid |     3,967 |     4,047 
molnupiravir |     4,067 |     4,139 
-------------+-----------+----------
       Total |    33,059 |    33,729 


             | fail_new_a
             |  e_ibd_ae
        drug |         1 |     Total
-------------+-----------+----------
     control |       440 |    21,403 
  sotrovimab |        78 |     4,140 
    paxlovid |        80 |     4,047 
molnupiravir |        72 |     4,139 
-------------+-----------+----------
       Total |       670 |    33,729 

. 
. * Add half-day buffer if outcome on in
> dexdate
. foreach x in    $ae $ae_spc $ae_spc_ic
> d $ae_spc_emerg ///
>                                 $ae_dr
> ug $ae_drug_icd $ae_drug_emerg ///
>                                 $ae_im
> ae $ae_imae_icd $ae_imae_emerg ///
>                                 {
  2.         display "`x'"
  3.         replace `x'=`x'+0.5 if `x'=
> =start_date
  4. }
ae_spc_all
(76 real changes made)
ae_drug_all
(69 real changes made)
ae_imae_all
(77 real changes made)
ae_all
(71 real changes made)
allcause_emerg_aande
(3 real changes made)
covid_hosp_date
(4 real changes made)
all_hosp_date
(7 real changes made)
died_date_ons
(22 real changes made)
ae_diverticulitis_snomed
(27 real changes made)
ae_diarrhoea_snomed
(21 real changes made)
ae_taste_snomed
(23 real changes made)
ae_diverticulitis_icd
(36 real changes made)
ae_taste_icd
(33 real changes made)
ae_diverticulitis_ae
(31 real changes made)
ae_anaphylaxis_snomed
(22 real changes made)
ae_rash_snomed
(30 real changes made)
ae_anaphylaxis_icd
(29 real changes made)
ae_anaphlaxis_ae
(34 real changes made)
ae_drugreact_ae
(37 real changes made)
ae_allergic_ae
(29 real changes made)
new_ae_ra_snomed
(32 real changes made)
new_ae_sle_ctv
(25 real changes made)
new_ae_psoriasis_snomed
(25 real changes made)
new_ae_psa_snomed
(21 real changes made)
new_ae_ankspon_ctv
(30 real changes made)
new_ae_ibd_snomed
(31 real changes made)
new_ae_ra_icd
(33 real changes made)
new_ae_sle_icd
(34 real changes made)
new_ae_ra_ae
(17 real changes made)
new_ae_sle_ae
(22 real changes made)
new_ae_psoriasis_ae
(36 real changes made)
new_ae_psa_ae
(22 real changes made)
new_ae_ankspon_ae
(24 real changes made)
new_ae_ibd_ae
(19 real changes made)

. 
. *Generate censor date
. foreach x in    $ae $ae_spc $ae_spc_ic
> d $ae_spc_emerg ///
>                                 $ae_dr
> ug $ae_drug_icd $ae_drug_emerg ///
>                                 $ae_im
> ae $ae_imae_icd $ae_imae_emerg ///
>                                 {
  2.         gen stop_`x'=`x' if fail_`x
> '==1
  3.         replace stop_`x'=min(death_
> date,dereg_date,study_end_date,start_d
> ate_29,paxlovid,molnupiravir) if fail_
> `x'==0&drug==1
  4.         replace stop_`x'=min(death_
> date,dereg_date,study_end_date,start_d
> ate_29,sotrovimab,molnupiravir) if fai
> l_`x'==0&drug==2
  5.         replace stop_`x'=min(death_
> date,dereg_date,study_end_date,start_d
> ate_29,sotrovimab,paxlovid) if fail_`x
> '==0&drug==3
  6.         replace stop_`x'=min(death_
> date,dereg_date,study_end_date,start_d
> ate_29,sotrovimab,paxlovid,molnupiravi
> r) if fail_`x'==0&drug==0
  7.         format %td stop_`x'
  8. }
(13,947 missing values generated)
(1,721 real changes made)
(1,597 real changes made)
(1,685 real changes made)
(8,944 real changes made)
(13,884 missing values generated)
(1,669 real changes made)
(1,579 real changes made)
(1,677 real changes made)
(8,959 real changes made)
(6,896 missing values generated)
(925 real changes made)
(885 real changes made)
(874 real changes made)
(4,212 real changes made)
(2,776 missing values generated)
(379 real changes made)
(336 real changes made)
(355 real changes made)
(1,706 real changes made)
(53,964 missing values generated)
(4,781 real changes made)
(4,766 real changes made)
(4,845 real changes made)
(39,572 real changes made)
(52,231 missing values generated)
(4,674 real changes made)
(4,670 real changes made)
(4,701 real changes made)
(38,186 real changes made)
(52,324 missing values generated)
(4,671 real changes made)
(4,667 real changes made)
(4,707 real changes made)
(38,279 real changes made)
(29,683 missing values generated)
(2,815 real changes made)
(2,868 real changes made)
(2,859 real changes made)
(21,141 real changes made)
(41,423 missing values generated)
(3,930 real changes made)
(3,917 real changes made)
(3,978 real changes made)
(29,598 real changes made)
(41,497 missing values generated)
(3,882 real changes made)
(3,857 real changes made)
(3,957 real changes made)
(29,801 real changes made)
(41,528 missing values generated)
(3,926 real changes made)
(3,861 real changes made)
(3,963 real changes made)
(29,778 real changes made)
(41,279 missing values generated)
(3,910 real changes made)
(3,892 real changes made)
(3,929 real changes made)
(29,548 real changes made)
(41,452 missing values generated)
(3,946 real changes made)
(3,873 real changes made)
(3,960 real changes made)
(29,673 real changes made)
(41,477 missing values generated)
(3,951 real changes made)
(3,863 real changes made)
(4,005 real changes made)
(29,658 real changes made)
(41,551 missing values generated)
(3,884 real changes made)
(3,882 real changes made)
(3,935 real changes made)
(29,850 real changes made)
(41,482 missing values generated)
(3,907 real changes made)
(3,857 real changes made)
(3,944 real changes made)
(29,774 real changes made)
(41,310 missing values generated)
(3,868 real changes made)
(3,861 real changes made)
(3,959 real changes made)
(29,622 real changes made)
(41,573 missing values generated)
(3,953 real changes made)
(3,872 real changes made)
(3,921 real changes made)
(29,827 real changes made)
(41,466 missing values generated)
(3,912 real changes made)
(3,854 real changes made)
(3,947 real changes made)
(29,753 real changes made)
(41,443 missing values generated)
(3,959 real changes made)
(3,872 real changes made)
(3,959 real changes made)
(29,653 real changes made)
(44,106 missing values generated)
(4,087 real changes made)
(4,083 real changes made)
(4,121 real changes made)
(31,815 real changes made)
(44,048 missing values generated)
(4,106 real changes made)
(4,075 real changes made)
(4,103 real changes made)
(31,764 real changes made)
(42,831 missing values generated)
(3,973 real changes made)
(3,997 real changes made)
(4,029 real changes made)
(30,832 real changes made)
(42,890 missing values generated)
(4,023 real changes made)
(3,987 real changes made)
(4,026 real changes made)
(30,854 real changes made)
(42,878 missing values generated)
(3,987 real changes made)
(4,002 real changes made)
(4,057 real changes made)
(30,832 real changes made)
(42,918 missing values generated)
(3,980 real changes made)
(3,963 real changes made)
(4,044 real changes made)
(30,931 real changes made)
(44,136 missing values generated)
(4,055 real changes made)
(4,078 real changes made)
(4,135 real changes made)
(31,868 real changes made)
(44,225 missing values generated)
(4,129 real changes made)
(4,069 real changes made)
(4,153 real changes made)
(31,874 real changes made)
(43,994 missing values generated)
(4,094 real changes made)
(4,034 real changes made)
(4,169 real changes made)
(31,697 real changes made)
(44,205 missing values generated)
(4,159 real changes made)
(4,030 real changes made)
(4,176 real changes made)
(31,840 real changes made)
(42,940 missing values generated)
(4,005 real changes made)
(3,972 real changes made)
(3,994 real changes made)
(30,969 real changes made)
(42,763 missing values generated)
(4,001 real changes made)
(3,953 real changes made)
(4,077 real changes made)
(30,732 real changes made)
(42,863 missing values generated)
(3,990 real changes made)
(3,947 real changes made)
(4,078 real changes made)
(30,848 real changes made)
(42,884 missing values generated)
(4,064 real changes made)
(3,970 real changes made)
(4,072 real changes made)
(30,778 real changes made)

. 
. * Follow-up time
. stset stop_ae_all, id(patient_id) orig
> in(time start_date) enter(time start_d
> ate) failure(fail_ae_all==1) 

Survival-time data settings

           ID variable: patient_id
         Failure event: fail_ae_all==1
Observed time interval: (stop_ae_all[_n-
> 1], stop_ae_all]
     Enter on or after: time start_date
     Exit on or before: failure
     Time for analysis: (time-origin)
                Origin: time start_date

----------------------------------------
> ----------------------------------
     55,554  total observations
     14,775  ignored because never enter
> ed
     36,107  observations end on or befo
> re enter()
----------------------------------------
> ----------------------------------
      4,672  observations remaining, rep
> resenting
      4,672  subjects
      1,908  failures in single-failure-
> per-subject data
  104,134.5  total analysis time at risk
>  and under observation
                                        
>         At risk from t =         0
                                     Ear
> liest observed entry t =         0
                                        
>   Last observed exit t =        29

. *count censored due to second therapy*
. count if fail_ae_all==0&drug==1&min(pa
> xlovid,molnupiravir)==stop_ae_all
  5

. count if fail_ae_all==0&drug==2&min(so
> trovimab,molnupiravir)==stop_ae_all
  8

. count if fail_ae_all==0&drug==3&min(so
> trovimab,paxlovid,remdesivir,casirivim
> ab)==stop_ae_all
  6

. count if fail_ae_all==0&drug==0&min(so
> trovimab,paxlovid,molnupiravir)==stop_
> ae_all
  0

. tab _st  // keep if _st==1 -> removes 
> observations that end on or before ent
> er -> should be 0 in actual dataset

1 if record |
   is to be |
    used; 0 |
  otherwise |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
          0 |     50,882       91.59    
>    91.59
          1 |      4,672        8.41    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00

. tab _t,m

   Analysis |
  time when |
record ends |      Freq.     Percent    
>     Cum.
------------+---------------------------
> --------
         .5 |         71        0.13    
>     0.13
          1 |         79        0.14    
>     0.27
          2 |         77        0.14    
>     0.41
          3 |         87        0.16    
>     0.57
          4 |         86        0.15    
>     0.72
          5 |         99        0.18    
>     0.90
          6 |         82        0.15    
>     1.05
          7 |         73        0.13    
>     1.18
          8 |         63        0.11    
>     1.29
          9 |         84        0.15    
>     1.44
         10 |         68        0.12    
>     1.56
         11 |         61        0.11    
>     1.67
         12 |         70        0.13    
>     1.80
         13 |         62        0.11    
>     1.91
         14 |         73        0.13    
>     2.04
         15 |         54        0.10    
>     2.14
         16 |         62        0.11    
>     2.25
         17 |         65        0.12    
>     2.37
         18 |         71        0.13    
>     2.50
         19 |         58        0.10    
>     2.60
         20 |         56        0.10    
>     2.70
         21 |         50        0.09    
>     2.79
         22 |         45        0.08    
>     2.87
         23 |         65        0.12    
>     2.99
         24 |         53        0.10    
>     3.09
         25 |         61        0.11    
>     3.20
         26 |         40        0.07    
>     3.27
         27 |         49        0.09    
>     3.36
         28 |         50        0.09    
>     3.45
         29 |      2,758        4.96    
>     8.41
          . |     50,882       91.59    
>   100.00
------------+---------------------------
> --------
      Total |     55,554      100.00

. tab _t drug,m col

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

  Analysis |
 time when |
    record |    drug
      ends |   control |     Total
-----------+-----------+----------
        .5 |        34 |        71 
           |      0.08 |      0.13 
-----------+-----------+----------
         1 |        50 |        79 
           |      0.12 |      0.14 
-----------+-----------+----------
         2 |        51 |        77 
           |      0.12 |      0.14 
-----------+-----------+----------
         3 |        60 |        87 
           |      0.15 |      0.16 
-----------+-----------+----------
         4 |        56 |        86 
           |      0.14 |      0.15 
-----------+-----------+----------
         5 |        67 |        99 
           |      0.16 |      0.18 
-----------+-----------+----------
         6 |        43 |        82 
           |      0.11 |      0.15 
-----------+-----------+----------
         7 |        41 |        73 
           |      0.10 |      0.13 
-----------+-----------+----------
         8 |        38 |        63 
           |      0.09 |      0.11 
-----------+-----------+----------
         9 |        47 |        84 
           |      0.12 |      0.15 
-----------+-----------+----------
        10 |        34 |        68 
           |      0.08 |      0.12 
-----------+-----------+----------
        11 |        39 |        61 
           |      0.10 |      0.11 
-----------+-----------+----------
        12 |        39 |        70 
           |      0.10 |      0.13 
-----------+-----------+----------
        13 |        34 |        62 
           |      0.08 |      0.11 
-----------+-----------+----------
        14 |        46 |        73 
           |      0.11 |      0.13 
-----------+-----------+----------
        15 |        28 |        54 
           |      0.07 |      0.10 
-----------+-----------+----------
        16 |        36 |        62 
           |      0.09 |      0.11 
-----------+-----------+----------
        17 |        39 |        65 
           |      0.10 |      0.12 
-----------+-----------+----------
        18 |        46 |        71 
           |      0.11 |      0.13 
-----------+-----------+----------
        19 |        38 |        58 
           |      0.09 |      0.10 
-----------+-----------+----------
        20 |        32 |        56 
           |      0.08 |      0.10 
-----------+-----------+----------
        21 |        28 |        50 
           |      0.07 |      0.09 
-----------+-----------+----------
        22 |        24 |        45 
           |      0.06 |      0.08 
-----------+-----------+----------
        23 |        38 |        65 
           |      0.09 |      0.12 
-----------+-----------+----------
        24 |        35 |        53 
           |      0.09 |      0.10 
-----------+-----------+----------
        25 |        37 |        61 
           |      0.09 |      0.11 
-----------+-----------+----------
        26 |        23 |        40 
           |      0.06 |      0.07 
-----------+-----------+----------
        27 |        31 |        49 
           |      0.08 |      0.09 
-----------+-----------+----------
        28 |        30 |        50 
           |      0.07 |      0.09 
-----------+-----------+----------
        29 |     1,699 |     2,758 
           |      4.16 |      4.96 
-----------+-----------+----------
         . |    38,001 |    50,882 
           |     93.04 |     91.59 
-----------+-----------+----------
     Total |    40,844 |    55,554 
           |    100.00 |    100.00 


  Analysis |
 time when |
    record |    drug
      ends | sotrovima |     Total
-----------+-----------+----------
        .5 |        13 |        71 
           |      0.27 |      0.13 
-----------+-----------+----------
         1 |         7 |        79 
           |      0.14 |      0.14 
-----------+-----------+----------
         2 |         8 |        77 
           |      0.16 |      0.14 
-----------+-----------+----------
         3 |        12 |        87 
           |      0.25 |      0.16 
-----------+-----------+----------
         4 |         9 |        86 
           |      0.18 |      0.15 
-----------+-----------+----------
         5 |        11 |        99 
           |      0.22 |      0.18 
-----------+-----------+----------
         6 |        14 |        82 
           |      0.29 |      0.15 
-----------+-----------+----------
         7 |        15 |        73 
           |      0.31 |      0.13 
-----------+-----------+----------
         8 |        12 |        63 
           |      0.25 |      0.11 
-----------+-----------+----------
         9 |        16 |        84 
           |      0.33 |      0.15 
-----------+-----------+----------
        10 |        13 |        68 
           |      0.27 |      0.12 
-----------+-----------+----------
        11 |         7 |        61 
           |      0.14 |      0.11 
-----------+-----------+----------
        12 |        12 |        70 
           |      0.25 |      0.13 
-----------+-----------+----------
        13 |         5 |        62 
           |      0.10 |      0.11 
-----------+-----------+----------
        14 |        13 |        73 
           |      0.27 |      0.13 
-----------+-----------+----------
        15 |        12 |        54 
           |      0.25 |      0.10 
-----------+-----------+----------
        16 |         4 |        62 
           |      0.08 |      0.11 
-----------+-----------+----------
        17 |         6 |        65 
           |      0.12 |      0.12 
-----------+-----------+----------
        18 |        11 |        71 
           |      0.22 |      0.13 
-----------+-----------+----------
        19 |         6 |        58 
           |      0.12 |      0.10 
-----------+-----------+----------
        20 |        10 |        56 
           |      0.20 |      0.10 
-----------+-----------+----------
        21 |         6 |        50 
           |      0.12 |      0.09 
-----------+-----------+----------
        22 |         8 |        45 
           |      0.16 |      0.08 
-----------+-----------+----------
        23 |         9 |        65 
           |      0.18 |      0.12 
-----------+-----------+----------
        24 |         9 |        53 
           |      0.18 |      0.10 
-----------+-----------+----------
        25 |         6 |        61 
           |      0.12 |      0.11 
-----------+-----------+----------
        26 |         6 |        40 
           |      0.12 |      0.07 
-----------+-----------+----------
        27 |         7 |        49 
           |      0.14 |      0.09 
-----------+-----------+----------
        28 |         5 |        50 
           |      0.10 |      0.09 
-----------+-----------+----------
        29 |       374 |     2,758 
           |      7.65 |      4.96 
-----------+-----------+----------
         . |     4,244 |    50,882 
           |     86.79 |     91.59 
-----------+-----------+----------
     Total |     4,890 |    55,554 
           |    100.00 |    100.00 


  Analysis |
 time when |
    record |    drug
      ends |  paxlovid |     Total
-----------+-----------+----------
        .5 |         9 |        71 
           |      0.18 |      0.13 
-----------+-----------+----------
         1 |         9 |        79 
           |      0.18 |      0.14 
-----------+-----------+----------
         2 |         6 |        77 
           |      0.12 |      0.14 
-----------+-----------+----------
         3 |         8 |        87 
           |      0.16 |      0.16 
-----------+-----------+----------
         4 |         9 |        86 
           |      0.18 |      0.15 
-----------+-----------+----------
         5 |        11 |        99 
           |      0.23 |      0.18 
-----------+-----------+----------
         6 |        12 |        82 
           |      0.25 |      0.15 
-----------+-----------+----------
         7 |         9 |        73 
           |      0.18 |      0.13 
-----------+-----------+----------
         8 |         8 |        63 
           |      0.16 |      0.11 
-----------+-----------+----------
         9 |        11 |        84 
           |      0.23 |      0.15 
-----------+-----------+----------
        10 |         9 |        68 
           |      0.18 |      0.12 
-----------+-----------+----------
        11 |         8 |        61 
           |      0.16 |      0.11 
-----------+-----------+----------
        12 |        10 |        70 
           |      0.21 |      0.13 
-----------+-----------+----------
        13 |        14 |        62 
           |      0.29 |      0.11 
-----------+-----------+----------
        14 |         7 |        73 
           |      0.14 |      0.13 
-----------+-----------+----------
        15 |         5 |        54 
           |      0.10 |      0.10 
-----------+-----------+----------
        16 |        13 |        62 
           |      0.27 |      0.11 
-----------+-----------+----------
        17 |        10 |        65 
           |      0.21 |      0.12 
-----------+-----------+----------
        18 |         6 |        71 
           |      0.12 |      0.13 
-----------+-----------+----------
        19 |         5 |        58 
           |      0.10 |      0.10 
-----------+-----------+----------
        20 |        10 |        56 
           |      0.21 |      0.10 
-----------+-----------+----------
        21 |        11 |        50 
           |      0.23 |      0.09 
-----------+-----------+----------
        22 |         9 |        45 
           |      0.18 |      0.08 
-----------+-----------+----------
        23 |         6 |        65 
           |      0.12 |      0.12 
-----------+-----------+----------
        24 |         4 |        53 
           |      0.08 |      0.10 
-----------+-----------+----------
        25 |        11 |        61 
           |      0.23 |      0.11 
-----------+-----------+----------
        26 |         8 |        40 
           |      0.16 |      0.07 
-----------+-----------+----------
        27 |         6 |        49 
           |      0.12 |      0.09 
-----------+-----------+----------
        28 |         7 |        50 
           |      0.14 |      0.09 
-----------+-----------+----------
        29 |       330 |     2,758 
           |      6.77 |      4.96 
-----------+-----------+----------
         . |     4,292 |    50,882 
           |     88.08 |     91.59 
-----------+-----------+----------
     Total |     4,873 |    55,554 
           |    100.00 |    100.00 


  Analysis |
 time when |
    record |    drug
      ends | molnupira |     Total
-----------+-----------+----------
        .5 |        15 |        71 
           |      0.30 |      0.13 
-----------+-----------+----------
         1 |        13 |        79 
           |      0.26 |      0.14 
-----------+-----------+----------
         2 |        12 |        77 
           |      0.24 |      0.14 
-----------+-----------+----------
         3 |         7 |        87 
           |      0.14 |      0.16 
-----------+-----------+----------
         4 |        12 |        86 
           |      0.24 |      0.15 
-----------+-----------+----------
         5 |        10 |        99 
           |      0.20 |      0.18 
-----------+-----------+----------
         6 |        13 |        82 
           |      0.26 |      0.15 
-----------+-----------+----------
         7 |         8 |        73 
           |      0.16 |      0.13 
-----------+-----------+----------
         8 |         5 |        63 
           |      0.10 |      0.11 
-----------+-----------+----------
         9 |        10 |        84 
           |      0.20 |      0.15 
-----------+-----------+----------
        10 |        12 |        68 
           |      0.24 |      0.12 
-----------+-----------+----------
        11 |         7 |        61 
           |      0.14 |      0.11 
-----------+-----------+----------
        12 |         9 |        70 
           |      0.18 |      0.13 
-----------+-----------+----------
        13 |         9 |        62 
           |      0.18 |      0.11 
-----------+-----------+----------
        14 |         7 |        73 
           |      0.14 |      0.13 
-----------+-----------+----------
        15 |         9 |        54 
           |      0.18 |      0.10 
-----------+-----------+----------
        16 |         9 |        62 
           |      0.18 |      0.11 
-----------+-----------+----------
        17 |        10 |        65 
           |      0.20 |      0.12 
-----------+-----------+----------
        18 |         8 |        71 
           |      0.16 |      0.13 
-----------+-----------+----------
        19 |         9 |        58 
           |      0.18 |      0.10 
-----------+-----------+----------
        20 |         4 |        56 
           |      0.08 |      0.10 
-----------+-----------+----------
        21 |         5 |        50 
           |      0.10 |      0.09 
-----------+-----------+----------
        22 |         4 |        45 
           |      0.08 |      0.08 
-----------+-----------+----------
        23 |        12 |        65 
           |      0.24 |      0.12 
-----------+-----------+----------
        24 |         5 |        53 
           |      0.10 |      0.10 
-----------+-----------+----------
        25 |         7 |        61 
           |      0.14 |      0.11 
-----------+-----------+----------
        26 |         3 |        40 
           |      0.06 |      0.07 
-----------+-----------+----------
        27 |         5 |        49 
           |      0.10 |      0.09 
-----------+-----------+----------
        28 |         8 |        50 
           |      0.16 |      0.09 
-----------+-----------+----------
        29 |       355 |     2,758 
           |      7.18 |      4.96 
-----------+-----------+----------
         . |     4,345 |    50,882 
           |     87.83 |     91.59 
-----------+-----------+----------
     Total |     4,947 |    55,554 
           |    100.00 |    100.00 

. tab _t drug if fail_ae_all==1,m col

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

  Analysis |
 time when |
    record |    drug
      ends |   control |     Total
-----------+-----------+----------
        .5 |        34 |        71 
           |      0.09 |      0.13 
-----------+-----------+----------
         1 |        39 |        68 
           |      0.10 |      0.13 
-----------+-----------+----------
         2 |        48 |        73 
           |      0.12 |      0.14 
-----------+-----------+----------
         3 |        54 |        80 
           |      0.14 |      0.15 
-----------+-----------+----------
         4 |        47 |        76 
           |      0.12 |      0.14 
-----------+-----------+----------
         5 |        64 |        92 
           |      0.16 |      0.17 
-----------+-----------+----------
         6 |        39 |        78 
           |      0.10 |      0.15 
-----------+-----------+----------
         7 |        37 |        67 
           |      0.09 |      0.13 
-----------+-----------+----------
         8 |        38 |        63 
           |      0.10 |      0.12 
-----------+-----------+----------
         9 |        47 |        84 
           |      0.12 |      0.16 
-----------+-----------+----------
        10 |        34 |        68 
           |      0.09 |      0.13 
-----------+-----------+----------
        11 |        39 |        61 
           |      0.10 |      0.12 
-----------+-----------+----------
        12 |        39 |        69 
           |      0.10 |      0.13 
-----------+-----------+----------
        13 |        34 |        62 
           |      0.09 |      0.12 
-----------+-----------+----------
        14 |        46 |        73 
           |      0.12 |      0.14 
-----------+-----------+----------
        15 |        28 |        52 
           |      0.07 |      0.10 
-----------+-----------+----------
        16 |        36 |        61 
           |      0.09 |      0.12 
-----------+-----------+----------
        17 |        39 |        64 
           |      0.10 |      0.12 
-----------+-----------+----------
        18 |        46 |        71 
           |      0.12 |      0.13 
-----------+-----------+----------
        19 |        38 |        57 
           |      0.10 |      0.11 
-----------+-----------+----------
        20 |        32 |        55 
           |      0.08 |      0.10 
-----------+-----------+----------
        21 |        28 |        50 
           |      0.07 |      0.09 
-----------+-----------+----------
        22 |        24 |        45 
           |      0.06 |      0.09 
-----------+-----------+----------
        23 |        38 |        65 
           |      0.10 |      0.12 
-----------+-----------+----------
        24 |        35 |        53 
           |      0.09 |      0.10 
-----------+-----------+----------
        25 |        37 |        60 
           |      0.09 |      0.11 
-----------+-----------+----------
        26 |        23 |        40 
           |      0.06 |      0.08 
-----------+-----------+----------
        27 |        31 |        48 
           |      0.08 |      0.09 
-----------+-----------+----------
        28 |        30 |        50 
           |      0.08 |      0.09 
-----------+-----------+----------
        29 |        37 |        52 
           |      0.09 |      0.10 
-----------+-----------+----------
         . |    37,997 |    50,870 
           |     97.08 |     96.38 
-----------+-----------+----------
     Total |    39,138 |    52,778 
           |    100.00 |    100.00 


  Analysis |
 time when |
    record |    drug
      ends | sotrovima |     Total
-----------+-----------+----------
        .5 |        13 |        71 
           |      0.29 |      0.13 
-----------+-----------+----------
         1 |         7 |        68 
           |      0.16 |      0.13 
-----------+-----------+----------
         2 |         8 |        73 
           |      0.18 |      0.14 
-----------+-----------+----------
         3 |        12 |        80 
           |      0.27 |      0.15 
-----------+-----------+----------
         4 |         9 |        76 
           |      0.20 |      0.14 
-----------+-----------+----------
         5 |         8 |        92 
           |      0.18 |      0.17 
-----------+-----------+----------
         6 |        14 |        78 
           |      0.31 |      0.15 
-----------+-----------+----------
         7 |        15 |        67 
           |      0.33 |      0.13 
-----------+-----------+----------
         8 |        12 |        63 
           |      0.27 |      0.12 
-----------+-----------+----------
         9 |        16 |        84 
           |      0.35 |      0.16 
-----------+-----------+----------
        10 |        13 |        68 
           |      0.29 |      0.13 
-----------+-----------+----------
        11 |         7 |        61 
           |      0.16 |      0.12 
-----------+-----------+----------
        12 |        12 |        69 
           |      0.27 |      0.13 
-----------+-----------+----------
        13 |         5 |        62 
           |      0.11 |      0.12 
-----------+-----------+----------
        14 |        13 |        73 
           |      0.29 |      0.14 
-----------+-----------+----------
        15 |        11 |        52 
           |      0.24 |      0.10 
-----------+-----------+----------
        16 |         4 |        61 
           |      0.09 |      0.12 
-----------+-----------+----------
        17 |         6 |        64 
           |      0.13 |      0.12 
-----------+-----------+----------
        18 |        11 |        71 
           |      0.24 |      0.13 
-----------+-----------+----------
        19 |         5 |        57 
           |      0.11 |      0.11 
-----------+-----------+----------
        20 |        10 |        55 
           |      0.22 |      0.10 
-----------+-----------+----------
        21 |         6 |        50 
           |      0.13 |      0.09 
-----------+-----------+----------
        22 |         8 |        45 
           |      0.18 |      0.09 
-----------+-----------+----------
        23 |         9 |        65 
           |      0.20 |      0.12 
-----------+-----------+----------
        24 |         9 |        53 
           |      0.20 |      0.10 
-----------+-----------+----------
        25 |         6 |        60 
           |      0.13 |      0.11 
-----------+-----------+----------
        26 |         6 |        40 
           |      0.13 |      0.08 
-----------+-----------+----------
        27 |         7 |        48 
           |      0.16 |      0.09 
-----------+-----------+----------
        28 |         5 |        50 
           |      0.11 |      0.09 
-----------+-----------+----------
        29 |         3 |        52 
           |      0.07 |      0.10 
-----------+-----------+----------
         . |     4,241 |    50,870 
           |     94.01 |     96.38 
-----------+-----------+----------
     Total |     4,511 |    52,778 
           |    100.00 |    100.00 


  Analysis |
 time when |
    record |    drug
      ends |  paxlovid |     Total
-----------+-----------+----------
        .5 |         9 |        71 
           |      0.20 |      0.13 
-----------+-----------+----------
         1 |         9 |        68 
           |      0.20 |      0.13 
-----------+-----------+----------
         2 |         6 |        73 
           |      0.13 |      0.14 
-----------+-----------+----------
         3 |         8 |        80 
           |      0.18 |      0.15 
-----------+-----------+----------
         4 |         8 |        76 
           |      0.18 |      0.14 
-----------+-----------+----------
         5 |        11 |        92 
           |      0.24 |      0.17 
-----------+-----------+----------
         6 |        12 |        78 
           |      0.26 |      0.15 
-----------+-----------+----------
         7 |         8 |        67 
           |      0.18 |      0.13 
-----------+-----------+----------
         8 |         8 |        63 
           |      0.18 |      0.12 
-----------+-----------+----------
         9 |        11 |        84 
           |      0.24 |      0.16 
-----------+-----------+----------
        10 |         9 |        68 
           |      0.20 |      0.13 
-----------+-----------+----------
        11 |         8 |        61 
           |      0.18 |      0.12 
-----------+-----------+----------
        12 |         9 |        69 
           |      0.20 |      0.13 
-----------+-----------+----------
        13 |        14 |        62 
           |      0.31 |      0.12 
-----------+-----------+----------
        14 |         7 |        73 
           |      0.15 |      0.14 
-----------+-----------+----------
        15 |         4 |        52 
           |      0.09 |      0.10 
-----------+-----------+----------
        16 |        13 |        61 
           |      0.29 |      0.12 
-----------+-----------+----------
        17 |         9 |        64 
           |      0.20 |      0.12 
-----------+-----------+----------
        18 |         6 |        71 
           |      0.13 |      0.13 
-----------+-----------+----------
        19 |         5 |        57 
           |      0.11 |      0.11 
-----------+-----------+----------
        20 |         9 |        55 
           |      0.20 |      0.10 
-----------+-----------+----------
        21 |        11 |        50 
           |      0.24 |      0.09 
-----------+-----------+----------
        22 |         9 |        45 
           |      0.20 |      0.09 
-----------+-----------+----------
        23 |         6 |        65 
           |      0.13 |      0.12 
-----------+-----------+----------
        24 |         4 |        53 
           |      0.09 |      0.10 
-----------+-----------+----------
        25 |        10 |        60 
           |      0.22 |      0.11 
-----------+-----------+----------
        26 |         8 |        40 
           |      0.18 |      0.08 
-----------+-----------+----------
        27 |         5 |        48 
           |      0.11 |      0.09 
-----------+-----------+----------
        28 |         7 |        50 
           |      0.15 |      0.09 
-----------+-----------+----------
        29 |         4 |        52 
           |      0.09 |      0.10 
-----------+-----------+----------
         . |     4,290 |    50,870 
           |     94.56 |     96.38 
-----------+-----------+----------
     Total |     4,537 |    52,778 
           |    100.00 |    100.00 


  Analysis |
 time when |
    record |    drug
      ends | molnupira |     Total
-----------+-----------+----------
        .5 |        15 |        71 
           |      0.33 |      0.13 
-----------+-----------+----------
         1 |        13 |        68 
           |      0.28 |      0.13 
-----------+-----------+----------
         2 |        11 |        73 
           |      0.24 |      0.14 
-----------+-----------+----------
         3 |         6 |        80 
           |      0.13 |      0.15 
-----------+-----------+----------
         4 |        12 |        76 
           |      0.26 |      0.14 
-----------+-----------+----------
         5 |         9 |        92 
           |      0.20 |      0.17 
-----------+-----------+----------
         6 |        13 |        78 
           |      0.28 |      0.15 
-----------+-----------+----------
         7 |         7 |        67 
           |      0.15 |      0.13 
-----------+-----------+----------
         8 |         5 |        63 
           |      0.11 |      0.12 
-----------+-----------+----------
         9 |        10 |        84 
           |      0.22 |      0.16 
-----------+-----------+----------
        10 |        12 |        68 
           |      0.26 |      0.13 
-----------+-----------+----------
        11 |         7 |        61 
           |      0.15 |      0.12 
-----------+-----------+----------
        12 |         9 |        69 
           |      0.20 |      0.13 
-----------+-----------+----------
        13 |         9 |        62 
           |      0.20 |      0.12 
-----------+-----------+----------
        14 |         7 |        73 
           |      0.15 |      0.14 
-----------+-----------+----------
        15 |         9 |        52 
           |      0.20 |      0.10 
-----------+-----------+----------
        16 |         8 |        61 
           |      0.17 |      0.12 
-----------+-----------+----------
        17 |        10 |        64 
           |      0.22 |      0.12 
-----------+-----------+----------
        18 |         8 |        71 
           |      0.17 |      0.13 
-----------+-----------+----------
        19 |         9 |        57 
           |      0.20 |      0.11 
-----------+-----------+----------
        20 |         4 |        55 
           |      0.09 |      0.10 
-----------+-----------+----------
        21 |         5 |        50 
           |      0.11 |      0.09 
-----------+-----------+----------
        22 |         4 |        45 
           |      0.09 |      0.09 
-----------+-----------+----------
        23 |        12 |        65 
           |      0.26 |      0.12 
-----------+-----------+----------
        24 |         5 |        53 
           |      0.11 |      0.10 
-----------+-----------+----------
        25 |         7 |        60 
           |      0.15 |      0.11 
-----------+-----------+----------
        26 |         3 |        40 
           |      0.07 |      0.08 
-----------+-----------+----------
        27 |         5 |        48 
           |      0.11 |      0.09 
-----------+-----------+----------
        28 |         8 |        50 
           |      0.17 |      0.09 
-----------+-----------+----------
        29 |         8 |        52 
           |      0.17 |      0.10 
-----------+-----------+----------
         . |     4,342 |    50,870 
           |     94.56 |     96.38 
-----------+-----------+----------
     Total |     4,592 |    52,778 
           |    100.00 |    100.00 

. tab _t drug if fail_ae_all==1&stop_ae_
> all==ae_all

  Analysis |
 time when |
    record |    drug
      ends |   control |     Total
-----------+-----------+----------
        .5 |        34 |        71 
         1 |        39 |        68 
         2 |        48 |        73 
         3 |        54 |        80 
         4 |        47 |        76 
         5 |        64 |        92 
         6 |        39 |        78 
         7 |        37 |        67 
         8 |        38 |        63 
         9 |        47 |        84 
        10 |        34 |        68 
        11 |        39 |        61 
        12 |        39 |        69 
        13 |        34 |        62 
        14 |        46 |        73 
        15 |        28 |        52 
        16 |        36 |        61 
        17 |        39 |        64 
        18 |        46 |        71 
        19 |        38 |        57 
        20 |        32 |        55 
        21 |        28 |        50 
        22 |        24 |        45 
        23 |        38 |        65 
        24 |        35 |        53 
        25 |        37 |        60 
        26 |        23 |        40 
        27 |        31 |        48 
        28 |        30 |        50 
        29 |        37 |        52 
-----------+-----------+----------
     Total |     1,141 |     1,908 


  Analysis |
 time when |
    record |    drug
      ends | sotrovima |     Total
-----------+-----------+----------
        .5 |        13 |        71 
         1 |         7 |        68 
         2 |         8 |        73 
         3 |        12 |        80 
         4 |         9 |        76 
         5 |         8 |        92 
         6 |        14 |        78 
         7 |        15 |        67 
         8 |        12 |        63 
         9 |        16 |        84 
        10 |        13 |        68 
        11 |         7 |        61 
        12 |        12 |        69 
        13 |         5 |        62 
        14 |        13 |        73 
        15 |        11 |        52 
        16 |         4 |        61 
        17 |         6 |        64 
        18 |        11 |        71 
        19 |         5 |        57 
        20 |        10 |        55 
        21 |         6 |        50 
        22 |         8 |        45 
        23 |         9 |        65 
        24 |         9 |        53 
        25 |         6 |        60 
        26 |         6 |        40 
        27 |         7 |        48 
        28 |         5 |        50 
        29 |         3 |        52 
-----------+-----------+----------
     Total |       270 |     1,908 


  Analysis |
 time when |
    record |    drug
      ends |  paxlovid |     Total
-----------+-----------+----------
        .5 |         9 |        71 
         1 |         9 |        68 
         2 |         6 |        73 
         3 |         8 |        80 
         4 |         8 |        76 
         5 |        11 |        92 
         6 |        12 |        78 
         7 |         8 |        67 
         8 |         8 |        63 
         9 |        11 |        84 
        10 |         9 |        68 
        11 |         8 |        61 
        12 |         9 |        69 
        13 |        14 |        62 
        14 |         7 |        73 
        15 |         4 |        52 
        16 |        13 |        61 
        17 |         9 |        64 
        18 |         6 |        71 
        19 |         5 |        57 
        20 |         9 |        55 
        21 |        11 |        50 
        22 |         9 |        45 
        23 |         6 |        65 
        24 |         4 |        53 
        25 |        10 |        60 
        26 |         8 |        40 
        27 |         5 |        48 
        28 |         7 |        50 
        29 |         4 |        52 
-----------+-----------+----------
     Total |       247 |     1,908 


  Analysis |
 time when |
    record |    drug
      ends | molnupira |     Total
-----------+-----------+----------
        .5 |        15 |        71 
         1 |        13 |        68 
         2 |        11 |        73 
         3 |         6 |        80 
         4 |        12 |        76 
         5 |         9 |        92 
         6 |        13 |        78 
         7 |         7 |        67 
         8 |         5 |        63 
         9 |        10 |        84 
        10 |        12 |        68 
        11 |         7 |        61 
        12 |         9 |        69 
        13 |         9 |        62 
        14 |         7 |        73 
        15 |         9 |        52 
        16 |         8 |        61 
        17 |        10 |        64 
        18 |         8 |        71 
        19 |         9 |        57 
        20 |         4 |        55 
        21 |         5 |        50 
        22 |         4 |        45 
        23 |        12 |        65 
        24 |         5 |        53 
        25 |         7 |        60 
        26 |         3 |        40 
        27 |         5 |        48 
        28 |         8 |        50 
        29 |         8 |        52 
-----------+-----------+----------
     Total |       250 |     1,908 

. tab fail_ae_all drug,m col

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

fail_ae_al |    drug
         l |   control |     Total
-----------+-----------+----------
         0 |     1,706 |     2,776 
           |      4.18 |      5.00 
-----------+-----------+----------
         1 |    39,138 |    52,778 
           |     95.82 |     95.00 
-----------+-----------+----------
     Total |    40,844 |    55,554 
           |    100.00 |    100.00 


fail_ae_al |    drug
         l | sotrovima |     Total
-----------+-----------+----------
         0 |       379 |     2,776 
           |      7.75 |      5.00 
-----------+-----------+----------
         1 |     4,511 |    52,778 
           |     92.25 |     95.00 
-----------+-----------+----------
     Total |     4,890 |    55,554 
           |    100.00 |    100.00 


fail_ae_al |    drug
         l |  paxlovid |     Total
-----------+-----------+----------
         0 |       336 |     2,776 
           |      6.90 |      5.00 
-----------+-----------+----------
         1 |     4,537 |    52,778 
           |     93.10 |     95.00 
-----------+-----------+----------
     Total |     4,873 |    55,554 
           |    100.00 |    100.00 


fail_ae_al |    drug
         l | molnupira |     Total
-----------+-----------+----------
         0 |       355 |     2,776 
           |      7.18 |      5.00 
-----------+-----------+----------
         1 |     4,592 |    52,778 
           |     92.82 |     95.00 
-----------+-----------+----------
     Total |     4,947 |    55,554 
           |    100.00 |    100.00 

. *check censor reasons*
. tab _t drug if fail_ae_all==0&_t<28&st
> op_ae_all==ae_all,m col
no observations

. tab _t drug if fail_ae_all==0&_t<28&st
> op_ae_all==death_date,m col

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

  Analysis |
 time when |
    record |    drug
      ends |   control |     Total
-----------+-----------+----------
         1 |         6 |         6 
           |     21.43 |     21.43 
-----------+-----------+----------
         2 |         1 |         1 
           |      3.57 |      3.57 
-----------+-----------+----------
         3 |         5 |         5 
           |     17.86 |     17.86 
-----------+-----------+----------
         4 |         9 |         9 
           |     32.14 |     32.14 
-----------+-----------+----------
         5 |         1 |         1 
           |      3.57 |      3.57 
-----------+-----------+----------
         6 |         3 |         3 
           |     10.71 |     10.71 
-----------+-----------+----------
         7 |         3 |         3 
           |     10.71 |     10.71 
-----------+-----------+----------
     Total |        28 |        28 
           |    100.00 |    100.00 

. tab _t drug if fail_ae_all==0&_t<28&st
> op_ae_all==dereg_date,m col

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

  Analysis |
 time when |
    record |    drug
      ends |   control |     Total
-----------+-----------+----------
         1 |         5 |         5 
           |     41.67 |     38.46 
-----------+-----------+----------
         2 |         2 |         3 
           |     16.67 |     23.08 
-----------+-----------+----------
         3 |         1 |         1 
           |      8.33 |      7.69 
-----------+-----------+----------
         5 |         2 |         2 
           |     16.67 |     15.38 
-----------+-----------+----------
         6 |         1 |         1 
           |      8.33 |      7.69 
-----------+-----------+----------
         7 |         1 |         1 
           |      8.33 |      7.69 
-----------+-----------+----------
     Total |        12 |        13 
           |    100.00 |    100.00 


  Analysis |
 time when |
    record |    drug
      ends | molnupira |     Total
-----------+-----------+----------
         1 |         0 |         5 
           |      0.00 |     38.46 
-----------+-----------+----------
         2 |         1 |         3 
           |    100.00 |     23.08 
-----------+-----------+----------
         3 |         0 |         1 
           |      0.00 |      7.69 
-----------+-----------+----------
         5 |         0 |         2 
           |      0.00 |     15.38 
-----------+-----------+----------
         6 |         0 |         1 
           |      0.00 |      7.69 
-----------+-----------+----------
         7 |         0 |         1 
           |      0.00 |      7.69 
-----------+-----------+----------
     Total |         1 |        13 
           |    100.00 |    100.00 

. tab _t drug if fail_ae_all==0&_t<28&st
> op_ae_all==min(paxlovid,molnupiravir)&
> drug==1,m col

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

  Analysis |
 time when |
    record |    drug
      ends | sotrovima |     Total
-----------+-----------+----------
         5 |         3 |         3 
           |     60.00 |     60.00 
-----------+-----------+----------
        15 |         1 |         1 
           |     20.00 |     20.00 
-----------+-----------+----------
        19 |         1 |         1 
           |     20.00 |     20.00 
-----------+-----------+----------
     Total |         5 |         5 
           |    100.00 |    100.00 

. tab _t drug if fail_ae_all==0&_t<28&st
> op_ae_all==min(sotrovimab,molnupiravir
> )&drug==2,m col

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

  Analysis |
 time when |
    record |    drug
      ends |  paxlovid |     Total
-----------+-----------+----------
         4 |         1 |         1 
           |     12.50 |     12.50 
-----------+-----------+----------
         7 |         1 |         1 
           |     12.50 |     12.50 
-----------+-----------+----------
        12 |         1 |         1 
           |     12.50 |     12.50 
-----------+-----------+----------
        15 |         1 |         1 
           |     12.50 |     12.50 
-----------+-----------+----------
        17 |         1 |         1 
           |     12.50 |     12.50 
-----------+-----------+----------
        20 |         1 |         1 
           |     12.50 |     12.50 
-----------+-----------+----------
        25 |         1 |         1 
           |     12.50 |     12.50 
-----------+-----------+----------
        27 |         1 |         1 
           |     12.50 |     12.50 
-----------+-----------+----------
     Total |         8 |         8 
           |    100.00 |    100.00 

. tab _t drug if fail_ae_all==0&_t<28&st
> op_ae_all==min(sotrovimab,paxlovid)&dr
> ug==3,m col

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

  Analysis |
 time when |
    record |    drug
      ends | molnupira |     Total
-----------+-----------+----------
         3 |         1 |         1 
           |     25.00 |     25.00 
-----------+-----------+----------
         5 |         1 |         1 
           |     25.00 |     25.00 
-----------+-----------+----------
         7 |         1 |         1 
           |     25.00 |     25.00 
-----------+-----------+----------
        16 |         1 |         1 
           |     25.00 |     25.00 
-----------+-----------+----------
     Total |         4 |         4 
           |    100.00 |    100.00 

. tab _t drug if fail_ae_all==0&_t<28&st
> op_ae_all==min(sotrovimab,paxlovid,mol
> nupiravir)&drug==0,m col
no observations

. 
. 
. save "$projectdir/output/data/main.dta
> ", replace
file C:\Users\k1635179\OneDrive -
    King's College
    London\Katie\OpenSafely\Safety mAB
    and
    antivirals\Safety-Sotrovimab-Paxlo
    > vid-Molnupiravir/output/data/mai
    > n.dta saved

. 
. log close
      name:  <unnamed>
       log:  C:\Users\k1635179\OneDrive 
> - King's College London\Katie\OpenSafe
> ly\Safety mAB and antivirals\Safety-So
> trovimab-Paxlovid-Molnupiravir/logs/cl
> eaning_dataset.log
  log type:  text
 closed on:  10 Jul 2023, 17:53:37
----------------------------------------
